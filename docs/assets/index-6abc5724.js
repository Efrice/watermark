var an=Object.defineProperty;var on=(e,t,s)=>t in e?an(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var De=(e,t,s)=>(on(e,typeof t!="symbol"?t+"":t,s),s),ht=(e,t,s)=>{if(!t.has(e))throw TypeError("Cannot "+s)};var O=(e,t,s)=>(ht(e,t,"read from private field"),s?s.call(e):t.get(e)),re=(e,t,s)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,s)},ge=(e,t,s,n)=>(ht(e,t,"write to private field"),n?n.call(e,s):t.set(e,s),s),rt=(e,t,s,n)=>({set _(i){ge(e,t,i,s)},get _(){return O(e,t,n)}}),ce=(e,t,s)=>(ht(e,t,"access private method"),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();function makeMap(e,t){const s=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)s[n[i]]=!0;return t?i=>!!s[i.toLowerCase()]:i=>!!s[i]}function normalizeStyle(e){if(isArray(e)){const t={};for(let s=0;s<e.length;s++){const n=e[s],i=isString$1(n)?parseStringStyle(n):normalizeStyle(n);if(i)for(const a in i)t[a]=i[a]}return t}else{if(isString$1(e))return e;if(isObject(e))return e}}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*.*?\*\//gs;function parseStringStyle(e){const t={};return e.replace(styleCommentRE,"").split(listDelimiterRE).forEach(s=>{if(s){const n=s.split(propertyDelimiterRE);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function normalizeClass(e){let t="";if(isString$1(e))t=e;else if(isArray(e))for(let s=0;s<e.length;s++){const n=normalizeClass(e[s]);n&&(t+=n+" ")}else if(isObject(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(e){return!!e||e===""}const toDisplayString=e=>isString$1(e)?e:e==null?"":isArray(e)||isObject(e)&&(e.toString===objectToString||!isFunction$1(e.toString))?JSON.stringify(e,replacer,2):String(e),replacer=(e,t)=>t&&t.__v_isRef?replacer(e,t.value):isMap(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[n,i])=>(s[`${n} =>`]=i,s),{})}:isSet(t)?{[`Set(${t.size})`]:[...t.values()]}:isObject(t)&&!isArray(t)&&!isPlainObject(t)?String(t):t,EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,onRE=/^on[^a-z]/,isOn=e=>onRE.test(e),isModelListener=e=>e.startsWith("onUpdate:"),extend=Object.assign,remove=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(e,t)=>hasOwnProperty$1.call(e,t),isArray=Array.isArray,isMap=e=>toTypeString(e)==="[object Map]",isSet=e=>toTypeString(e)==="[object Set]",isFunction$1=e=>typeof e=="function",isString$1=e=>typeof e=="string",isSymbol=e=>typeof e=="symbol",isObject=e=>e!==null&&typeof e=="object",isPromise=e=>isObject(e)&&isFunction$1(e.then)&&isFunction$1(e.catch),objectToString=Object.prototype.toString,toTypeString=e=>objectToString.call(e),toRawType=e=>toTypeString(e).slice(8,-1),isPlainObject=e=>toTypeString(e)==="[object Object]",isIntegerKey=e=>isString$1(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(e=>e.replace(camelizeRE,(t,s)=>s?s.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(e=>e.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(e=>e.charAt(0).toUpperCase()+e.slice(1)),toHandlerKey=cacheStringFunction(e=>e?`on${capitalize(e)}`:""),hasChanged=(e,t)=>!Object.is(e,t),invokeArrayFns=(e,t)=>{for(let s=0;s<e.length;s++)e[s](t)},def=(e,t,s)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:s})},looseToNumber=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let activeEffectScope;class EffectScope{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=activeEffectScope,!t&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const s=activeEffectScope;try{return activeEffectScope=this,t()}finally{activeEffectScope=s}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(t){if(this._active){let s,n;for(s=0,n=this.effects.length;s<n;s++)this.effects[s].stop();for(s=0,n=this.cleanups.length;s<n;s++)this.cleanups[s]();if(this.scopes)for(s=0,n=this.scopes.length;s<n;s++)this.scopes[s].stop(!0);if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0,this._active=!1}}}function recordEffectScope(e,t=activeEffectScope){t&&t.active&&t.effects.push(e)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(e){activeEffectScope&&activeEffectScope.cleanups.push(e)}const createDep=e=>{const t=new Set(e);return t.w=0,t.n=0,t},wasTracked=e=>(e.w&trackOpBit)>0,newTracked=e=>(e.n&trackOpBit)>0,initDepMarkers=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=trackOpBit},finalizeDepMarkers=e=>{const{deps:t}=e;if(t.length){let s=0;for(let n=0;n<t.length;n++){const i=t[n];wasTracked(i)&&!newTracked(i)?i.delete(e):t[s++]=i,i.w&=~trackOpBit,i.n&=~trackOpBit}t.length=s}},targetMap=new WeakMap;let effectTrackDepth=0,trackOpBit=1;const maxMarkerBits=30;let activeEffect;const ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol("");class ReactiveEffect{constructor(t,s=null,n){this.fn=t,this.scheduler=s,this.active=!0,this.deps=[],this.parent=void 0,recordEffectScope(this,n)}run(){if(!this.active)return this.fn();let t=activeEffect,s=shouldTrack;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=activeEffect,activeEffect=this,shouldTrack=!0,trackOpBit=1<<++effectTrackDepth,effectTrackDepth<=maxMarkerBits?initDepMarkers(this):cleanupEffect(this),this.fn()}finally{effectTrackDepth<=maxMarkerBits&&finalizeDepMarkers(this),trackOpBit=1<<--effectTrackDepth,activeEffect=this.parent,shouldTrack=s,this.parent=void 0,this.deferStop&&this.stop()}}stop(){activeEffect===this?this.deferStop=!0:this.active&&(cleanupEffect(this),this.onStop&&this.onStop(),this.active=!1)}}function cleanupEffect(e){const{deps:t}=e;if(t.length){for(let s=0;s<t.length;s++)t[s].delete(e);t.length=0}}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const e=trackStack.pop();shouldTrack=e===void 0?!0:e}function track(e,t,s){if(shouldTrack&&activeEffect){let n=targetMap.get(e);n||targetMap.set(e,n=new Map);let i=n.get(s);i||n.set(s,i=createDep()),trackEffects(i)}}function trackEffects(e,t){let s=!1;effectTrackDepth<=maxMarkerBits?newTracked(e)||(e.n|=trackOpBit,s=!wasTracked(e)):s=!e.has(activeEffect),s&&(e.add(activeEffect),activeEffect.deps.push(e))}function trigger(e,t,s,n,i,a){const u=targetMap.get(e);if(!u)return;let x=[];if(t==="clear")x=[...u.values()];else if(s==="length"&&isArray(e)){const w=Number(n);u.forEach((E,f)=>{(f==="length"||f>=w)&&x.push(E)})}else switch(s!==void 0&&x.push(u.get(s)),t){case"add":isArray(e)?isIntegerKey(s)&&x.push(u.get("length")):(x.push(u.get(ITERATE_KEY)),isMap(e)&&x.push(u.get(MAP_KEY_ITERATE_KEY)));break;case"delete":isArray(e)||(x.push(u.get(ITERATE_KEY)),isMap(e)&&x.push(u.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(e)&&x.push(u.get(ITERATE_KEY));break}if(x.length===1)x[0]&&triggerEffects(x[0]);else{const w=[];for(const E of x)E&&w.push(...E);triggerEffects(createDep(w))}}function triggerEffects(e,t){const s=isArray(e)?e:[...e];for(const n of s)n.computed&&triggerEffect(n);for(const n of s)n.computed||triggerEffect(n)}function triggerEffect(e,t){(e!==activeEffect||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(isSymbol)),get$1=createGetter(),shallowGet=createGetter(!1,!0),readonlyGet=createGetter(!0),arrayInstrumentations=createArrayInstrumentations();function createArrayInstrumentations(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...s){const n=toRaw(this);for(let a=0,u=this.length;a<u;a++)track(n,"get",a+"");const i=n[t](...s);return i===-1||i===!1?n[t](...s.map(toRaw)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...s){pauseTracking();const n=toRaw(this)[t].apply(this,s);return resetTracking(),n}}),e}function hasOwnProperty(e){const t=toRaw(this);return track(t,"has",e),t.hasOwnProperty(e)}function createGetter(e=!1,t=!1){return function(n,i,a){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&a===(e?t?shallowReadonlyMap:readonlyMap:t?shallowReactiveMap:reactiveMap).get(n))return n;const u=isArray(n);if(!e){if(u&&hasOwn(arrayInstrumentations,i))return Reflect.get(arrayInstrumentations,i,a);if(i==="hasOwnProperty")return hasOwnProperty}const x=Reflect.get(n,i,a);return(isSymbol(i)?builtInSymbols.has(i):isNonTrackableKeys(i))||(e||track(n,"get",i),t)?x:isRef(x)?u&&isIntegerKey(i)?x:x.value:isObject(x)?e?readonly(x):reactive(x):x}}const set$1=createSetter(),shallowSet=createSetter(!0);function createSetter(e=!1){return function(s,n,i,a){let u=s[n];if(isReadonly(u)&&isRef(u)&&!isRef(i))return!1;if(!e&&(!isShallow(i)&&!isReadonly(i)&&(u=toRaw(u),i=toRaw(i)),!isArray(s)&&isRef(u)&&!isRef(i)))return u.value=i,!0;const x=isArray(s)&&isIntegerKey(n)?Number(n)<s.length:hasOwn(s,n),w=Reflect.set(s,n,i,a);return s===toRaw(a)&&(x?hasChanged(i,u)&&trigger(s,"set",n,i):trigger(s,"add",n,i)),w}}function deleteProperty(e,t){const s=hasOwn(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&s&&trigger(e,"delete",t,void 0),n}function has$1(e,t){const s=Reflect.has(e,t);return(!isSymbol(t)||!builtInSymbols.has(t))&&track(e,"has",t),s}function ownKeys(e){return track(e,"iterate",isArray(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}const mutableHandlers={get:get$1,set:set$1,deleteProperty,has:has$1,ownKeys},readonlyHandlers={get:readonlyGet,set(e,t){return!0},deleteProperty(e,t){return!0}},shallowReactiveHandlers=extend({},mutableHandlers,{get:shallowGet,set:shallowSet}),toShallow=e=>e,getProto=e=>Reflect.getPrototypeOf(e);function get(e,t,s=!1,n=!1){e=e.__v_raw;const i=toRaw(e),a=toRaw(t);s||(t!==a&&track(i,"get",t),track(i,"get",a));const{has:u}=getProto(i),x=n?toShallow:s?toReadonly:toReactive;if(u.call(i,t))return x(e.get(t));if(u.call(i,a))return x(e.get(a));e!==i&&e.get(t)}function has(e,t=!1){const s=this.__v_raw,n=toRaw(s),i=toRaw(e);return t||(e!==i&&track(n,"has",e),track(n,"has",i)),e===i?s.has(e):s.has(e)||s.has(i)}function size(e,t=!1){return e=e.__v_raw,!t&&track(toRaw(e),"iterate",ITERATE_KEY),Reflect.get(e,"size",e)}function add(e){e=toRaw(e);const t=toRaw(this);return getProto(t).has.call(t,e)||(t.add(e),trigger(t,"add",e,e)),this}function set(e,t){t=toRaw(t);const s=toRaw(this),{has:n,get:i}=getProto(s);let a=n.call(s,e);a||(e=toRaw(e),a=n.call(s,e));const u=i.call(s,e);return s.set(e,t),a?hasChanged(t,u)&&trigger(s,"set",e,t):trigger(s,"add",e,t),this}function deleteEntry(e){const t=toRaw(this),{has:s,get:n}=getProto(t);let i=s.call(t,e);i||(e=toRaw(e),i=s.call(t,e)),n&&n.call(t,e);const a=t.delete(e);return i&&trigger(t,"delete",e,void 0),a}function clear(){const e=toRaw(this),t=e.size!==0,s=e.clear();return t&&trigger(e,"clear",void 0,void 0),s}function createForEach(e,t){return function(n,i){const a=this,u=a.__v_raw,x=toRaw(u),w=t?toShallow:e?toReadonly:toReactive;return!e&&track(x,"iterate",ITERATE_KEY),u.forEach((E,f)=>n.call(i,w(E),w(f),a))}}function createIterableMethod(e,t,s){return function(...n){const i=this.__v_raw,a=toRaw(i),u=isMap(a),x=e==="entries"||e===Symbol.iterator&&u,w=e==="keys"&&u,E=i[e](...n),f=s?toShallow:t?toReadonly:toReactive;return!t&&track(a,"iterate",w?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:N,done:C}=E.next();return C?{value:N,done:C}:{value:x?[f(N[0]),f(N[1])]:f(N),done:C}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(e){return function(...t){return e==="delete"?!1:this}}function createInstrumentations(){const e={get(a){return get(this,a)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!1)},t={get(a){return get(this,a,!1,!0)},get size(){return size(this)},has,add,set,delete:deleteEntry,clear,forEach:createForEach(!1,!0)},s={get(a){return get(this,a,!0)},get size(){return size(this,!0)},has(a){return has.call(this,a,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},n={get(a){return get(this,a,!0,!0)},get size(){return size(this,!0)},has(a){return has.call(this,a,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(a=>{e[a]=createIterableMethod(a,!1,!1),s[a]=createIterableMethod(a,!0,!1),t[a]=createIterableMethod(a,!1,!0),n[a]=createIterableMethod(a,!0,!0)}),[e,s,t,n]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(e,t){const s=t?e?shallowReadonlyInstrumentations:shallowInstrumentations:e?readonlyInstrumentations:mutableInstrumentations;return(n,i,a)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(hasOwn(s,i)&&i in n?s:n,i,a)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(e){return e.__v_skip||!Object.isExtensible(e)?0:targetTypeMap(toRawType(e))}function reactive(e){return isReadonly(e)?e:createReactiveObject(e,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(e){return createReactiveObject(e,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(e){return createReactiveObject(e,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function createReactiveObject(e,t,s,n,i){if(!isObject(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const a=i.get(e);if(a)return a;const u=getTargetType(e);if(u===0)return e;const x=new Proxy(e,u===2?n:s);return i.set(e,x),x}function isReactive(e){return isReadonly(e)?isReactive(e.__v_raw):!!(e&&e.__v_isReactive)}function isReadonly(e){return!!(e&&e.__v_isReadonly)}function isShallow(e){return!!(e&&e.__v_isShallow)}function isProxy(e){return isReactive(e)||isReadonly(e)}function toRaw(e){const t=e&&e.__v_raw;return t?toRaw(t):e}function markRaw(e){return def(e,"__v_skip",!0),e}const toReactive=e=>isObject(e)?reactive(e):e,toReadonly=e=>isObject(e)?readonly(e):e;function trackRefValue(e){shouldTrack&&activeEffect&&(e=toRaw(e),trackEffects(e.dep||(e.dep=createDep())))}function triggerRefValue(e,t){e=toRaw(e);const s=e.dep;s&&triggerEffects(s)}function isRef(e){return!!(e&&e.__v_isRef===!0)}function ref(e){return createRef(e,!1)}function shallowRef(e){return createRef(e,!0)}function createRef(e,t){return isRef(e)?e:new RefImpl(e,t)}class RefImpl{constructor(t,s){this.__v_isShallow=s,this.dep=void 0,this.__v_isRef=!0,this._rawValue=s?t:toRaw(t),this._value=s?t:toReactive(t)}get value(){return trackRefValue(this),this._value}set value(t){const s=this.__v_isShallow||isShallow(t)||isReadonly(t);t=s?t:toRaw(t),hasChanged(t,this._rawValue)&&(this._rawValue=t,this._value=s?t:toReactive(t),triggerRefValue(this))}}function unref(e){return isRef(e)?e.value:e}const shallowUnwrapHandlers={get:(e,t,s)=>unref(Reflect.get(e,t,s)),set:(e,t,s,n)=>{const i=e[t];return isRef(i)&&!isRef(s)?(i.value=s,!0):Reflect.set(e,t,s,n)}};function proxyRefs(e){return isReactive(e)?e:new Proxy(e,shallowUnwrapHandlers)}var _a$1;class ComputedRefImpl{constructor(t,s,n,i){this._setter=s,this.dep=void 0,this.__v_isRef=!0,this[_a$1]=!1,this._dirty=!0,this.effect=new ReactiveEffect(t,()=>{this._dirty||(this._dirty=!0,triggerRefValue(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=toRaw(this);return trackRefValue(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}_a$1="__v_isReadonly";function computed$1(e,t,s=!1){let n,i;const a=isFunction$1(e);return a?(n=e,i=NOOP):(n=e.get,i=e.set),new ComputedRefImpl(n,i,a||!i,s)}function warn(e,...t){}function callWithErrorHandling(e,t,s,n){let i;try{i=n?e(...n):e()}catch(a){handleError(a,t,s)}return i}function callWithAsyncErrorHandling(e,t,s,n){if(isFunction$1(e)){const a=callWithErrorHandling(e,t,s,n);return a&&isPromise(a)&&a.catch(u=>{handleError(u,t,s)}),a}const i=[];for(let a=0;a<e.length;a++)i.push(callWithAsyncErrorHandling(e[a],t,s,n));return i}function handleError(e,t,s,n=!0){const i=t?t.vnode:null;if(t){let a=t.parent;const u=t.proxy,x=s;for(;a;){const E=a.ec;if(E){for(let f=0;f<E.length;f++)if(E[f](e,u,x)===!1)return}a=a.parent}const w=t.appContext.config.errorHandler;if(w){callWithErrorHandling(w,null,10,[e,u,x]);return}}logError(e,s,i,n)}function logError(e,t,s,n=!0){console.error(e)}let isFlushing=!1,isFlushPending=!1;const queue=[];let flushIndex=0;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(e){const t=currentFlushPromise||resolvedPromise;return e?t.then(this?e.bind(this):e):t}function findInsertionIndex(e){let t=flushIndex+1,s=queue.length;for(;t<s;){const n=t+s>>>1;getId(queue[n])<e?t=n+1:s=n}return t}function queueJob(e){(!queue.length||!queue.includes(e,isFlushing&&e.allowRecurse?flushIndex+1:flushIndex))&&(e.id==null?queue.push(e):queue.splice(findInsertionIndex(e.id),0,e),queueFlush())}function queueFlush(){!isFlushing&&!isFlushPending&&(isFlushPending=!0,currentFlushPromise=resolvedPromise.then(flushJobs))}function invalidateJob(e){const t=queue.indexOf(e);t>flushIndex&&queue.splice(t,1)}function queuePostFlushCb(e){isArray(e)?pendingPostFlushCbs.push(...e):(!activePostFlushCbs||!activePostFlushCbs.includes(e,e.allowRecurse?postFlushIndex+1:postFlushIndex))&&pendingPostFlushCbs.push(e),queueFlush()}function flushPreFlushCbs(e,t=isFlushing?flushIndex+1:0){for(;t<queue.length;t++){const s=queue[t];s&&s.pre&&(queue.splice(t,1),t--,s())}}function flushPostFlushCbs(e){if(pendingPostFlushCbs.length){const t=[...new Set(pendingPostFlushCbs)];if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...t);return}for(activePostFlushCbs=t,activePostFlushCbs.sort((s,n)=>getId(s)-getId(n)),postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++)activePostFlushCbs[postFlushIndex]();activePostFlushCbs=null,postFlushIndex=0}}const getId=e=>e.id==null?1/0:e.id,comparator=(e,t)=>{const s=getId(e)-getId(t);if(s===0){if(e.pre&&!t.pre)return-1;if(t.pre&&!e.pre)return 1}return s};function flushJobs(e){isFlushPending=!1,isFlushing=!0,queue.sort(comparator);const t=NOOP;try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const s=queue[flushIndex];s&&s.active!==!1&&callWithErrorHandling(s,null,14)}}finally{flushIndex=0,queue.length=0,flushPostFlushCbs(),isFlushing=!1,currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}function emit(e,t,...s){if(e.isUnmounted)return;const n=e.vnode.props||EMPTY_OBJ;let i=s;const a=t.startsWith("update:"),u=a&&t.slice(7);if(u&&u in n){const f=`${u==="modelValue"?"model":u}Modifiers`,{number:N,trim:C}=n[f]||EMPTY_OBJ;C&&(i=s.map(I=>isString$1(I)?I.trim():I)),N&&(i=s.map(looseToNumber))}let x,w=n[x=toHandlerKey(t)]||n[x=toHandlerKey(camelize(t))];!w&&a&&(w=n[x=toHandlerKey(hyphenate(t))]),w&&callWithAsyncErrorHandling(w,e,6,i);const E=n[x+"Once"];if(E){if(!e.emitted)e.emitted={};else if(e.emitted[x])return;e.emitted[x]=!0,callWithAsyncErrorHandling(E,e,6,i)}}function normalizeEmitsOptions(e,t,s=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const a=e.emits;let u={},x=!1;if(!isFunction$1(e)){const w=E=>{const f=normalizeEmitsOptions(E,t,!0);f&&(x=!0,extend(u,f))};!s&&t.mixins.length&&t.mixins.forEach(w),e.extends&&w(e.extends),e.mixins&&e.mixins.forEach(w)}return!a&&!x?(isObject(e)&&n.set(e,null),null):(isArray(a)?a.forEach(w=>u[w]=null):extend(u,a),isObject(e)&&n.set(e,u),u)}function isEmitListener(e,t){return!e||!isOn(t)?!1:(t=t.slice(2).replace(/Once$/,""),hasOwn(e,t[0].toLowerCase()+t.slice(1))||hasOwn(e,hyphenate(t))||hasOwn(e,t))}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(e){const t=currentRenderingInstance;return currentRenderingInstance=e,currentScopeId=e&&e.type.__scopeId||null,t}function withCtx(e,t=currentRenderingInstance,s){if(!t||e._n)return e;const n=(...i)=>{n._d&&setBlockTracking(-1);const a=setCurrentRenderingInstance(t);let u;try{u=e(...i)}finally{setCurrentRenderingInstance(a),n._d&&setBlockTracking(1)}return u};return n._n=!0,n._c=!0,n._d=!0,n}function markAttrsAccessed(){}function renderComponentRoot(e){const{type:t,vnode:s,proxy:n,withProxy:i,props:a,propsOptions:[u],slots:x,attrs:w,emit:E,render:f,renderCache:N,data:C,setupState:I,ctx:v,inheritAttrs:y}=e;let d,T;const D=setCurrentRenderingInstance(e);try{if(s.shapeFlag&4){const k=i||n;d=normalizeVNode(f.call(k,k,N,a,I,C,v)),T=w}else{const k=t;d=normalizeVNode(k.length>1?k(a,{attrs:w,slots:x,emit:E}):k(a,null)),T=t.props?w:getFunctionalFallthrough(w)}}catch(k){blockStack.length=0,handleError(k,e,1),d=createVNode(Comment)}let L=d;if(T&&y!==!1){const k=Object.keys(T),{shapeFlag:l}=L;k.length&&l&7&&(u&&k.some(isModelListener)&&(T=filterModelListeners(T,u)),L=cloneVNode(L,T))}return s.dirs&&(L=cloneVNode(L),L.dirs=L.dirs?L.dirs.concat(s.dirs):s.dirs),s.transition&&(L.transition=s.transition),d=L,setCurrentRenderingInstance(D),d}const getFunctionalFallthrough=e=>{let t;for(const s in e)(s==="class"||s==="style"||isOn(s))&&((t||(t={}))[s]=e[s]);return t},filterModelListeners=(e,t)=>{const s={};for(const n in e)(!isModelListener(n)||!(n.slice(9)in t))&&(s[n]=e[n]);return s};function shouldUpdateComponent(e,t,s){const{props:n,children:i,component:a}=e,{props:u,children:x,patchFlag:w}=t,E=a.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&w>=0){if(w&1024)return!0;if(w&16)return n?hasPropsChanged(n,u,E):!!u;if(w&8){const f=t.dynamicProps;for(let N=0;N<f.length;N++){const C=f[N];if(u[C]!==n[C]&&!isEmitListener(E,C))return!0}}}else return(i||x)&&(!x||!x.$stable)?!0:n===u?!1:n?u?hasPropsChanged(n,u,E):!0:!!u;return!1}function hasPropsChanged(e,t,s){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const a=n[i];if(t[a]!==e[a]&&!isEmitListener(s,a))return!0}return!1}function updateHOCHostEl({vnode:e,parent:t},s){for(;t&&t.subTree===e;)(e=t.vnode).el=s,t=t.parent}const isSuspense=e=>e.__isSuspense;function queueEffectWithSuspense(e,t){t&&t.pendingBranch?isArray(e)?t.effects.push(...e):t.effects.push(e):queuePostFlushCb(e)}function provide(e,t){if(currentInstance){let s=currentInstance.provides;const n=currentInstance.parent&&currentInstance.parent.provides;n===s&&(s=currentInstance.provides=Object.create(n)),s[e]=t}}function inject(e,t,s=!1){const n=currentInstance||currentRenderingInstance;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return s&&isFunction$1(t)?t.call(n.proxy):t}}function watchEffect(e,t){return doWatch(e,null,t)}const INITIAL_WATCHER_VALUE={};function watch(e,t,s){return doWatch(e,t,s)}function doWatch(e,t,{immediate:s,deep:n,flush:i,onTrack:a,onTrigger:u}=EMPTY_OBJ){const x=getCurrentScope()===(currentInstance==null?void 0:currentInstance.scope)?currentInstance:null;let w,E=!1,f=!1;if(isRef(e)?(w=()=>e.value,E=isShallow(e)):isReactive(e)?(w=()=>e,n=!0):isArray(e)?(f=!0,E=e.some(L=>isReactive(L)||isShallow(L)),w=()=>e.map(L=>{if(isRef(L))return L.value;if(isReactive(L))return traverse(L);if(isFunction$1(L))return callWithErrorHandling(L,x,2)})):isFunction$1(e)?t?w=()=>callWithErrorHandling(e,x,2):w=()=>{if(!(x&&x.isUnmounted))return N&&N(),callWithAsyncErrorHandling(e,x,3,[C])}:w=NOOP,t&&n){const L=w;w=()=>traverse(L())}let N,C=L=>{N=T.onStop=()=>{callWithErrorHandling(L,x,4)}},I;if(isInSSRComponentSetup)if(C=NOOP,t?s&&callWithAsyncErrorHandling(t,x,3,[w(),f?[]:void 0,C]):w(),i==="sync"){const L=useSSRContext();I=L.__watcherHandles||(L.__watcherHandles=[])}else return NOOP;let v=f?new Array(e.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const y=()=>{if(T.active)if(t){const L=T.run();(n||E||(f?L.some((k,l)=>hasChanged(k,v[l])):hasChanged(L,v)))&&(N&&N(),callWithAsyncErrorHandling(t,x,3,[L,v===INITIAL_WATCHER_VALUE?void 0:f&&v[0]===INITIAL_WATCHER_VALUE?[]:v,C]),v=L)}else T.run()};y.allowRecurse=!!t;let d;i==="sync"?d=y:i==="post"?d=()=>queuePostRenderEffect(y,x&&x.suspense):(y.pre=!0,x&&(y.id=x.uid),d=()=>queueJob(y));const T=new ReactiveEffect(w,d);t?s?y():v=T.run():i==="post"?queuePostRenderEffect(T.run.bind(T),x&&x.suspense):T.run();const D=()=>{T.stop(),x&&x.scope&&remove(x.scope.effects,T)};return I&&I.push(D),D}function instanceWatch(e,t,s){const n=this.proxy,i=isString$1(e)?e.includes(".")?createPathGetter(n,e):()=>n[e]:e.bind(n,n);let a;isFunction$1(t)?a=t:(a=t.handler,s=t);const u=currentInstance;setCurrentInstance(this);const x=doWatch(i,a.bind(n),s);return u?setCurrentInstance(u):unsetCurrentInstance(),x}function createPathGetter(e,t){const s=t.split(".");return()=>{let n=e;for(let i=0;i<s.length&&n;i++)n=n[s[i]];return n}}function traverse(e,t){if(!isObject(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),isRef(e))traverse(e.value,t);else if(isArray(e))for(let s=0;s<e.length;s++)traverse(e[s],t);else if(isSet(e)||isMap(e))e.forEach(s=>{traverse(s,t)});else if(isPlainObject(e))for(const s in e)traverse(e[s],t);return e}function useTransitionState(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{e.isMounted=!0}),onBeforeUnmount(()=>{e.isUnmounting=!0}),e}const TransitionHookValidator=[Function,Array],BaseTransitionImpl={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},setup(e,{slots:t}){const s=getCurrentInstance(),n=useTransitionState();let i;return()=>{const a=t.default&&getTransitionRawChildren(t.default(),!0);if(!a||!a.length)return;let u=a[0];if(a.length>1){for(const y of a)if(y.type!==Comment){u=y;break}}const x=toRaw(e),{mode:w}=x;if(n.isLeaving)return emptyPlaceholder(u);const E=getKeepAliveChild(u);if(!E)return emptyPlaceholder(u);const f=resolveTransitionHooks(E,x,n,s);setTransitionHooks(E,f);const N=s.subTree,C=N&&getKeepAliveChild(N);let I=!1;const{getTransitionKey:v}=E.type;if(v){const y=v();i===void 0?i=y:y!==i&&(i=y,I=!0)}if(C&&C.type!==Comment&&(!isSameVNodeType(E,C)||I)){const y=resolveTransitionHooks(C,x,n,s);if(setTransitionHooks(C,y),w==="out-in")return n.isLeaving=!0,y.afterLeave=()=>{n.isLeaving=!1,s.update.active!==!1&&s.update()},emptyPlaceholder(u);w==="in-out"&&E.type!==Comment&&(y.delayLeave=(d,T,D)=>{const L=getLeavingNodesForType(n,C);L[String(C.key)]=C,d._leaveCb=()=>{T(),d._leaveCb=void 0,delete f.delayedLeave},f.delayedLeave=D})}return u}}},BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(e,t){const{leavingVNodes:s}=e;let n=s.get(t.type);return n||(n=Object.create(null),s.set(t.type,n)),n}function resolveTransitionHooks(e,t,s,n){const{appear:i,mode:a,persisted:u=!1,onBeforeEnter:x,onEnter:w,onAfterEnter:E,onEnterCancelled:f,onBeforeLeave:N,onLeave:C,onAfterLeave:I,onLeaveCancelled:v,onBeforeAppear:y,onAppear:d,onAfterAppear:T,onAppearCancelled:D}=t,L=String(e.key),k=getLeavingNodesForType(s,e),l=(c,S)=>{c&&callWithAsyncErrorHandling(c,n,9,S)},b=(c,S)=>{const j=S[1];l(c,S),isArray(c)?c.every(m=>m.length<=1)&&j():c.length<=1&&j()},_={mode:a,persisted:u,beforeEnter(c){let S=x;if(!s.isMounted)if(i)S=y||x;else return;c._leaveCb&&c._leaveCb(!0);const j=k[L];j&&isSameVNodeType(e,j)&&j.el._leaveCb&&j.el._leaveCb(),l(S,[c])},enter(c){let S=w,j=E,m=f;if(!s.isMounted)if(i)S=d||w,j=T||E,m=D||f;else return;let V=!1;const Y=c._enterCb=se=>{V||(V=!0,se?l(m,[c]):l(j,[c]),_.delayedLeave&&_.delayedLeave(),c._enterCb=void 0)};S?b(S,[c,Y]):Y()},leave(c,S){const j=String(e.key);if(c._enterCb&&c._enterCb(!0),s.isUnmounting)return S();l(N,[c]);let m=!1;const V=c._leaveCb=Y=>{m||(m=!0,S(),Y?l(v,[c]):l(I,[c]),c._leaveCb=void 0,k[j]===e&&delete k[j])};k[j]=e,C?b(C,[c,V]):V()},clone(c){return resolveTransitionHooks(c,t,s,n)}};return _}function emptyPlaceholder(e){if(isKeepAlive(e))return e=cloneVNode(e),e.children=null,e}function getKeepAliveChild(e){return isKeepAlive(e)?e.children?e.children[0]:void 0:e}function setTransitionHooks(e,t){e.shapeFlag&6&&e.component?setTransitionHooks(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function getTransitionRawChildren(e,t=!1,s){let n=[],i=0;for(let a=0;a<e.length;a++){let u=e[a];const x=s==null?u.key:String(s)+String(u.key!=null?u.key:a);u.type===Fragment?(u.patchFlag&128&&i++,n=n.concat(getTransitionRawChildren(u.children,t,x))):(t||u.type!==Comment)&&n.push(x!=null?cloneVNode(u,{key:x}):u)}if(i>1)for(let a=0;a<n.length;a++)n[a].patchFlag=-2;return n}function defineComponent(e){return isFunction$1(e)?{setup:e,name:e.name}:e}const isAsyncWrapper=e=>!!e.type.__asyncLoader,isKeepAlive=e=>e.type.__isKeepAlive;function onActivated(e,t){registerKeepAliveHook(e,"a",t)}function onDeactivated(e,t){registerKeepAliveHook(e,"da",t)}function registerKeepAliveHook(e,t,s=currentInstance){const n=e.__wdc||(e.__wdc=()=>{let i=s;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(injectHook(t,n,s),s){let i=s.parent;for(;i&&i.parent;)isKeepAlive(i.parent.vnode)&&injectToKeepAliveRoot(n,t,s,i),i=i.parent}}function injectToKeepAliveRoot(e,t,s,n){const i=injectHook(t,e,n,!0);onUnmounted(()=>{remove(n[t],i)},s)}function injectHook(e,t,s=currentInstance,n=!1){if(s){const i=s[e]||(s[e]=[]),a=t.__weh||(t.__weh=(...u)=>{if(s.isUnmounted)return;pauseTracking(),setCurrentInstance(s);const x=callWithAsyncErrorHandling(t,s,e,u);return unsetCurrentInstance(),resetTracking(),x});return n?i.unshift(a):i.push(a),a}}const createHook=e=>(t,s=currentInstance)=>(!isInSSRComponentSetup||e==="sp")&&injectHook(e,(...n)=>t(...n),s),onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(e,t=currentInstance){injectHook("ec",e,t)}function withDirectives(e,t){const s=currentRenderingInstance;if(s===null)return e;const n=getExposeProxy(s)||s.proxy,i=e.dirs||(e.dirs=[]);for(let a=0;a<t.length;a++){let[u,x,w,E=EMPTY_OBJ]=t[a];u&&(isFunction$1(u)&&(u={mounted:u,updated:u}),u.deep&&traverse(x),i.push({dir:u,instance:n,value:x,oldValue:void 0,arg:w,modifiers:E}))}return e}function invokeDirectiveHook(e,t,s,n){const i=e.dirs,a=t&&t.dirs;for(let u=0;u<i.length;u++){const x=i[u];a&&(x.oldValue=a[u].value);let w=x.dir[n];w&&(pauseTracking(),callWithAsyncErrorHandling(w,s,8,[e.el,x,e,t]),resetTracking())}}const NULL_DYNAMIC_COMPONENT=Symbol();function renderList(e,t,s,n){let i;const a=s&&s[n];if(isArray(e)||isString$1(e)){i=new Array(e.length);for(let u=0,x=e.length;u<x;u++)i[u]=t(e[u],u,void 0,a&&a[u])}else if(typeof e=="number"){i=new Array(e);for(let u=0;u<e;u++)i[u]=t(u+1,u,void 0,a&&a[u])}else if(isObject(e))if(e[Symbol.iterator])i=Array.from(e,(u,x)=>t(u,x,void 0,a&&a[x]));else{const u=Object.keys(e);i=new Array(u.length);for(let x=0,w=u.length;x<w;x++){const E=u[x];i[x]=t(e[E],E,x,a&&a[x])}}else i=[];return s&&(s[n]=i),i}const getPublicInstance=e=>e?isStatefulComponent(e)?getExposeProxy(e)||e.proxy:getPublicInstance(e.parent):null,publicPropertiesMap=extend(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>getPublicInstance(e.parent),$root:e=>getPublicInstance(e.root),$emit:e=>e.emit,$options:e=>resolveMergedOptions(e),$forceUpdate:e=>e.f||(e.f=()=>queueJob(e.update)),$nextTick:e=>e.n||(e.n=nextTick.bind(e.proxy)),$watch:e=>instanceWatch.bind(e)}),hasSetupBinding=(e,t)=>e!==EMPTY_OBJ&&!e.__isScriptSetup&&hasOwn(e,t),PublicInstanceProxyHandlers={get({_:e},t){const{ctx:s,setupState:n,data:i,props:a,accessCache:u,type:x,appContext:w}=e;let E;if(t[0]!=="$"){const I=u[t];if(I!==void 0)switch(I){case 1:return n[t];case 2:return i[t];case 4:return s[t];case 3:return a[t]}else{if(hasSetupBinding(n,t))return u[t]=1,n[t];if(i!==EMPTY_OBJ&&hasOwn(i,t))return u[t]=2,i[t];if((E=e.propsOptions[0])&&hasOwn(E,t))return u[t]=3,a[t];if(s!==EMPTY_OBJ&&hasOwn(s,t))return u[t]=4,s[t];shouldCacheAccess&&(u[t]=0)}}const f=publicPropertiesMap[t];let N,C;if(f)return t==="$attrs"&&track(e,"get",t),f(e);if((N=x.__cssModules)&&(N=N[t]))return N;if(s!==EMPTY_OBJ&&hasOwn(s,t))return u[t]=4,s[t];if(C=w.config.globalProperties,hasOwn(C,t))return C[t]},set({_:e},t,s){const{data:n,setupState:i,ctx:a}=e;return hasSetupBinding(i,t)?(i[t]=s,!0):n!==EMPTY_OBJ&&hasOwn(n,t)?(n[t]=s,!0):hasOwn(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(a[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:n,appContext:i,propsOptions:a}},u){let x;return!!s[u]||e!==EMPTY_OBJ&&hasOwn(e,u)||hasSetupBinding(t,u)||(x=a[0])&&hasOwn(x,u)||hasOwn(n,u)||hasOwn(publicPropertiesMap,u)||hasOwn(i.config.globalProperties,u)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:hasOwn(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};let shouldCacheAccess=!0;function applyOptions(e){const t=resolveMergedOptions(e),s=e.proxy,n=e.ctx;shouldCacheAccess=!1,t.beforeCreate&&callHook(t.beforeCreate,e,"bc");const{data:i,computed:a,methods:u,watch:x,provide:w,inject:E,created:f,beforeMount:N,mounted:C,beforeUpdate:I,updated:v,activated:y,deactivated:d,beforeDestroy:T,beforeUnmount:D,destroyed:L,unmounted:k,render:l,renderTracked:b,renderTriggered:_,errorCaptured:c,serverPrefetch:S,expose:j,inheritAttrs:m,components:V,directives:Y,filters:se}=t;if(E&&resolveInjections(E,n,null,e.appContext.config.unwrapInjectedRef),u)for(const de in u){const ae=u[de];isFunction$1(ae)&&(n[de]=ae.bind(s))}if(i){const de=i.call(s,s);isObject(de)&&(e.data=reactive(de))}if(shouldCacheAccess=!0,a)for(const de in a){const ae=a[de],pe=isFunction$1(ae)?ae.bind(s,s):isFunction$1(ae.get)?ae.get.bind(s,s):NOOP,ye=!isFunction$1(ae)&&isFunction$1(ae.set)?ae.set.bind(s):NOOP,ve=computed({get:pe,set:ye});Object.defineProperty(n,de,{enumerable:!0,configurable:!0,get:()=>ve.value,set:Ce=>ve.value=Ce})}if(x)for(const de in x)createWatcher(x[de],n,s,de);if(w){const de=isFunction$1(w)?w.call(s):w;Reflect.ownKeys(de).forEach(ae=>{provide(ae,de[ae])})}f&&callHook(f,e,"c");function oe(de,ae){isArray(ae)?ae.forEach(pe=>de(pe.bind(s))):ae&&de(ae.bind(s))}if(oe(onBeforeMount,N),oe(onMounted,C),oe(onBeforeUpdate,I),oe(onUpdated,v),oe(onActivated,y),oe(onDeactivated,d),oe(onErrorCaptured,c),oe(onRenderTracked,b),oe(onRenderTriggered,_),oe(onBeforeUnmount,D),oe(onUnmounted,k),oe(onServerPrefetch,S),isArray(j))if(j.length){const de=e.exposed||(e.exposed={});j.forEach(ae=>{Object.defineProperty(de,ae,{get:()=>s[ae],set:pe=>s[ae]=pe})})}else e.exposed||(e.exposed={});l&&e.render===NOOP&&(e.render=l),m!=null&&(e.inheritAttrs=m),V&&(e.components=V),Y&&(e.directives=Y)}function resolveInjections(e,t,s=NOOP,n=!1){isArray(e)&&(e=normalizeInject(e));for(const i in e){const a=e[i];let u;isObject(a)?"default"in a?u=inject(a.from||i,a.default,!0):u=inject(a.from||i):u=inject(a),isRef(u)&&n?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>u.value,set:x=>u.value=x}):t[i]=u}}function callHook(e,t,s){callWithAsyncErrorHandling(isArray(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,s)}function createWatcher(e,t,s,n){const i=n.includes(".")?createPathGetter(s,n):()=>s[n];if(isString$1(e)){const a=t[e];isFunction$1(a)&&watch(i,a)}else if(isFunction$1(e))watch(i,e.bind(s));else if(isObject(e))if(isArray(e))e.forEach(a=>createWatcher(a,t,s,n));else{const a=isFunction$1(e.handler)?e.handler.bind(s):t[e.handler];isFunction$1(a)&&watch(i,a,e)}}function resolveMergedOptions(e){const t=e.type,{mixins:s,extends:n}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:u}}=e.appContext,x=a.get(t);let w;return x?w=x:!i.length&&!s&&!n?w=t:(w={},i.length&&i.forEach(E=>mergeOptions(w,E,u,!0)),mergeOptions(w,t,u)),isObject(t)&&a.set(t,w),w}function mergeOptions(e,t,s,n=!1){const{mixins:i,extends:a}=t;a&&mergeOptions(e,a,s,!0),i&&i.forEach(u=>mergeOptions(e,u,s,!0));for(const u in t)if(!(n&&u==="expose")){const x=internalOptionMergeStrats[u]||s&&s[u];e[u]=x?x(e[u],t[u]):t[u]}return e}const internalOptionMergeStrats={data:mergeDataFn,props:mergeObjectOptions,emits:mergeObjectOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(e,t){return t?e?function(){return extend(isFunction$1(e)?e.call(this,this):e,isFunction$1(t)?t.call(this,this):t)}:t:e}function mergeInject(e,t){return mergeObjectOptions(normalizeInject(e),normalizeInject(t))}function normalizeInject(e){if(isArray(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function mergeAsArray(e,t){return e?[...new Set([].concat(e,t))]:t}function mergeObjectOptions(e,t){return e?extend(extend(Object.create(null),e),t):t}function mergeWatchOptions(e,t){if(!e)return t;if(!t)return e;const s=extend(Object.create(null),e);for(const n in t)s[n]=mergeAsArray(e[n],t[n]);return s}function initProps(e,t,s,n=!1){const i={},a={};def(a,InternalObjectKey,1),e.propsDefaults=Object.create(null),setFullProps(e,t,i,a);for(const u in e.propsOptions[0])u in i||(i[u]=void 0);s?e.props=n?i:shallowReactive(i):e.type.props?e.props=i:e.props=a,e.attrs=a}function updateProps(e,t,s,n){const{props:i,attrs:a,vnode:{patchFlag:u}}=e,x=toRaw(i),[w]=e.propsOptions;let E=!1;if((n||u>0)&&!(u&16)){if(u&8){const f=e.vnode.dynamicProps;for(let N=0;N<f.length;N++){let C=f[N];if(isEmitListener(e.emitsOptions,C))continue;const I=t[C];if(w)if(hasOwn(a,C))I!==a[C]&&(a[C]=I,E=!0);else{const v=camelize(C);i[v]=resolvePropValue(w,x,v,I,e,!1)}else I!==a[C]&&(a[C]=I,E=!0)}}}else{setFullProps(e,t,i,a)&&(E=!0);let f;for(const N in x)(!t||!hasOwn(t,N)&&((f=hyphenate(N))===N||!hasOwn(t,f)))&&(w?s&&(s[N]!==void 0||s[f]!==void 0)&&(i[N]=resolvePropValue(w,x,N,void 0,e,!0)):delete i[N]);if(a!==x)for(const N in a)(!t||!hasOwn(t,N))&&(delete a[N],E=!0)}E&&trigger(e,"set","$attrs")}function setFullProps(e,t,s,n){const[i,a]=e.propsOptions;let u=!1,x;if(t)for(let w in t){if(isReservedProp(w))continue;const E=t[w];let f;i&&hasOwn(i,f=camelize(w))?!a||!a.includes(f)?s[f]=E:(x||(x={}))[f]=E:isEmitListener(e.emitsOptions,w)||(!(w in n)||E!==n[w])&&(n[w]=E,u=!0)}if(a){const w=toRaw(s),E=x||EMPTY_OBJ;for(let f=0;f<a.length;f++){const N=a[f];s[N]=resolvePropValue(i,w,N,E[N],e,!hasOwn(E,N))}}return u}function resolvePropValue(e,t,s,n,i,a){const u=e[s];if(u!=null){const x=hasOwn(u,"default");if(x&&n===void 0){const w=u.default;if(u.type!==Function&&isFunction$1(w)){const{propsDefaults:E}=i;s in E?n=E[s]:(setCurrentInstance(i),n=E[s]=w.call(null,t),unsetCurrentInstance())}else n=w}u[0]&&(a&&!x?n=!1:u[1]&&(n===""||n===hyphenate(s))&&(n=!0))}return n}function normalizePropsOptions(e,t,s=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const a=e.props,u={},x=[];let w=!1;if(!isFunction$1(e)){const f=N=>{w=!0;const[C,I]=normalizePropsOptions(N,t,!0);extend(u,C),I&&x.push(...I)};!s&&t.mixins.length&&t.mixins.forEach(f),e.extends&&f(e.extends),e.mixins&&e.mixins.forEach(f)}if(!a&&!w)return isObject(e)&&n.set(e,EMPTY_ARR),EMPTY_ARR;if(isArray(a))for(let f=0;f<a.length;f++){const N=camelize(a[f]);validatePropName(N)&&(u[N]=EMPTY_OBJ)}else if(a)for(const f in a){const N=camelize(f);if(validatePropName(N)){const C=a[f],I=u[N]=isArray(C)||isFunction$1(C)?{type:C}:Object.assign({},C);if(I){const v=getTypeIndex(Boolean,I.type),y=getTypeIndex(String,I.type);I[0]=v>-1,I[1]=y<0||v<y,(v>-1||hasOwn(I,"default"))&&x.push(N)}}}const E=[u,x];return isObject(e)&&n.set(e,E),E}function validatePropName(e){return e[0]!=="$"}function getType(e){const t=e&&e.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:e===null?"null":""}function isSameType(e,t){return getType(e)===getType(t)}function getTypeIndex(e,t){return isArray(t)?t.findIndex(s=>isSameType(s,e)):isFunction$1(t)&&isSameType(t,e)?0:-1}const isInternalKey=e=>e[0]==="_"||e==="$stable",normalizeSlotValue=e=>isArray(e)?e.map(normalizeVNode):[normalizeVNode(e)],normalizeSlot=(e,t,s)=>{if(t._n)return t;const n=withCtx((...i)=>normalizeSlotValue(t(...i)),s);return n._c=!1,n},normalizeObjectSlots=(e,t,s)=>{const n=e._ctx;for(const i in e){if(isInternalKey(i))continue;const a=e[i];if(isFunction$1(a))t[i]=normalizeSlot(i,a,n);else if(a!=null){const u=normalizeSlotValue(a);t[i]=()=>u}}},normalizeVNodeSlots=(e,t)=>{const s=normalizeSlotValue(t);e.slots.default=()=>s},initSlots=(e,t)=>{if(e.vnode.shapeFlag&32){const s=t._;s?(e.slots=toRaw(t),def(t,"_",s)):normalizeObjectSlots(t,e.slots={})}else e.slots={},t&&normalizeVNodeSlots(e,t);def(e.slots,InternalObjectKey,1)},updateSlots=(e,t,s)=>{const{vnode:n,slots:i}=e;let a=!0,u=EMPTY_OBJ;if(n.shapeFlag&32){const x=t._;x?s&&x===1?a=!1:(extend(i,t),!s&&x===1&&delete i._):(a=!t.$stable,normalizeObjectSlots(t,i)),u=t}else t&&(normalizeVNodeSlots(e,t),u={default:1});if(a)for(const x in i)!isInternalKey(x)&&!(x in u)&&delete i[x]};function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(e,t){return function(n,i=null){isFunction$1(n)||(n=Object.assign({},n)),i!=null&&!isObject(i)&&(i=null);const a=createAppContext(),u=new Set;let x=!1;const w=a.app={_uid:uid$1++,_component:n,_props:i,_container:null,_context:a,_instance:null,version,get config(){return a.config},set config(E){},use(E,...f){return u.has(E)||(E&&isFunction$1(E.install)?(u.add(E),E.install(w,...f)):isFunction$1(E)&&(u.add(E),E(w,...f))),w},mixin(E){return a.mixins.includes(E)||a.mixins.push(E),w},component(E,f){return f?(a.components[E]=f,w):a.components[E]},directive(E,f){return f?(a.directives[E]=f,w):a.directives[E]},mount(E,f,N){if(!x){const C=createVNode(n,i);return C.appContext=a,f&&t?t(C,E):e(C,E,N),x=!0,w._container=E,E.__vue_app__=w,getExposeProxy(C.component)||C.component.proxy}},unmount(){x&&(e(null,w._container),delete w._container.__vue_app__)},provide(E,f){return a.provides[E]=f,w}};return w}}function setRef(e,t,s,n,i=!1){if(isArray(e)){e.forEach((C,I)=>setRef(C,t&&(isArray(t)?t[I]:t),s,n,i));return}if(isAsyncWrapper(n)&&!i)return;const a=n.shapeFlag&4?getExposeProxy(n.component)||n.component.proxy:n.el,u=i?null:a,{i:x,r:w}=e,E=t&&t.r,f=x.refs===EMPTY_OBJ?x.refs={}:x.refs,N=x.setupState;if(E!=null&&E!==w&&(isString$1(E)?(f[E]=null,hasOwn(N,E)&&(N[E]=null)):isRef(E)&&(E.value=null)),isFunction$1(w))callWithErrorHandling(w,x,12,[u,f]);else{const C=isString$1(w),I=isRef(w);if(C||I){const v=()=>{if(e.f){const y=C?hasOwn(N,w)?N[w]:f[w]:w.value;i?isArray(y)&&remove(y,a):isArray(y)?y.includes(a)||y.push(a):C?(f[w]=[a],hasOwn(N,w)&&(N[w]=f[w])):(w.value=[a],e.k&&(f[e.k]=w.value))}else C?(f[w]=u,hasOwn(N,w)&&(N[w]=u)):I&&(w.value=u,e.k&&(f[e.k]=u))};u?(v.id=-1,queuePostRenderEffect(v,s)):v()}}}const queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(e){return baseCreateRenderer(e)}function baseCreateRenderer(e,t){const s=getGlobalThis();s.__VUE__=!0;const{insert:n,remove:i,patchProp:a,createElement:u,createText:x,createComment:w,setText:E,setElementText:f,parentNode:N,nextSibling:C,setScopeId:I=NOOP,insertStaticContent:v}=e,y=(g,A,r,o=null,h=null,F=null,M=!1,U=null,X=!!A.dynamicChildren)=>{if(g===A)return;g&&!isSameVNodeType(g,A)&&(o=B(g),Ce(g,h,F,!0),g=null),A.patchFlag===-2&&(X=!1,A.dynamicChildren=null);const{type:W,ref:Z,shapeFlag:ee}=A;switch(W){case Text:d(g,A,r,o);break;case Comment:T(g,A,r,o);break;case Static:g==null&&D(A,r,o,M);break;case Fragment:V(g,A,r,o,h,F,M,U,X);break;default:ee&1?l(g,A,r,o,h,F,M,U,X):ee&6?Y(g,A,r,o,h,F,M,U,X):(ee&64||ee&128)&&W.process(g,A,r,o,h,F,M,U,X,q)}Z!=null&&h&&setRef(Z,g&&g.ref,F,A||g,!A)},d=(g,A,r,o)=>{if(g==null)n(A.el=x(A.children),r,o);else{const h=A.el=g.el;A.children!==g.children&&E(h,A.children)}},T=(g,A,r,o)=>{g==null?n(A.el=w(A.children||""),r,o):A.el=g.el},D=(g,A,r,o)=>{[g.el,g.anchor]=v(g.children,A,r,o,g.el,g.anchor)},L=({el:g,anchor:A},r,o)=>{let h;for(;g&&g!==A;)h=C(g),n(g,r,o),g=h;n(A,r,o)},k=({el:g,anchor:A})=>{let r;for(;g&&g!==A;)r=C(g),i(g),g=r;i(A)},l=(g,A,r,o,h,F,M,U,X)=>{M=M||A.type==="svg",g==null?b(A,r,o,h,F,M,U,X):S(g,A,h,F,M,U,X)},b=(g,A,r,o,h,F,M,U)=>{let X,W;const{type:Z,props:ee,shapeFlag:Q,transition:ne,dirs:le}=g;if(X=g.el=u(g.type,F,ee&&ee.is,ee),Q&8?f(X,g.children):Q&16&&c(g.children,X,null,o,h,F&&Z!=="foreignObject",M,U),le&&invokeDirectiveHook(g,null,o,"created"),_(X,g,g.scopeId,M,o),ee){for(const be in ee)be!=="value"&&!isReservedProp(be)&&a(X,be,null,ee[be],F,g.children,o,h,R);"value"in ee&&a(X,"value",null,ee.value),(W=ee.onVnodeBeforeMount)&&invokeVNodeHook(W,o,g)}le&&invokeDirectiveHook(g,null,o,"beforeMount");const he=(!h||h&&!h.pendingBranch)&&ne&&!ne.persisted;he&&ne.beforeEnter(X),n(X,A,r),((W=ee&&ee.onVnodeMounted)||he||le)&&queuePostRenderEffect(()=>{W&&invokeVNodeHook(W,o,g),he&&ne.enter(X),le&&invokeDirectiveHook(g,null,o,"mounted")},h)},_=(g,A,r,o,h)=>{if(r&&I(g,r),o)for(let F=0;F<o.length;F++)I(g,o[F]);if(h){let F=h.subTree;if(A===F){const M=h.vnode;_(g,M,M.scopeId,M.slotScopeIds,h.parent)}}},c=(g,A,r,o,h,F,M,U,X=0)=>{for(let W=X;W<g.length;W++){const Z=g[W]=U?cloneIfMounted(g[W]):normalizeVNode(g[W]);y(null,Z,A,r,o,h,F,M,U)}},S=(g,A,r,o,h,F,M)=>{const U=A.el=g.el;let{patchFlag:X,dynamicChildren:W,dirs:Z}=A;X|=g.patchFlag&16;const ee=g.props||EMPTY_OBJ,Q=A.props||EMPTY_OBJ;let ne;r&&toggleRecurse(r,!1),(ne=Q.onVnodeBeforeUpdate)&&invokeVNodeHook(ne,r,A,g),Z&&invokeDirectiveHook(A,g,r,"beforeUpdate"),r&&toggleRecurse(r,!0);const le=h&&A.type!=="foreignObject";if(W?j(g.dynamicChildren,W,U,r,o,le,F):M||ae(g,A,U,null,r,o,le,F,!1),X>0){if(X&16)m(U,A,ee,Q,r,o,h);else if(X&2&&ee.class!==Q.class&&a(U,"class",null,Q.class,h),X&4&&a(U,"style",ee.style,Q.style,h),X&8){const he=A.dynamicProps;for(let be=0;be<he.length;be++){const me=he[be],we=ee[me],te=Q[me];(te!==we||me==="value")&&a(U,me,we,te,h,g.children,r,o,R)}}X&1&&g.children!==A.children&&f(U,A.children)}else!M&&W==null&&m(U,A,ee,Q,r,o,h);((ne=Q.onVnodeUpdated)||Z)&&queuePostRenderEffect(()=>{ne&&invokeVNodeHook(ne,r,A,g),Z&&invokeDirectiveHook(A,g,r,"updated")},o)},j=(g,A,r,o,h,F,M)=>{for(let U=0;U<A.length;U++){const X=g[U],W=A[U],Z=X.el&&(X.type===Fragment||!isSameVNodeType(X,W)||X.shapeFlag&70)?N(X.el):r;y(X,W,Z,null,o,h,F,M,!0)}},m=(g,A,r,o,h,F,M)=>{if(r!==o){if(r!==EMPTY_OBJ)for(const U in r)!isReservedProp(U)&&!(U in o)&&a(g,U,r[U],null,M,A.children,h,F,R);for(const U in o){if(isReservedProp(U))continue;const X=o[U],W=r[U];X!==W&&U!=="value"&&a(g,U,W,X,M,A.children,h,F,R)}"value"in o&&a(g,"value",r.value,o.value)}},V=(g,A,r,o,h,F,M,U,X)=>{const W=A.el=g?g.el:x(""),Z=A.anchor=g?g.anchor:x("");let{patchFlag:ee,dynamicChildren:Q,slotScopeIds:ne}=A;ne&&(U=U?U.concat(ne):ne),g==null?(n(W,r,o),n(Z,r,o),c(A.children,r,Z,h,F,M,U,X)):ee>0&&ee&64&&Q&&g.dynamicChildren?(j(g.dynamicChildren,Q,r,h,F,M,U),(A.key!=null||h&&A===h.subTree)&&traverseStaticChildren(g,A,!0)):ae(g,A,r,Z,h,F,M,U,X)},Y=(g,A,r,o,h,F,M,U,X)=>{A.slotScopeIds=U,g==null?A.shapeFlag&512?h.ctx.activate(A,r,o,M,X):se(A,r,o,h,F,M,X):ie(g,A,X)},se=(g,A,r,o,h,F,M)=>{const U=g.component=createComponentInstance(g,o,h);if(isKeepAlive(g)&&(U.ctx.renderer=q),setupComponent(U),U.asyncDep){if(h&&h.registerDep(U,oe),!g.el){const X=U.subTree=createVNode(Comment);T(null,X,A,r)}return}oe(U,g,A,r,h,F,M)},ie=(g,A,r)=>{const o=A.component=g.component;if(shouldUpdateComponent(g,A,r))if(o.asyncDep&&!o.asyncResolved){de(o,A,r);return}else o.next=A,invalidateJob(o.update),o.update();else A.el=g.el,o.vnode=A},oe=(g,A,r,o,h,F,M)=>{const U=()=>{if(g.isMounted){let{next:Z,bu:ee,u:Q,parent:ne,vnode:le}=g,he=Z,be;toggleRecurse(g,!1),Z?(Z.el=le.el,de(g,Z,M)):Z=le,ee&&invokeArrayFns(ee),(be=Z.props&&Z.props.onVnodeBeforeUpdate)&&invokeVNodeHook(be,ne,Z,le),toggleRecurse(g,!0);const me=renderComponentRoot(g),we=g.subTree;g.subTree=me,y(we,me,N(we.el),B(we),g,h,F),Z.el=me.el,he===null&&updateHOCHostEl(g,me.el),Q&&queuePostRenderEffect(Q,h),(be=Z.props&&Z.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(be,ne,Z,le),h)}else{let Z;const{el:ee,props:Q}=A,{bm:ne,m:le,parent:he}=g,be=isAsyncWrapper(A);if(toggleRecurse(g,!1),ne&&invokeArrayFns(ne),!be&&(Z=Q&&Q.onVnodeBeforeMount)&&invokeVNodeHook(Z,he,A),toggleRecurse(g,!0),ee&&z){const me=()=>{g.subTree=renderComponentRoot(g),z(ee,g.subTree,g,h,null)};be?A.type.__asyncLoader().then(()=>!g.isUnmounted&&me()):me()}else{const me=g.subTree=renderComponentRoot(g);y(null,me,r,o,g,h,F),A.el=me.el}if(le&&queuePostRenderEffect(le,h),!be&&(Z=Q&&Q.onVnodeMounted)){const me=A;queuePostRenderEffect(()=>invokeVNodeHook(Z,he,me),h)}(A.shapeFlag&256||he&&isAsyncWrapper(he.vnode)&&he.vnode.shapeFlag&256)&&g.a&&queuePostRenderEffect(g.a,h),g.isMounted=!0,A=r=o=null}},X=g.effect=new ReactiveEffect(U,()=>queueJob(W),g.scope),W=g.update=()=>X.run();W.id=g.uid,toggleRecurse(g,!0),W()},de=(g,A,r)=>{A.component=g;const o=g.vnode.props;g.vnode=A,g.next=null,updateProps(g,A.props,o,r),updateSlots(g,A.children,r),pauseTracking(),flushPreFlushCbs(),resetTracking()},ae=(g,A,r,o,h,F,M,U,X=!1)=>{const W=g&&g.children,Z=g?g.shapeFlag:0,ee=A.children,{patchFlag:Q,shapeFlag:ne}=A;if(Q>0){if(Q&128){ye(W,ee,r,o,h,F,M,U,X);return}else if(Q&256){pe(W,ee,r,o,h,F,M,U,X);return}}ne&8?(Z&16&&R(W,h,F),ee!==W&&f(r,ee)):Z&16?ne&16?ye(W,ee,r,o,h,F,M,U,X):R(W,h,F,!0):(Z&8&&f(r,""),ne&16&&c(ee,r,o,h,F,M,U,X))},pe=(g,A,r,o,h,F,M,U,X)=>{g=g||EMPTY_ARR,A=A||EMPTY_ARR;const W=g.length,Z=A.length,ee=Math.min(W,Z);let Q;for(Q=0;Q<ee;Q++){const ne=A[Q]=X?cloneIfMounted(A[Q]):normalizeVNode(A[Q]);y(g[Q],ne,r,null,h,F,M,U,X)}W>Z?R(g,h,F,!0,!1,ee):c(A,r,o,h,F,M,U,X,ee)},ye=(g,A,r,o,h,F,M,U,X)=>{let W=0;const Z=A.length;let ee=g.length-1,Q=Z-1;for(;W<=ee&&W<=Q;){const ne=g[W],le=A[W]=X?cloneIfMounted(A[W]):normalizeVNode(A[W]);if(isSameVNodeType(ne,le))y(ne,le,r,null,h,F,M,U,X);else break;W++}for(;W<=ee&&W<=Q;){const ne=g[ee],le=A[Q]=X?cloneIfMounted(A[Q]):normalizeVNode(A[Q]);if(isSameVNodeType(ne,le))y(ne,le,r,null,h,F,M,U,X);else break;ee--,Q--}if(W>ee){if(W<=Q){const ne=Q+1,le=ne<Z?A[ne].el:o;for(;W<=Q;)y(null,A[W]=X?cloneIfMounted(A[W]):normalizeVNode(A[W]),r,le,h,F,M,U,X),W++}}else if(W>Q)for(;W<=ee;)Ce(g[W],h,F,!0),W++;else{const ne=W,le=W,he=new Map;for(W=le;W<=Q;W++){const ue=A[W]=X?cloneIfMounted(A[W]):normalizeVNode(A[W]);ue.key!=null&&he.set(ue.key,W)}let be,me=0;const we=Q-le+1;let te=!1,Ae=0;const Ee=new Array(we);for(W=0;W<we;W++)Ee[W]=0;for(W=ne;W<=ee;W++){const ue=g[W];if(me>=we){Ce(ue,h,F,!0);continue}let $;if(ue.key!=null)$=he.get(ue.key);else for(be=le;be<=Q;be++)if(Ee[be-le]===0&&isSameVNodeType(ue,A[be])){$=be;break}$===void 0?Ce(ue,h,F,!0):(Ee[$-le]=W+1,$>=Ae?Ae=$:te=!0,y(ue,A[$],r,null,h,F,M,U,X),me++)}const Oe=te?getSequence(Ee):EMPTY_ARR;for(be=Oe.length-1,W=we-1;W>=0;W--){const ue=le+W,$=A[ue],H=ue+1<Z?A[ue+1].el:o;Ee[W]===0?y(null,$,r,H,h,F,M,U,X):te&&(be<0||W!==Oe[be]?ve($,r,H,2):be--)}}},ve=(g,A,r,o,h=null)=>{const{el:F,type:M,transition:U,children:X,shapeFlag:W}=g;if(W&6){ve(g.component.subTree,A,r,o);return}if(W&128){g.suspense.move(A,r,o);return}if(W&64){M.move(g,A,r,q);return}if(M===Fragment){n(F,A,r);for(let ee=0;ee<X.length;ee++)ve(X[ee],A,r,o);n(g.anchor,A,r);return}if(M===Static){L(g,A,r);return}if(o!==2&&W&1&&U)if(o===0)U.beforeEnter(F),n(F,A,r),queuePostRenderEffect(()=>U.enter(F),h);else{const{leave:ee,delayLeave:Q,afterLeave:ne}=U,le=()=>n(F,A,r),he=()=>{ee(F,()=>{le(),ne&&ne()})};Q?Q(F,le,he):he()}else n(F,A,r)},Ce=(g,A,r,o=!1,h=!1)=>{const{type:F,props:M,ref:U,children:X,dynamicChildren:W,shapeFlag:Z,patchFlag:ee,dirs:Q}=g;if(U!=null&&setRef(U,null,r,g,!0),Z&256){A.ctx.deactivate(g);return}const ne=Z&1&&Q,le=!isAsyncWrapper(g);let he;if(le&&(he=M&&M.onVnodeBeforeUnmount)&&invokeVNodeHook(he,A,g),Z&6)P(g.component,r,o);else{if(Z&128){g.suspense.unmount(r,o);return}ne&&invokeDirectiveHook(g,null,A,"beforeUnmount"),Z&64?g.type.remove(g,A,r,h,q,o):W&&(F!==Fragment||ee>0&&ee&64)?R(W,A,r,!1,!0):(F===Fragment&&ee&384||!h&&Z&16)&&R(X,A,r),o&&Se(g)}(le&&(he=M&&M.onVnodeUnmounted)||ne)&&queuePostRenderEffect(()=>{he&&invokeVNodeHook(he,A,g),ne&&invokeDirectiveHook(g,null,A,"unmounted")},r)},Se=g=>{const{type:A,el:r,anchor:o,transition:h}=g;if(A===Fragment){K(r,o);return}if(A===Static){k(g);return}const F=()=>{i(r),h&&!h.persisted&&h.afterLeave&&h.afterLeave()};if(g.shapeFlag&1&&h&&!h.persisted){const{leave:M,delayLeave:U}=h,X=()=>M(r,F);U?U(g.el,F,X):X()}else F()},K=(g,A)=>{let r;for(;g!==A;)r=C(g),i(g),g=r;i(A)},P=(g,A,r)=>{const{bum:o,scope:h,update:F,subTree:M,um:U}=g;o&&invokeArrayFns(o),h.stop(),F&&(F.active=!1,Ce(M,g,A,r)),U&&queuePostRenderEffect(U,A),queuePostRenderEffect(()=>{g.isUnmounted=!0},A),A&&A.pendingBranch&&!A.isUnmounted&&g.asyncDep&&!g.asyncResolved&&g.suspenseId===A.pendingId&&(A.deps--,A.deps===0&&A.resolve())},R=(g,A,r,o=!1,h=!1,F=0)=>{for(let M=F;M<g.length;M++)Ce(g[M],A,r,o,h)},B=g=>g.shapeFlag&6?B(g.component.subTree):g.shapeFlag&128?g.suspense.next():C(g.anchor||g.el),G=(g,A,r)=>{g==null?A._vnode&&Ce(A._vnode,null,null,!0):y(A._vnode||null,g,A,null,null,null,r),flushPreFlushCbs(),flushPostFlushCbs(),A._vnode=g},q={p:y,um:Ce,m:ve,r:Se,mt:se,mc:c,pc:ae,pbc:j,n:B,o:e};let J,z;return t&&([J,z]=t(q)),{render:G,hydrate:J,createApp:createAppAPI(G,J)}}function toggleRecurse({effect:e,update:t},s){e.allowRecurse=t.allowRecurse=s}function traverseStaticChildren(e,t,s=!1){const n=e.children,i=t.children;if(isArray(n)&&isArray(i))for(let a=0;a<n.length;a++){const u=n[a];let x=i[a];x.shapeFlag&1&&!x.dynamicChildren&&((x.patchFlag<=0||x.patchFlag===32)&&(x=i[a]=cloneIfMounted(i[a]),x.el=u.el),s||traverseStaticChildren(u,x)),x.type===Text&&(x.el=u.el)}}function getSequence(e){const t=e.slice(),s=[0];let n,i,a,u,x;const w=e.length;for(n=0;n<w;n++){const E=e[n];if(E!==0){if(i=s[s.length-1],e[i]<E){t[n]=i,s.push(n);continue}for(a=0,u=s.length-1;a<u;)x=a+u>>1,e[s[x]]<E?a=x+1:u=x;E<e[s[a]]&&(a>0&&(t[n]=s[a-1]),s[a]=n)}}for(a=s.length,u=s[a-1];a-- >0;)s[a]=u,u=t[u];return s}const isTeleport=e=>e.__isTeleport,Fragment=Symbol(void 0),Text=Symbol(void 0),Comment=Symbol(void 0),Static=Symbol(void 0),blockStack=[];let currentBlock=null;function openBlock(e=!1){blockStack.push(currentBlock=e?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(e){isBlockTreeEnabled+=e}function setupBlock(e){return e.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(e),e}function createElementBlock(e,t,s,n,i,a){return setupBlock(createBaseVNode(e,t,s,n,i,a,!0))}function createBlock(e,t,s,n,i){return setupBlock(createVNode(e,t,s,n,i,!0))}function isVNode(e){return e?e.__v_isVNode===!0:!1}function isSameVNodeType(e,t){return e.type===t.type&&e.key===t.key}const InternalObjectKey="__vInternal",normalizeKey=({key:e})=>e??null,normalizeRef=({ref:e,ref_key:t,ref_for:s})=>e!=null?isString$1(e)||isRef(e)||isFunction$1(e)?{i:currentRenderingInstance,r:e,k:t,f:!!s}:e:null;function createBaseVNode(e,t=null,s=null,n=0,i=null,a=e===Fragment?0:1,u=!1,x=!1){const w={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&normalizeKey(t),ref:t&&normalizeRef(t),scopeId:currentScopeId,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return x?(normalizeChildren(w,s),a&128&&e.normalize(w)):s&&(w.shapeFlag|=isString$1(s)?8:16),isBlockTreeEnabled>0&&!u&&currentBlock&&(w.patchFlag>0||a&6)&&w.patchFlag!==32&&currentBlock.push(w),w}const createVNode=_createVNode;function _createVNode(e,t=null,s=null,n=0,i=null,a=!1){if((!e||e===NULL_DYNAMIC_COMPONENT)&&(e=Comment),isVNode(e)){const x=cloneVNode(e,t,!0);return s&&normalizeChildren(x,s),isBlockTreeEnabled>0&&!a&&currentBlock&&(x.shapeFlag&6?currentBlock[currentBlock.indexOf(e)]=x:currentBlock.push(x)),x.patchFlag|=-2,x}if(isClassComponent(e)&&(e=e.__vccOpts),t){t=guardReactiveProps(t);let{class:x,style:w}=t;x&&!isString$1(x)&&(t.class=normalizeClass(x)),isObject(w)&&(isProxy(w)&&!isArray(w)&&(w=extend({},w)),t.style=normalizeStyle(w))}const u=isString$1(e)?1:isSuspense(e)?128:isTeleport(e)?64:isObject(e)?4:isFunction$1(e)?2:0;return createBaseVNode(e,t,s,n,i,u,a,!0)}function guardReactiveProps(e){return e?isProxy(e)||InternalObjectKey in e?extend({},e):e:null}function cloneVNode(e,t,s=!1){const{props:n,ref:i,patchFlag:a,children:u}=e,x=t?mergeProps(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:x,key:x&&normalizeKey(x),ref:t&&t.ref?s&&i?isArray(i)?i.concat(normalizeRef(t)):[i,normalizeRef(t)]:normalizeRef(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:u,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Fragment?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&cloneVNode(e.ssContent),ssFallback:e.ssFallback&&cloneVNode(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce}}function createTextVNode(e=" ",t=0){return createVNode(Text,null,e,t)}function normalizeVNode(e){return e==null||typeof e=="boolean"?createVNode(Comment):isArray(e)?createVNode(Fragment,null,e.slice()):typeof e=="object"?cloneIfMounted(e):createVNode(Text,null,String(e))}function cloneIfMounted(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:cloneVNode(e)}function normalizeChildren(e,t){let s=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(isArray(t))s=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),normalizeChildren(e,i()),i._c&&(i._d=!0));return}else{s=32;const i=t._;!i&&!(InternalObjectKey in t)?t._ctx=currentRenderingInstance:i===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else isFunction$1(t)?(t={default:t,_ctx:currentRenderingInstance},s=32):(t=String(t),n&64?(s=16,t=[createTextVNode(t)]):s=8);e.children=t,e.shapeFlag|=s}function mergeProps(...e){const t={};for(let s=0;s<e.length;s++){const n=e[s];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=normalizeClass([t.class,n.class]));else if(i==="style")t.style=normalizeStyle([t.style,n.style]);else if(isOn(i)){const a=t[i],u=n[i];u&&a!==u&&!(isArray(a)&&a.includes(u))&&(t[i]=a?[].concat(a,u):u)}else i!==""&&(t[i]=n[i])}return t}function invokeVNodeHook(e,t,s,n=null){callWithAsyncErrorHandling(e,t,7,[s,n])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(e,t,s){const n=e.type,i=(t?t.appContext:e.appContext)||emptyAppContext,a={uid:uid++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(n,i),emitsOptions:normalizeEmitsOptions(n,i),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:n.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=emit.bind(null,a),e.ce&&e.ce(a),a}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance,setCurrentInstance=e=>{currentInstance=e,e.scope.on()},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),currentInstance=null};function isStatefulComponent(e){return e.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(e,t=!1){isInSSRComponentSetup=t;const{props:s,children:n}=e.vnode,i=isStatefulComponent(e);initProps(e,s,i,t),initSlots(e,n);const a=i?setupStatefulComponent(e,t):void 0;return isInSSRComponentSetup=!1,a}function setupStatefulComponent(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=markRaw(new Proxy(e.ctx,PublicInstanceProxyHandlers));const{setup:n}=s;if(n){const i=e.setupContext=n.length>1?createSetupContext(e):null;setCurrentInstance(e),pauseTracking();const a=callWithErrorHandling(n,e,0,[e.props,i]);if(resetTracking(),unsetCurrentInstance(),isPromise(a)){if(a.then(unsetCurrentInstance,unsetCurrentInstance),t)return a.then(u=>{handleSetupResult(e,u,t)}).catch(u=>{handleError(u,e,0)});e.asyncDep=a}else handleSetupResult(e,a,t)}else finishComponentSetup(e,t)}function handleSetupResult(e,t,s){isFunction$1(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:isObject(t)&&(e.setupState=proxyRefs(t)),finishComponentSetup(e,s)}let compile;function finishComponentSetup(e,t,s){const n=e.type;if(!e.render){if(!t&&compile&&!n.render){const i=n.template||resolveMergedOptions(e).template;if(i){const{isCustomElement:a,compilerOptions:u}=e.appContext.config,{delimiters:x,compilerOptions:w}=n,E=extend(extend({isCustomElement:a,delimiters:x},u),w);n.render=compile(i,E)}}e.render=n.render||NOOP}setCurrentInstance(e),pauseTracking(),applyOptions(e),resetTracking(),unsetCurrentInstance()}function createAttrsProxy(e){return new Proxy(e.attrs,{get(t,s){return track(e,"get","$attrs"),t[s]}})}function createSetupContext(e){const t=n=>{e.exposed=n||{}};let s;return{get attrs(){return s||(s=createAttrsProxy(e))},slots:e.slots,emit:e.emit,expose:t}}function getExposeProxy(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(proxyRefs(markRaw(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in publicPropertiesMap)return publicPropertiesMap[s](e)},has(t,s){return s in t||s in publicPropertiesMap}}))}function isClassComponent(e){return isFunction$1(e)&&"__vccOpts"in e}const computed=(e,t)=>computed$1(e,t,isInSSRComponentSetup),ssrContextKey=Symbol(""),useSSRContext=()=>inject(ssrContextKey),version="3.2.47",svgNS="http://www.w3.org/2000/svg",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,n)=>{const i=t?doc.createElementNS(svgNS,e):doc.createElement(e,s?{is:s}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>doc.createTextNode(e),createComment:e=>doc.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>doc.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,n,i,a){const u=s?s.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),s),!(i===a||!(i=i.nextSibling)););else{templateContainer.innerHTML=n?`<svg>${e}</svg>`:e;const x=templateContainer.content;if(n){const w=x.firstChild;for(;w.firstChild;)x.appendChild(w.firstChild);x.removeChild(w)}t.insertBefore(x,s)}return[u?u.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}};function patchClass(e,t,s){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}function patchStyle(e,t,s){const n=e.style,i=isString$1(s);if(s&&!i){if(t&&!isString$1(t))for(const a in t)s[a]==null&&setStyle(n,a,"");for(const a in s)setStyle(n,a,s[a])}else{const a=n.display;i?t!==s&&(n.cssText=s):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=a)}}const importantRE=/\s*!important$/;function setStyle(e,t,s){if(isArray(s))s.forEach(n=>setStyle(e,t,n));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const n=autoPrefix(e,t);importantRE.test(s)?e.setProperty(hyphenate(n),s.replace(importantRE,""),"important"):e[n]=s}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(e,t){const s=prefixCache[t];if(s)return s;let n=camelize(t);if(n!=="filter"&&n in e)return prefixCache[t]=n;n=capitalize(n);for(let i=0;i<prefixes.length;i++){const a=prefixes[i]+n;if(a in e)return prefixCache[t]=a}return t}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(e,t,s,n,i){if(n&&t.startsWith("xlink:"))s==null?e.removeAttributeNS(xlinkNS,t.slice(6,t.length)):e.setAttributeNS(xlinkNS,t,s);else{const a=isSpecialBooleanAttr(t);s==null||a&&!includeBooleanAttr(s)?e.removeAttribute(t):e.setAttribute(t,a?"":s)}}function patchDOMProp(e,t,s,n,i,a,u){if(t==="innerHTML"||t==="textContent"){n&&u(n,i,a),e[t]=s??"";return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=s;const w=s??"";(e.value!==w||e.tagName==="OPTION")&&(e.value=w),s==null&&e.removeAttribute(t);return}let x=!1;if(s===""||s==null){const w=typeof e[t];w==="boolean"?s=includeBooleanAttr(s):s==null&&w==="string"?(s="",x=!0):w==="number"&&(s=0,x=!0)}try{e[t]=s}catch{}x&&e.removeAttribute(t)}function addEventListener(e,t,s,n){e.addEventListener(t,s,n)}function removeEventListener(e,t,s,n){e.removeEventListener(t,s,n)}function patchEvent(e,t,s,n,i=null){const a=e._vei||(e._vei={}),u=a[t];if(n&&u)u.value=n;else{const[x,w]=parseName(t);if(n){const E=a[t]=createInvoker(n,i);addEventListener(e,x,E,w)}else u&&(removeEventListener(e,x,u,w),a[t]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(e){let t;if(optionsModifierRE.test(e)){t={};let n;for(;n=e.match(optionsModifierRE);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):hyphenate(e.slice(2)),t]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(e,t){const s=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=s.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(n,s.value),t,5,[n])};return s.value=e,s.attached=getNow(),s}function patchStopImmediatePropagation(e,t){if(isArray(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const nativeOnRE=/^on[a-z]/,patchProp=(e,t,s,n,i=!1,a,u,x,w)=>{t==="class"?patchClass(e,n,i):t==="style"?patchStyle(e,s,n):isOn(t)?isModelListener(t)||patchEvent(e,t,s,n,u):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):shouldSetAsProp(e,t,n,i))?patchDOMProp(e,t,n,a,u,x,w):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),patchAttr(e,t,n,i))};function shouldSetAsProp(e,t,s,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&nativeOnRE.test(t)&&isFunction$1(s)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||nativeOnRE.test(t)&&isString$1(s)?!1:t in e}const DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String};BaseTransition.props;const getModelAssigner=e=>{const t=e.props["onUpdate:modelValue"]||!1;return isArray(t)?s=>invokeArrayFns(t,s):t};function onCompositionStart(e){e.target.composing=!0}function onCompositionEnd(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const vModelText={created(e,{modifiers:{lazy:t,trim:s,number:n}},i){e._assign=getModelAssigner(i);const a=n||i.props&&i.props.type==="number";addEventListener(e,t?"change":"input",u=>{if(u.target.composing)return;let x=e.value;s&&(x=x.trim()),a&&(x=looseToNumber(x)),e._assign(x)}),s&&addEventListener(e,"change",()=>{e.value=e.value.trim()}),t||(addEventListener(e,"compositionstart",onCompositionStart),addEventListener(e,"compositionend",onCompositionEnd),addEventListener(e,"change",onCompositionEnd))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:s,trim:n,number:i}},a){if(e._assign=getModelAssigner(a),e.composing||document.activeElement===e&&e.type!=="range"&&(s||n&&e.value.trim()===t||(i||e.type==="number")&&looseToNumber(e.value)===t))return;const u=t??"";e.value!==u&&(e.value=u)}},vShow={beforeMount(e,{value:t},{transition:s}){e._vod=e.style.display==="none"?"":e.style.display,s&&t?s.beforeEnter(e):setDisplay(e,t)},mounted(e,{value:t},{transition:s}){s&&t&&s.enter(e)},updated(e,{value:t,oldValue:s},{transition:n}){!t!=!s&&(n?t?(n.beforeEnter(e),setDisplay(e,!0),n.enter(e)):n.leave(e,()=>{setDisplay(e,!1)}):setDisplay(e,t))},beforeUnmount(e,{value:t}){setDisplay(e,t)}};function setDisplay(e,t){e.style.display=t?e._vod:"none"}const rendererOptions=extend({patchProp},nodeOps);let renderer;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}const createApp=(...e)=>{const t=ensureRenderer().createApp(...e),{mount:s}=t;return t.mount=n=>{const i=normalizeContainer(n);if(!i)return;const a=t._component;!isFunction$1(a)&&!a.render&&!a.template&&(a.template=i.innerHTML),i.innerHTML="";const u=s(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),u},t};function normalizeContainer(e){return isString$1(e)?document.querySelector(e):e}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getAugmentedNamespace(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var s=function n(){if(this instanceof n){var i=[null];i.push.apply(i,arguments);var a=Function.bind.apply(t,i);return new a}return t.apply(this,arguments)};s.prototype=t.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(s,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),s}function commonjsRequire(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(t,s){module.exports=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(e,t)=>{var Oe;Object.defineProperty(t,"__esModule",{value:!0}),t.VerbosityLevel=t.Util=t.UnknownErrorException=t.UnexpectedResponseException=t.TextRenderingMode=t.RenderingIntentFlag=t.PromiseCapability=t.PermissionFlag=t.PasswordResponses=t.PasswordException=t.PageActionEventType=t.OPS=t.MissingPDFException=t.MAX_IMAGE_SIZE_TO_CACHE=t.LINE_FACTOR=t.LINE_DESCENT_FACTOR=t.InvalidPDFException=t.ImageKind=t.IDENTITY_MATRIX=t.FormatError=t.FeatureTest=t.FONT_IDENTITY_MATRIX=t.DocumentActionEventType=t.CMapCompressionType=t.BaseException=t.BASELINE_FACTOR=t.AnnotationType=t.AnnotationStateModelType=t.AnnotationReviewState=t.AnnotationReplyType=t.AnnotationMode=t.AnnotationMarkedState=t.AnnotationFlag=t.AnnotationFieldFlag=t.AnnotationEditorType=t.AnnotationEditorPrefix=t.AnnotationEditorParamsType=t.AnnotationBorderStyleType=t.AnnotationActionEventType=t.AbortException=void 0,t.assert=ve,t.bytesToString=A,t.createValidAbsoluteUrl=Se,t.getModificationDate=me,t.getVerbosityLevel=de,t.info=ae,t.isArrayBuffer=he,t.isArrayEqual=be,t.normalizeUnicode=Ee,t.objectFromMap=F,t.objectSize=h,t.setVerbosityLevel=oe,t.shadow=K,t.string32=o,t.stringToBytes=r,t.stringToPDFString=Q,t.stringToUTF8String=ne,t.unreachable=ye,t.utf8StringToString=le,t.warn=pe;const s=[1,0,0,1,0,0];t.IDENTITY_MATRIX=s;const n=[.001,0,0,.001,0,0];t.FONT_IDENTITY_MATRIX=n;const i=1e7;t.MAX_IMAGE_SIZE_TO_CACHE=i;const a=1.35;t.LINE_FACTOR=a;const u=.35;t.LINE_DESCENT_FACTOR=u;const x=u/a;t.BASELINE_FACTOR=x;const w={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};t.RenderingIntentFlag=w;const E={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};t.AnnotationMode=E;const f="pdfjs_internal_editor_";t.AnnotationEditorPrefix=f;const N={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};t.AnnotationEditorType=N;const C={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};t.AnnotationEditorParamsType=C;const I={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};t.PermissionFlag=I;const v={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};t.TextRenderingMode=v;const y={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};t.ImageKind=y;const d={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};t.AnnotationType=d;const T={MARKED:"Marked",REVIEW:"Review"};t.AnnotationStateModelType=T;const D={MARKED:"Marked",UNMARKED:"Unmarked"};t.AnnotationMarkedState=D;const L={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};t.AnnotationReviewState=L;const k={GROUP:"Group",REPLY:"R"};t.AnnotationReplyType=k;const l={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};t.AnnotationFlag=l;const b={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};t.AnnotationFieldFlag=b;const _={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};t.AnnotationBorderStyleType=_;const c={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};t.AnnotationActionEventType=c;const S={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};t.DocumentActionEventType=S;const j={O:"PageOpen",C:"PageClose"};t.PageActionEventType=j;const m={ERRORS:0,WARNINGS:1,INFOS:5};t.VerbosityLevel=m;const V={NONE:0,BINARY:1};t.CMapCompressionType=V;const Y={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};t.OPS=Y;const se={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};t.PasswordResponses=se;let ie=m.WARNINGS;function oe(ue){Number.isInteger(ue)&&(ie=ue)}function de(){return ie}function ae(ue){ie>=m.INFOS&&console.log(`Info: ${ue}`)}function pe(ue){ie>=m.WARNINGS&&console.log(`Warning: ${ue}`)}function ye(ue){throw new Error(ue)}function ve(ue,$){ue||ye($)}function Ce(ue){switch(ue==null?void 0:ue.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function Se(ue,$=null,H=null){if(!ue)return null;try{if(H&&typeof ue=="string"){if(H.addDefaultProtocol&&ue.startsWith("www.")){const _e=ue.match(/\./g);(_e==null?void 0:_e.length)>=2&&(ue=`http://${ue}`)}if(H.tryConvertEncoding)try{ue=ne(ue)}catch{}}const fe=$?new URL(ue,$):new URL(ue);if(Ce(fe))return fe}catch{}return null}function K(ue,$,H,fe=!1){return Object.defineProperty(ue,$,{value:H,enumerable:!fe,configurable:!0,writable:!1}),H}const P=function(){function $(H,fe){this.constructor===$&&ye("Cannot initialize BaseException."),this.message=H,this.name=fe}return $.prototype=new Error,$.constructor=$,$}();t.BaseException=P;class R extends P{constructor($,H){super($,"PasswordException"),this.code=H}}t.PasswordException=R;class B extends P{constructor($,H){super($,"UnknownErrorException"),this.details=H}}t.UnknownErrorException=B;class G extends P{constructor($){super($,"InvalidPDFException")}}t.InvalidPDFException=G;class q extends P{constructor($){super($,"MissingPDFException")}}t.MissingPDFException=q;class J extends P{constructor($,H){super($,"UnexpectedResponseException"),this.status=H}}t.UnexpectedResponseException=J;class z extends P{constructor($){super($,"FormatError")}}t.FormatError=z;class g extends P{constructor($){super($,"AbortException")}}t.AbortException=g;function A(ue){(typeof ue!="object"||(ue==null?void 0:ue.length)===void 0)&&ye("Invalid argument for bytesToString");const $=ue.length,H=8192;if($<H)return String.fromCharCode.apply(null,ue);const fe=[];for(let _e=0;_e<$;_e+=H){const Te=Math.min(_e+H,$),xe=ue.subarray(_e,Te);fe.push(String.fromCharCode.apply(null,xe))}return fe.join("")}function r(ue){typeof ue!="string"&&ye("Invalid argument for stringToBytes");const $=ue.length,H=new Uint8Array($);for(let fe=0;fe<$;++fe)H[fe]=ue.charCodeAt(fe)&255;return H}function o(ue){return String.fromCharCode(ue>>24&255,ue>>16&255,ue>>8&255,ue&255)}function h(ue){return Object.keys(ue).length}function F(ue){const $=Object.create(null);for(const[H,fe]of ue)$[H]=fe;return $}function M(){const ue=new Uint8Array(4);return ue[0]=1,new Uint32Array(ue.buffer,0,1)[0]===1}function U(){try{return new Function(""),!0}catch{return!1}}class X{static get isLittleEndian(){return K(this,"isLittleEndian",M())}static get isEvalSupported(){return K(this,"isEvalSupported",U())}static get isOffscreenCanvasSupported(){return K(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?K(this,"platform",{isWin:!1,isMac:!1}):K(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}}t.FeatureTest=X;const W=[...Array(256).keys()].map(ue=>ue.toString(16).padStart(2,"0"));class Z{static makeHexColor($,H,fe){return`#${W[$]}${W[H]}${W[fe]}`}static scaleMinMax($,H){let fe;$[0]?($[0]<0&&(fe=H[0],H[0]=H[1],H[1]=fe),H[0]*=$[0],H[1]*=$[0],$[3]<0&&(fe=H[2],H[2]=H[3],H[3]=fe),H[2]*=$[3],H[3]*=$[3]):(fe=H[0],H[0]=H[2],H[2]=fe,fe=H[1],H[1]=H[3],H[3]=fe,$[1]<0&&(fe=H[2],H[2]=H[3],H[3]=fe),H[2]*=$[1],H[3]*=$[1],$[2]<0&&(fe=H[0],H[0]=H[1],H[1]=fe),H[0]*=$[2],H[1]*=$[2]),H[0]+=$[4],H[1]+=$[4],H[2]+=$[5],H[3]+=$[5]}static transform($,H){return[$[0]*H[0]+$[2]*H[1],$[1]*H[0]+$[3]*H[1],$[0]*H[2]+$[2]*H[3],$[1]*H[2]+$[3]*H[3],$[0]*H[4]+$[2]*H[5]+$[4],$[1]*H[4]+$[3]*H[5]+$[5]]}static applyTransform($,H){const fe=$[0]*H[0]+$[1]*H[2]+H[4],_e=$[0]*H[1]+$[1]*H[3]+H[5];return[fe,_e]}static applyInverseTransform($,H){const fe=H[0]*H[3]-H[1]*H[2],_e=($[0]*H[3]-$[1]*H[2]+H[2]*H[5]-H[4]*H[3])/fe,Te=(-$[0]*H[1]+$[1]*H[0]+H[4]*H[1]-H[5]*H[0])/fe;return[_e,Te]}static getAxialAlignedBoundingBox($,H){const fe=Z.applyTransform($,H),_e=Z.applyTransform($.slice(2,4),H),Te=Z.applyTransform([$[0],$[3]],H),xe=Z.applyTransform([$[2],$[1]],H);return[Math.min(fe[0],_e[0],Te[0],xe[0]),Math.min(fe[1],_e[1],Te[1],xe[1]),Math.max(fe[0],_e[0],Te[0],xe[0]),Math.max(fe[1],_e[1],Te[1],xe[1])]}static inverseTransform($){const H=$[0]*$[3]-$[1]*$[2];return[$[3]/H,-$[1]/H,-$[2]/H,$[0]/H,($[2]*$[5]-$[4]*$[3])/H,($[4]*$[1]-$[5]*$[0])/H]}static singularValueDecompose2dScale($){const H=[$[0],$[2],$[1],$[3]],fe=$[0]*H[0]+$[1]*H[2],_e=$[0]*H[1]+$[1]*H[3],Te=$[2]*H[0]+$[3]*H[2],xe=$[2]*H[1]+$[3]*H[3],Re=(fe+xe)/2,ke=Math.sqrt((fe+xe)**2-4*(fe*xe-Te*_e))/2,Me=Re+ke||1,Pe=Re-ke||1;return[Math.sqrt(Me),Math.sqrt(Pe)]}static normalizeRect($){const H=$.slice(0);return $[0]>$[2]&&(H[0]=$[2],H[2]=$[0]),$[1]>$[3]&&(H[1]=$[3],H[3]=$[1]),H}static intersect($,H){const fe=Math.max(Math.min($[0],$[2]),Math.min(H[0],H[2])),_e=Math.min(Math.max($[0],$[2]),Math.max(H[0],H[2]));if(fe>_e)return null;const Te=Math.max(Math.min($[1],$[3]),Math.min(H[1],H[3])),xe=Math.min(Math.max($[1],$[3]),Math.max(H[1],H[3]));return Te>xe?null:[fe,Te,_e,xe]}static bezierBoundingBox($,H,fe,_e,Te,xe,Re,ke){const Me=[],Pe=[[],[]];let Ne,Ie,Le,Fe,$e,Ue,He,Ve;for(let Xe=0;Xe<2;++Xe){if(Xe===0?(Ie=6*$-12*fe+6*Te,Ne=-3*$+9*fe-9*Te+3*Re,Le=3*fe-3*$):(Ie=6*H-12*_e+6*xe,Ne=-3*H+9*_e-9*xe+3*ke,Le=3*_e-3*H),Math.abs(Ne)<1e-12){if(Math.abs(Ie)<1e-12)continue;Fe=-Le/Ie,0<Fe&&Fe<1&&Me.push(Fe);continue}He=Ie*Ie-4*Le*Ne,Ve=Math.sqrt(He),!(He<0)&&($e=(-Ie+Ve)/(2*Ne),0<$e&&$e<1&&Me.push($e),Ue=(-Ie-Ve)/(2*Ne),0<Ue&&Ue<1&&Me.push(Ue))}let Be=Me.length,je;const qe=Be;for(;Be--;)Fe=Me[Be],je=1-Fe,Pe[0][Be]=je*je*je*$+3*je*je*Fe*fe+3*je*Fe*Fe*Te+Fe*Fe*Fe*Re,Pe[1][Be]=je*je*je*H+3*je*je*Fe*_e+3*je*Fe*Fe*xe+Fe*Fe*Fe*ke;return Pe[0][qe]=$,Pe[1][qe]=H,Pe[0][qe+1]=Re,Pe[1][qe+1]=ke,Pe[0].length=Pe[1].length=qe+2,[Math.min(...Pe[0]),Math.min(...Pe[1]),Math.max(...Pe[0]),Math.max(...Pe[1])]}}t.Util=Z;const ee=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function Q(ue){if(ue[0]>=""){let H;if(ue[0]===""&&ue[1]===""?H="utf-16be":ue[0]===""&&ue[1]===""?H="utf-16le":ue[0]===""&&ue[1]===""&&ue[2]===""&&(H="utf-8"),H)try{const fe=new TextDecoder(H,{fatal:!0}),_e=r(ue);return fe.decode(_e)}catch(fe){pe(`stringToPDFString: "${fe}".`)}}const $=[];for(let H=0,fe=ue.length;H<fe;H++){const _e=ee[ue.charCodeAt(H)];$.push(_e?String.fromCharCode(_e):ue.charAt(H))}return $.join("")}function ne(ue){return decodeURIComponent(escape(ue))}function le(ue){return unescape(encodeURIComponent(ue))}function he(ue){return typeof ue=="object"&&(ue==null?void 0:ue.byteLength)!==void 0}function be(ue,$){if(ue.length!==$.length)return!1;for(let H=0,fe=ue.length;H<fe;H++)if(ue[H]!==$[H])return!1;return!0}function me(ue=new Date){return[ue.getUTCFullYear().toString(),(ue.getUTCMonth()+1).toString().padStart(2,"0"),ue.getUTCDate().toString().padStart(2,"0"),ue.getUTCHours().toString().padStart(2,"0"),ue.getUTCMinutes().toString().padStart(2,"0"),ue.getUTCSeconds().toString().padStart(2,"0")].join("")}class we{constructor(){re(this,Oe,!1);this.promise=new Promise(($,H)=>{this.resolve=fe=>{ge(this,Oe,!0),$(fe)},this.reject=fe=>{ge(this,Oe,!0),H(fe)}})}get settled(){return O(this,Oe)}}Oe=new WeakMap,t.PromiseCapability=we;let te=null,Ae=null;function Ee(ue){return te||(te=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Ae=new Map([["","t"]])),ue.replaceAll(te,($,H,fe)=>H?H.normalize("NFKC"):Ae.get(fe))}},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var e,s,n,i,Je,u,at,w,E,f,N,C,I,v,y,ft,T,D,pt,k,l;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_is_node=__w_pdfjs_require__(10),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_xfa_text=__w_pdfjs_require__(19);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultFilterFactory=_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:_,NodeCMapReaderFactory:c,NodeFilterFactory:S,NodeStandardFontDataFactory:j}=__w_pdfjs_require__(20);exports.DefaultCanvasFactory=DefaultCanvasFactory=_,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=c,exports.DefaultFilterFactory=DefaultFilterFactory=S,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=j}let createPDFNetworkStream;if(_is_node.isNodeJS){const{PDFNodeStream:_}=__w_pdfjs_require__(21);createPDFNetworkStream=c=>new _(c)}else{const{PDFNetworkStream:_}=__w_pdfjs_require__(24),{PDFFetchStream:c}=__w_pdfjs_require__(25);createPDFNetworkStream=S=>(0,_display_utils.isValidFetchUrl)(S.url)?new c(S):new _(S)}function getDocument(_){if(typeof _=="string"||_ instanceof URL?_={url:_}:(0,_util.isArrayBuffer)(_)&&(_={data:_}),typeof _!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!_.url&&!_.data&&!_.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const c=new PDFDocumentLoadingTask,{docId:S}=c,j=_.url?getUrlProp(_.url):null,m=_.data?getDataProp(_.data):null,V=_.httpHeaders||null,Y=_.withCredentials===!0,se=_.password??null,ie=_.range instanceof PDFDataRangeTransport?_.range:null,oe=Number.isInteger(_.rangeChunkSize)&&_.rangeChunkSize>0?_.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let de=_.worker instanceof PDFWorker?_.worker:null;const ae=_.verbosity,pe=typeof _.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(_.docBaseUrl)?_.docBaseUrl:null,ye=typeof _.cMapUrl=="string"?_.cMapUrl:null,ve=_.cMapPacked!==!1,Ce=_.CMapReaderFactory||DefaultCMapReaderFactory,Se=typeof _.standardFontDataUrl=="string"?_.standardFontDataUrl:null,K=_.StandardFontDataFactory||DefaultStandardFontDataFactory,P=_.stopAtErrors!==!0,R=Number.isInteger(_.maxImageSize)&&_.maxImageSize>-1?_.maxImageSize:-1,B=_.isEvalSupported!==!1,G=typeof _.isOffscreenCanvasSupported=="boolean"?_.isOffscreenCanvasSupported:!_is_node.isNodeJS,q=Number.isInteger(_.canvasMaxAreaInBytes)?_.canvasMaxAreaInBytes:-1,J=typeof _.disableFontFace=="boolean"?_.disableFontFace:_is_node.isNodeJS,z=_.fontExtraProperties===!0,g=_.enableXfa===!0,A=_.ownerDocument||globalThis.document,r=_.disableRange===!0,o=_.disableStream===!0,h=_.disableAutoFetch===!0,F=_.pdfBug===!0,M=ie?ie.length:_.length??NaN,U=typeof _.useSystemFonts=="boolean"?_.useSystemFonts:!_is_node.isNodeJS&&!J,X=typeof _.useWorkerFetch=="boolean"?_.useWorkerFetch:Ce===_display_utils.DOMCMapReaderFactory&&K===_display_utils.DOMStandardFontDataFactory&&(0,_display_utils.isValidFetchUrl)(ye,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(Se,document.baseURI),W=_.canvasFactory||new DefaultCanvasFactory({ownerDocument:A}),Z=_.filterFactory||new DefaultFilterFactory({docId:S,ownerDocument:A}),ee=null;(0,_util.setVerbosityLevel)(ae);const Q={canvasFactory:W,filterFactory:Z};if(X||(Q.cMapReaderFactory=new Ce({baseUrl:ye,isCompressed:ve}),Q.standardFontDataFactory=new K({baseUrl:Se})),!de){const he={verbosity:ae,port:_worker_options.GlobalWorkerOptions.workerPort};de=he.port?PDFWorker.fromPort(he):new PDFWorker(he),c._worker=de}const ne={docId:S,apiVersion:"3.6.172",data:m,password:se,disableAutoFetch:h,rangeChunkSize:oe,length:M,docBaseUrl:pe,enableXfa:g,evaluatorOptions:{maxImageSize:R,disableFontFace:J,ignoreErrors:P,isEvalSupported:B,isOffscreenCanvasSupported:G,canvasMaxAreaInBytes:q,fontExtraProperties:z,useSystemFonts:U,cMapUrl:X?ye:null,standardFontDataUrl:X?Se:null}},le={ignoreErrors:P,isEvalSupported:B,disableFontFace:J,fontExtraProperties:z,enableXfa:g,ownerDocument:A,disableAutoFetch:h,pdfBug:F,styleElement:ee};return de.promise.then(function(){if(c.destroyed)throw new Error("Loading aborted");const he=_fetchDocument(de,ne),be=new Promise(function(me){let we;ie?we=new _transport_stream.PDFDataTransportStream({length:M,initialData:ie.initialData,progressiveDone:ie.progressiveDone,contentDispositionFilename:ie.contentDispositionFilename,disableRange:r,disableStream:o},ie):m||(we=createPDFNetworkStream({url:j,length:M,httpHeaders:V,withCredentials:Y,rangeChunkSize:oe,disableRange:r,disableStream:o})),me(we)});return Promise.all([he,be]).then(function([me,we]){if(c.destroyed)throw new Error("Loading aborted");const te=new _message_handler.MessageHandler(S,me,de.port),Ae=new WorkerTransport(te,c,we,le,Q);c._transport=Ae,te.send("Ready",null)})}).catch(c._capability.reject),c}async function _fetchDocument(_,c){if(_.destroyed)throw new Error("Worker was destroyed");const S=await _.messageHandler.sendWithPromise("GetDocRequest",c,c.data?[c.data.buffer]:null);if(_.destroyed)throw new Error("Worker was destroyed");return S}function getUrlProp(_){if(_ instanceof URL)return _.href;try{return new URL(_,window.location).href}catch{if(_is_node.isNodeJS&&typeof _=="string")return _}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(_){if(_is_node.isNodeJS&&typeof Buffer<"u"&&_ instanceof Buffer)return(0,_display_utils.deprecated)("Please provide binary data as `Uint8Array`, rather than `Buffer`."),new Uint8Array(_);if(_ instanceof Uint8Array&&_.byteLength===_.buffer.byteLength)return _;if(typeof _=="string")return(0,_util.stringToBytes)(_);if(typeof _=="object"&&!isNaN(_==null?void 0:_.length)||(0,_util.isArrayBuffer)(_))return new Uint8Array(_);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const t=class{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${rt(t,e)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var c;this.destroyed=!0,await((c=this._transport)==null?void 0:c.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};let PDFDocumentLoadingTask=t;e=new WeakMap,re(PDFDocumentLoadingTask,e,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(c,S,j=!1,m=null){this.length=c,this.initialData=S,this.progressiveDone=j,this.contentDispositionFilename=m,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(c){this._rangeListeners.push(c)}addProgressListener(c){this._progressListeners.push(c)}addProgressiveReadListener(c){this._progressiveReadListeners.push(c)}addProgressiveDoneListener(c){this._progressiveDoneListeners.push(c)}onDataRange(c,S){for(const j of this._rangeListeners)j(c,S)}onDataProgress(c,S){this._readyCapability.promise.then(()=>{for(const j of this._progressListeners)j(c,S)})}onDataProgressiveRead(c){this._readyCapability.promise.then(()=>{for(const S of this._progressiveReadListeners)S(c)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const c of this._progressiveDoneListeners)c()})}transportReady(){this._readyCapability.resolve()}requestDataRange(c,S){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(c,S){this._pdfInfo=c,this._transport=S}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(c){return this._transport.getPage(c)}getPageIndex(c){return this._transport.getPageIndex(c)}getDestinations(){return this._transport.getDestinations()}getDestination(c){return this._transport.getDestination(c)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(c=!1){return this._transport.startCleanup(c||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(c,S,j,m=!1){re(this,i);re(this,u);re(this,s,null);re(this,n,!1);this._pageIndex=c,this._pageInfo=S,this._transport=j,this._stats=m?new _display_utils.StatTimer:null,this._pdfBug=m,this.commonObjs=j.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:c,rotation:S=this.rotate,offsetX:j=0,offsetY:m=0,dontFlip:V=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:c,rotation:S,offsetX:j,offsetY:m,dontFlip:V})}getAnnotations({intent:c="display"}={}){const S=this._transport.getRenderingIntent(c);return this._transport.getAnnotations(this._pageIndex,S.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var c;return((c=this._transport._htmlForXfa)==null?void 0:c.children[this._pageIndex])||null}render({canvasContext:c,viewport:S,intent:j="display",annotationMode:m=_util.AnnotationMode.ENABLE,transform:V=null,background:Y=null,optionalContentConfigPromise:se=null,annotationCanvasMap:ie=null,pageColors:oe=null,printAnnotationStorage:de=null}){var K,P,R;if((K=arguments[0])!=null&&K.canvasFactory)throw new Error("render no longer accepts the `canvasFactory`-option, please pass it to the `getDocument`-function instead.");(P=this._stats)==null||P.time("Overall");const ae=this._transport.getRenderingIntent(j,m,de);ge(this,n,!1),ce(this,u,at).call(this),se||(se=this._transport.getOptionalContentConfig());let pe=this._intentStates.get(ae.cacheKey);pe||(pe=Object.create(null),this._intentStates.set(ae.cacheKey,pe)),pe.streamReaderCancelTimeout&&(clearTimeout(pe.streamReaderCancelTimeout),pe.streamReaderCancelTimeout=null);const ye=!!(ae.renderingIntent&_util.RenderingIntentFlag.PRINT);pe.displayReadyCapability||(pe.displayReadyCapability=new _util.PromiseCapability,pe.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(R=this._stats)==null||R.time("Page Request"),this._pumpOperatorList(ae));const ve=B=>{var G,q;pe.renderTasks.delete(Ce),(this._maybeCleanupAfterRender||ye)&&ge(this,n,!0),ce(this,i,Je).call(this,!ye),B?(Ce.capability.reject(B),this._abortOperatorList({intentState:pe,reason:B instanceof Error?B:new Error(B)})):Ce.capability.resolve(),(G=this._stats)==null||G.timeEnd("Rendering"),(q=this._stats)==null||q.timeEnd("Overall")},Ce=new InternalRenderTask({callback:ve,params:{canvasContext:c,viewport:S,transform:V,background:Y},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:ie,operatorList:pe.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!ye,pdfBug:this._pdfBug,pageColors:oe});(pe.renderTasks||(pe.renderTasks=new Set)).add(Ce);const Se=Ce.task;return Promise.all([pe.displayReadyCapability.promise,se]).then(([B,G])=>{var q;if(O(this,n)){ve();return}(q=this._stats)==null||q.time("Rendering"),Ce.initializeGraphics({transparency:B,optionalContentConfig:G}),Ce.operatorListChanged()}).catch(ve),Se}getOperatorList({intent:c="display",annotationMode:S=_util.AnnotationMode.ENABLE,printAnnotationStorage:j=null}={}){var ie;function m(){Y.operatorList.lastChunk&&(Y.opListReadCapability.resolve(Y.operatorList),Y.renderTasks.delete(se))}const V=this._transport.getRenderingIntent(c,S,j,!0);let Y=this._intentStates.get(V.cacheKey);Y||(Y=Object.create(null),this._intentStates.set(V.cacheKey,Y));let se;return Y.opListReadCapability||(se=Object.create(null),se.operatorListChanged=m,Y.opListReadCapability=new _util.PromiseCapability,(Y.renderTasks||(Y.renderTasks=new Set)).add(se),Y.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(ie=this._stats)==null||ie.time("Page Request"),this._pumpOperatorList(V)),Y.opListReadCapability.promise}streamTextContent({includeMarkedContent:c=!1,disableNormalization:S=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:c===!0,disableNormalization:S===!0},{highWaterMark:100,size(m){return m.items.length}})}getTextContent(c={}){if(this._transport._htmlForXfa)return this.getXfa().then(j=>_xfa_text.XfaText.textContent(j));const S=this.streamTextContent(c);return new Promise(function(j,m){function V(){Y.read().then(function({value:ie,done:oe}){if(oe){j(se);return}Object.assign(se.styles,ie.styles),se.items.push(...ie.items),V()},m)}const Y=S.getReader(),se={items:[],styles:Object.create(null)};V()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const c=[];for(const S of this._intentStates.values())if(this._abortOperatorList({intentState:S,reason:new Error("Page was destroyed."),force:!0}),!S.opListReadCapability)for(const j of S.renderTasks)c.push(j.completed),j.cancel();return this.objs.clear(),ge(this,n,!1),ce(this,u,at).call(this),Promise.all(c)}cleanup(c=!1){ge(this,n,!0);const S=ce(this,i,Je).call(this,!1);return c&&S&&this._stats&&(this._stats=new _display_utils.StatTimer),S}_startRenderPage(c,S){var m,V;const j=this._intentStates.get(S);j&&((m=this._stats)==null||m.timeEnd("Page Request"),(V=j.displayReadyCapability)==null||V.resolve(c))}_renderPageChunk(c,S){for(let j=0,m=c.length;j<m;j++)S.operatorList.fnArray.push(c.fnArray[j]),S.operatorList.argsArray.push(c.argsArray[j]);S.operatorList.lastChunk=c.lastChunk,S.operatorList.separateAnnots=c.separateAnnots;for(const j of S.renderTasks)j.operatorListChanged();c.lastChunk&&ce(this,i,Je).call(this,!0)}_pumpOperatorList({renderingIntent:c,cacheKey:S,annotationStorageMap:j}){const V=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:c,cacheKey:S,annotationStorage:j}).getReader(),Y=this._intentStates.get(S);Y.streamReader=V;const se=()=>{V.read().then(({value:ie,done:oe})=>{if(oe){Y.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(ie,Y),se())},ie=>{if(Y.streamReader=null,!this._transport.destroyed){if(Y.operatorList){Y.operatorList.lastChunk=!0;for(const oe of Y.renderTasks)oe.operatorListChanged();ce(this,i,Je).call(this,!0)}if(Y.displayReadyCapability)Y.displayReadyCapability.reject(ie);else if(Y.opListReadCapability)Y.opListReadCapability.reject(ie);else throw ie}})};se()}_abortOperatorList({intentState:c,reason:S,force:j=!1}){if(c.streamReader){if(c.streamReaderCancelTimeout&&(clearTimeout(c.streamReaderCancelTimeout),c.streamReaderCancelTimeout=null),!j){if(c.renderTasks.size>0)return;if(S instanceof _display_utils.RenderingCancelledException){let m=RENDERING_CANCELLED_TIMEOUT;S.extraDelay>0&&S.extraDelay<1e3&&(m+=S.extraDelay),c.streamReaderCancelTimeout=setTimeout(()=>{c.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:c,reason:S,force:!0})},m);return}}if(c.streamReader.cancel(new _util.AbortException(S.message)).catch(()=>{}),c.streamReader=null,!this._transport.destroyed){for(const[m,V]of this._intentStates)if(V===c){this._intentStates.delete(m);break}this.cleanup()}}}get stats(){return this._stats}}s=new WeakMap,n=new WeakMap,i=new WeakSet,Je=function(c=!1){if(ce(this,u,at).call(this),!O(this,n))return!1;if(c)return ge(this,s,setTimeout(()=>{ge(this,s,null),ce(this,i,Je).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:S,operatorList:j}of this._intentStates.values())if(S.size>0||!j.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),ge(this,n,!1),!0},u=new WeakSet,at=function(){O(this,s)&&(clearTimeout(O(this,s)),ge(this,s,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){re(this,w,new Set);re(this,E,Promise.resolve())}postMessage(c,S){const j={data:structuredClone(c,S?{transfer:S}:null)};O(this,E).then(()=>{for(const m of O(this,w))m.call(this,j)})}addEventListener(c,S){O(this,w).add(S)}removeEventListener(c,S){O(this,w).delete(S)}terminate(){O(this,w).clear()}}w=new WeakMap,E=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const _=(f=document==null?void 0:document.currentScript)==null?void 0:f.src;_&&(PDFWorkerUtil.fallbackWorkerSrc=_.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(_,c){let S;try{if(S=new URL(_),!S.origin||S.origin==="null")return!1}catch{return!1}const j=new URL(c,S);return S.origin===j.origin},PDFWorkerUtil.createCDNWrapper=function(_){const c=`importScripts("${_}");`;return URL.createObjectURL(new Blob([c]))}}const _PDFWorker=class{constructor({name:_=null,port:c=null,verbosity:S=(0,_util.getVerbosityLevel)()}={}){if(c&&O(_PDFWorker,N).has(c))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=_,this.destroyed=!1,this.verbosity=S,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,c){O(_PDFWorker,N).set(c,this),this._initializeFromPort(c);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(_){this._port=_,this._messageHandler=new _message_handler.MessageHandler("main","worker",_),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:_}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,_)||(_=PDFWorkerUtil.createCDNWrapper(new URL(_,window.location).href));const c=new Worker(_),S=new _message_handler.MessageHandler("main","worker",c),j=()=>{c.removeEventListener("error",m),S.destroy(),c.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},m=()=>{this._webWorker||j()};c.addEventListener("error",m),S.on("test",Y=>{if(c.removeEventListener("error",m),this.destroyed){j();return}Y?(this._messageHandler=S,this._port=c,this._webWorker=c,this._readyCapability.resolve(),S.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),S.destroy(),c.terminate())}),S.on("ready",Y=>{if(c.removeEventListener("error",m),this.destroyed){j();return}try{V()}catch{this._setupFakeWorker()}});const V=()=>{const Y=new Uint8Array;S.send("test",Y,[Y.buffer])};V();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(_=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const c=new LoopbackPort;this._port=c;const S=`fake${PDFWorkerUtil.fakeWorkerId++}`,j=new _message_handler.MessageHandler(S+"_worker",S,c);_.setup(j,c);const m=new _message_handler.MessageHandler(S,S+"_worker",c);this._messageHandler=m,this._readyCapability.resolve(),m.send("configure",{verbosity:this.verbosity})}).catch(_=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${_.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),O(_PDFWorker,N).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(_){if(!(_!=null&&_.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return O(this,N).has(_.port)?O(this,N).get(_.port):new _PDFWorker(_)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var _;try{return((_=globalThis.pdfjsWorker)==null?void 0:_.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;N=new WeakMap,re(PDFWorker,N,new WeakMap),exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(c,S,j,m,V){re(this,y);re(this,C,new Map);re(this,I,new Map);re(this,v,new Map);this.messageHandler=c,this.loadingTask=S,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:m.ownerDocument,styleElement:m.styleElement}),this._params=m,this.canvasFactory=V.canvasFactory,this.filterFactory=V.filterFactory,this.cMapReaderFactory=V.cMapReaderFactory,this.standardFontDataFactory=V.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=j,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(c,S=_util.AnnotationMode.ENABLE,j=null,m=!1){let V=_util.RenderingIntentFlag.DISPLAY,Y=null;switch(c){case"any":V=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":V=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${c}`)}switch(S){case _util.AnnotationMode.DISABLE:V+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:V+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:V+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,Y=(V&_util.RenderingIntentFlag.PRINT&&j instanceof _annotation_storage.PrintAnnotationStorage?j:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${S}`)}return m&&(V+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:V,cacheKey:`${V}_${_annotation_storage.AnnotationStorage.getHash(Y)}`,annotationStorageMap:Y}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const c=[];for(const j of O(this,I).values())c.push(j._destroy());O(this,I).clear(),O(this,v).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const S=this.messageHandler.sendWithPromise("Terminate",null);return c.push(S),Promise.all(c).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),O(this,C).clear(),this.filterFactory.destroy(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:c,loadingTask:S}=this;c.on("GetReader",(j,m)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=V=>{this._lastProgress={loaded:V.loaded,total:V.total}},m.onPull=()=>{this._fullReader.read().then(function({value:V,done:Y}){if(Y){m.close();return}(0,_util.assert)(V instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),m.enqueue(new Uint8Array(V),1,[V])}).catch(V=>{m.error(V)})},m.onCancel=V=>{this._fullReader.cancel(V),m.ready.catch(Y=>{if(!this.destroyed)throw Y})}}),c.on("ReaderHeadersReady",j=>{const m=new _util.PromiseCapability,V=this._fullReader;return V.headersReady.then(()=>{var Y;(!V.isStreamingSupported||!V.isRangeSupported)&&(this._lastProgress&&((Y=S.onProgress)==null||Y.call(S,this._lastProgress)),V.onProgress=se=>{var ie;(ie=S.onProgress)==null||ie.call(S,{loaded:se.loaded,total:se.total})}),m.resolve({isStreamingSupported:V.isStreamingSupported,isRangeSupported:V.isRangeSupported,contentLength:V.contentLength})},m.reject),m.promise}),c.on("GetRangeReader",(j,m)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const V=this._networkStream.getRangeReader(j.begin,j.end);if(!V){m.close();return}m.onPull=()=>{V.read().then(function({value:Y,done:se}){if(se){m.close();return}(0,_util.assert)(Y instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),m.enqueue(new Uint8Array(Y),1,[Y])}).catch(Y=>{m.error(Y)})},m.onCancel=Y=>{V.cancel(Y),m.ready.catch(se=>{if(!this.destroyed)throw se})}}),c.on("GetDoc",({pdfInfo:j})=>{this._numPages=j.numPages,this._htmlForXfa=j.htmlForXfa,delete j.htmlForXfa,S._capability.resolve(new PDFDocumentProxy(j,this))}),c.on("DocException",function(j){let m;switch(j.name){case"PasswordException":m=new _util.PasswordException(j.message,j.code);break;case"InvalidPDFException":m=new _util.InvalidPDFException(j.message);break;case"MissingPDFException":m=new _util.MissingPDFException(j.message);break;case"UnexpectedResponseException":m=new _util.UnexpectedResponseException(j.message,j.status);break;case"UnknownErrorException":m=new _util.UnknownErrorException(j.message,j.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}S._capability.reject(m)}),c.on("PasswordRequest",j=>{if(this._passwordCapability=new _util.PromiseCapability,S.onPassword){const m=V=>{V instanceof Error?this._passwordCapability.reject(V):this._passwordCapability.resolve({password:V})};try{S.onPassword(m,j.code)}catch(V){this._passwordCapability.reject(V)}}else this._passwordCapability.reject(new _util.PasswordException(j.message,j.code));return this._passwordCapability.promise}),c.on("DataLoaded",j=>{var m;(m=S.onProgress)==null||m.call(S,{loaded:j.length,total:j.length}),this.downloadInfoCapability.resolve(j)}),c.on("StartRenderPage",j=>{if(this.destroyed)return;O(this,I).get(j.pageIndex)._startRenderPage(j.transparency,j.cacheKey)}),c.on("commonobj",([j,m,V])=>{var Y;if(!this.destroyed&&!this.commonObjs.has(j))switch(m){case"Font":const se=this._params;if("error"in V){const de=V.error;(0,_util.warn)(`Error during font loading: ${de}`),this.commonObjs.resolve(j,de);break}const ie=se.pdfBug&&((Y=globalThis.FontInspector)!=null&&Y.enabled)?(de,ae)=>globalThis.FontInspector.fontAdded(de,ae):null,oe=new _font_loader.FontFaceObject(V,{isEvalSupported:se.isEvalSupported,disableFontFace:se.disableFontFace,ignoreErrors:se.ignoreErrors,inspectFont:ie});this.fontLoader.bind(oe).catch(de=>c.sendWithPromise("FontFallback",{id:j})).finally(()=>{!se.fontExtraProperties&&oe.data&&(oe.data=null),this.commonObjs.resolve(j,oe)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(j,V);break;default:throw new Error(`Got unknown common object type ${m}`)}}),c.on("obj",([j,m,V,Y])=>{var ie;if(this.destroyed)return;const se=O(this,I).get(m);if(!se.objs.has(j))switch(V){case"Image":if(se.objs.resolve(j,Y),Y){let oe;if(Y.bitmap){const{width:de,height:ae}=Y;oe=de*ae*4}else oe=((ie=Y.data)==null?void 0:ie.length)||0;oe>_util.MAX_IMAGE_SIZE_TO_CACHE&&(se._maybeCleanupAfterRender=!0)}break;case"Pattern":se.objs.resolve(j,Y);break;default:throw new Error(`Got unknown object type ${V}`)}}),c.on("DocProgress",j=>{var m;this.destroyed||(m=S.onProgress)==null||m.call(S,{loaded:j.loaded,total:j.total})}),c.on("FetchBuiltInCMap",j=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(j):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),c.on("FetchStandardFontData",j=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(j):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var c;return this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((c=this._fullReader)==null?void 0:c.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getPage(c){if(!Number.isInteger(c)||c<=0||c>this._numPages)return Promise.reject(new Error("Invalid page request."));const S=c-1,j=O(this,v).get(S);if(j)return j;const m=this.messageHandler.sendWithPromise("GetPage",{pageIndex:S}).then(V=>{if(this.destroyed)throw new Error("Transport destroyed");const Y=new PDFPageProxy(S,V,this,this._params.pdfBug);return O(this,I).set(S,Y),Y});return O(this,v).set(S,m),m}getPageIndex(c){return typeof c!="object"||c===null||!Number.isInteger(c.num)||c.num<0||!Number.isInteger(c.gen)||c.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:c.num,gen:c.gen})}getAnnotations(c,S){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:c,intent:S})}getFieldObjects(){return ce(this,y,ft).call(this,"GetFieldObjects")}hasJSActions(){return ce(this,y,ft).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(c){return typeof c!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:c})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(c){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:c})}getStructTree(c){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:c})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(c=>new _optional_content_config.OptionalContentConfig(c))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const c="GetMetadata",S=O(this,C).get(c);if(S)return S;const j=this.messageHandler.sendWithPromise(c,null).then(m=>{var V,Y;return{info:m[0],metadata:m[1]?new _metadata.Metadata(m[1]):null,contentDispositionFilename:((V=this._fullReader)==null?void 0:V.filename)??null,contentLength:((Y=this._fullReader)==null?void 0:Y.contentLength)??null}});return O(this,C).set(c,j),j}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(c=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const S of O(this,I).values())if(!S.cleanup())throw new Error(`startCleanup: Page ${S.pageNumber} is currently rendering.`);this.commonObjs.clear(),c||this.fontLoader.clear(),O(this,C).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:c,enableXfa:S}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:c,enableXfa:S})}}C=new WeakMap,I=new WeakMap,v=new WeakMap,y=new WeakSet,ft=function(c,S=null){const j=O(this,C).get(c);if(j)return j;const m=this.messageHandler.sendWithPromise(c,S);return O(this,C).set(c,m),m};class PDFObjects{constructor(){re(this,D);re(this,T,Object.create(null))}get(c,S=null){if(S){const m=ce(this,D,pt).call(this,c);return m.capability.promise.then(()=>S(m.data)),null}const j=O(this,T)[c];if(!(j!=null&&j.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${c}.`);return j.data}has(c){const S=O(this,T)[c];return(S==null?void 0:S.capability.settled)||!1}resolve(c,S=null){const j=ce(this,D,pt).call(this,c);j.data=S,j.capability.resolve()}clear(){var c;for(const S in O(this,T)){const{data:j}=O(this,T)[S];(c=j==null?void 0:j.bitmap)==null||c.close()}ge(this,T,Object.create(null))}}T=new WeakMap,D=new WeakSet,pt=function(c){const S=O(this,T)[c];return S||(O(this,T)[c]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(c){re(this,k,null);ge(this,k,c),this.onContinue=null}get promise(){return O(this,k).capability.promise}cancel(c=0){O(this,k).cancel(null,c)}get separateAnnots(){const{separateAnnots:c}=O(this,k).operatorList;if(!c)return!1;const{annotationCanvasMap:S}=O(this,k);return c.form||c.canvas&&(S==null?void 0:S.size)>0}}k=new WeakMap,exports.RenderTask=RenderTask;const b=class{constructor({callback:c,params:S,objs:j,commonObjs:m,annotationCanvasMap:V,operatorList:Y,pageIndex:se,canvasFactory:ie,filterFactory:oe,useRequestAnimationFrame:de=!1,pdfBug:ae=!1,pageColors:pe=null}){this.callback=c,this.params=S,this.objs=j,this.commonObjs=m,this.annotationCanvasMap=V,this.operatorListIdx=null,this.operatorList=Y,this._pageIndex=se,this.canvasFactory=ie,this.filterFactory=oe,this._pdfBug=ae,this.pageColors=pe,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=de===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=S.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:c=!1,optionalContentConfig:S}){var se,ie;if(this.cancelled)return;if(this._canvas){if(O(b,l).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");O(b,l).add(this._canvas)}this._pdfBug&&((se=globalThis.StepperManager)!=null&&se.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:j,viewport:m,transform:V,background:Y}=this.params;this.gfx=new _canvas.CanvasGraphics(j,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:S},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:V,viewport:m,transparency:c,background:Y}),this.operatorListIdx=0,this.graphicsReady=!0,(ie=this.graphicsReadyCallback)==null||ie.call(this)}cancel(c=null,S=0){var j;this.running=!1,this.cancelled=!0,(j=this.gfx)==null||j.endDrawing(),this._canvas&&O(b,l).delete(this._canvas),this.callback(c||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas",S))}operatorListChanged(){var c;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(c=this.stepper)==null||c.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(this.pageColors),this._canvas&&O(b,l).delete(this._canvas),this.callback())))}};let InternalRenderTask=b;l=new WeakMap,re(InternalRenderTask,l,new WeakSet);const version="3.6.172";exports.version=version;const build="4d3dfe254";exports.build=build},(e,t,s)=>{var w,E,f,Dt,C;Object.defineProperty(t,"__esModule",{value:!0}),t.PrintAnnotationStorage=t.AnnotationStorage=void 0;var n=s(1),i=s(4),a=s(8);class u{constructor(){re(this,f);re(this,w,!1);re(this,E,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(v,y){const d=O(this,E).get(v);return d===void 0?y:Object.assign(y,d)}getRawValue(v){return O(this,E).get(v)}remove(v){if(O(this,E).delete(v),O(this,E).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const y of O(this,E).values())if(y instanceof i.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(v,y){const d=O(this,E).get(v);let T=!1;if(d!==void 0)for(const[D,L]of Object.entries(y))d[D]!==L&&(T=!0,d[D]=L);else T=!0,O(this,E).set(v,y);T&&ce(this,f,Dt).call(this),y instanceof i.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(y.constructor._type)}has(v){return O(this,E).has(v)}getAll(){return O(this,E).size>0?(0,n.objectFromMap)(O(this,E)):null}setAll(v){for(const[y,d]of Object.entries(v))this.setValue(y,d)}get size(){return O(this,E).size}resetModified(){O(this,w)&&(ge(this,w,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new x(this)}get serializable(){if(O(this,E).size===0)return null;const v=new Map;for(const[y,d]of O(this,E)){const T=d instanceof i.AnnotationEditor?d.serialize():d;T&&v.set(y,T)}return v}static getHash(v){if(!v)return"";const y=new a.MurmurHash3_64;for(const[d,T]of v)y.update(`${d}:${JSON.stringify(T)}`);return y.hexdigest()}}w=new WeakMap,E=new WeakMap,f=new WeakSet,Dt=function(){O(this,w)||(ge(this,w,!0),typeof this.onSetModified=="function"&&this.onSetModified())},t.AnnotationStorage=u;class x extends u{constructor(y){super();re(this,C,null);ge(this,C,structuredClone(y.serializable))}get print(){(0,n.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return O(this,C)}}C=new WeakMap,t.PrintAnnotationStorage=x},(e,t,s)=>{var u,x,w,E,f,N;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditor=void 0;var n=s(5),i=s(1);const C=class{constructor(v){re(this,u,this.focusin.bind(this));re(this,x,this.focusout.bind(this));re(this,w,!1);re(this,E,!1);re(this,f,!1);De(this,"_uiManager",null);re(this,N,C._zIndex++);this.constructor===C&&(0,i.unreachable)("Cannot initialize AnnotationEditor."),this.parent=v.parent,this.id=v.id,this.width=this.height=null,this.pageIndex=v.parent.pageIndex,this.name=v.name,this.div=null,this._uiManager=v.uiManager;const{rotation:y,rawDims:{pageWidth:d,pageHeight:T,pageX:D,pageY:L}}=this.parent.viewport;this.rotation=y,this.pageRotation=(360+y-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[d,T],this.pageTranslation=[D,L];const[k,l]=this.parentDimensions;this.x=v.x/k,this.y=v.y/l,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,i.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}addCommands(v){this._uiManager.addCommands(v)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=O(this,N)}setParent(v){v!==null&&(this.pageIndex=v.pageIndex,this.pageDimensions=v.pageDimensions),this.parent=v}focusin(v){O(this,w)?ge(this,w,!1):this.parent.setSelected(this)}focusout(v){var d;if(!this.isAttachedToDOM)return;const y=v.relatedTarget;y!=null&&y.closest(`#${this.id}`)||(v.preventDefault(),(d=this.parent)!=null&&d.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}dragstart(v){const y=this.parent.div.getBoundingClientRect();this.startX=v.clientX-y.x,this.startY=v.clientY-y.y,v.dataTransfer.setData("text/plain",this.id),v.dataTransfer.effectAllowed="move"}setAt(v,y,d,T){const[D,L]=this.parentDimensions;[d,T]=this.screenToPageTranslation(d,T),this.x=(v+d)/D,this.y=(y+T)/L,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(v,y){const[d,T]=this.parentDimensions;[v,y]=this.screenToPageTranslation(v,y),this.x+=v/d,this.y+=y/T,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(v,y){switch(this.parentRotation){case 90:return[y,-v];case 180:return[-v,-y];case 270:return[-y,v];default:return[v,y]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{realScale:v}=this._uiManager.viewParameters,[y,d]=this.pageDimensions;return[y*v,d*v]}setDims(v,y){const[d,T]=this.parentDimensions;this.div.style.width=`${100*v/d}%`,this.div.style.height=`${100*y/T}%`}fixDims(){const{style:v}=this.div,{height:y,width:d}=v,T=d.endsWith("%"),D=y.endsWith("%");if(T&&D)return;const[L,k]=this.parentDimensions;T||(v.width=`${100*parseFloat(d)/L}%`),D||(v.height=`${100*parseFloat(y)/k}%`)}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",O(this,u)),this.div.addEventListener("focusout",O(this,x));const[v,y]=this.getInitialTranslation();return this.translate(v,y),(0,n.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(v){const{isMac:y}=i.FeatureTest.platform;if(v.button!==0||v.ctrlKey&&y){v.preventDefault();return}v.ctrlKey&&!y||v.shiftKey||v.metaKey&&y?this.parent.toggleSelected(this):this.parent.setSelected(this),ge(this,w,!0)}getRect(v,y){const d=this.parentScale,[T,D]=this.pageDimensions,[L,k]=this.pageTranslation,l=v/d,b=y/d,_=this.x*T,c=this.y*D,S=this.width*T,j=this.height*D;switch(this.rotation){case 0:return[_+l+L,D-c-b-j+k,_+l+S+L,D-c-b+k];case 90:return[_+b+L,D-c+l+k,_+b+j+L,D-c+l+S+k];case 180:return[_-l-S+L,D-c+b+k,_-l+L,D-c+b+j+k];case 270:return[_-b-j+L,D-c-l-S+k,_-b+L,D-c-l+k];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(v,y){const[d,T,D,L]=v,k=D-d,l=L-T;switch(this.rotation){case 0:return[d,y-L,k,l];case 90:return[d,y-T,l,k];case 180:return[D,y-T,k,l];case 270:return[D,y-L,l,k];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){ge(this,f,!0)}disableEditMode(){ge(this,f,!1)}isInEditMode(){return O(this,f)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var v;(v=this.div)==null||v.addEventListener("focusin",O(this,u))}serialize(){(0,i.unreachable)("An editor must be serializable")}static deserialize(v,y,d){const T=new this.prototype.constructor({parent:y,id:y.getNextId(),uiManager:d});T.rotation=v.rotation;const[D,L]=T.pageDimensions,[k,l,b,_]=T.getRectInCurrentCoords(v.rect,L);return T.x=k/D,T.y=l/L,T.width=b/D,T.height=_/L,T}remove(){this.div.removeEventListener("focusin",O(this,u)),this.div.removeEventListener("focusout",O(this,x)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var v;(v=this.div)==null||v.classList.add("selectedEditor")}unselect(){var v;(v=this.div)==null||v.classList.remove("selectedEditor")}updateParams(v,y){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return O(this,E)}set isEditing(v){ge(this,E,v),v?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};let a=C;u=new WeakMap,x=new WeakMap,w=new WeakMap,E=new WeakMap,f=new WeakMap,N=new WeakMap,De(a,"_colorManager",new n.ColorManager),De(a,"_zIndex",1),t.AnnotationEditor=a},(e,t,s)=>{var C,I,v,y,d,T,Lt,k,l,b,_,c,S,j,m,V,Y,se,ie,oe,de,ae,pe,ye,ve,Ce,Se,K,P,R,B,Nt,q,gt,z,Bt,A,jt,o,We,F,tt,U,$t,W,Ut,ee,mt,ne,nt,he,_t;Object.defineProperty(t,"__esModule",{value:!0}),t.KeyboardManager=t.CommandManager=t.ColorManager=t.AnnotationEditorUIManager=void 0,t.bindEvents=a,t.opacityToHex=u;var n=s(1),i=s(6);function a(we,te,Ae){for(const Ee of Ae)te.addEventListener(Ee,we[Ee].bind(we))}function u(we){return Math.round(Math.min(255,Math.max(1,255*we))).toString(16).padStart(2,"0")}class x{constructor(){re(this,C,0)}getId(){return`${n.AnnotationEditorPrefix}${rt(this,C)._++}`}}C=new WeakMap;class w{constructor(te=128){re(this,I,[]);re(this,v,!1);re(this,y,void 0);re(this,d,-1);ge(this,y,te)}add({cmd:te,undo:Ae,mustExec:Ee,type:Oe=NaN,overwriteIfSameType:ue=!1,keepUndo:$=!1}){if(Ee&&te(),O(this,v))return;const H={cmd:te,undo:Ae,type:Oe};if(O(this,d)===-1){O(this,I).length>0&&(O(this,I).length=0),ge(this,d,0),O(this,I).push(H);return}if(ue&&O(this,I)[O(this,d)].type===Oe){$&&(H.undo=O(this,I)[O(this,d)].undo),O(this,I)[O(this,d)]=H;return}const fe=O(this,d)+1;fe===O(this,y)?O(this,I).splice(0,1):(ge(this,d,fe),fe<O(this,I).length&&O(this,I).splice(fe)),O(this,I).push(H)}undo(){O(this,d)!==-1&&(ge(this,v,!0),O(this,I)[O(this,d)].undo(),ge(this,v,!1),ge(this,d,O(this,d)-1))}redo(){O(this,d)<O(this,I).length-1&&(ge(this,d,O(this,d)+1),ge(this,v,!0),O(this,I)[O(this,d)].cmd(),ge(this,v,!1))}hasSomethingToUndo(){return O(this,d)!==-1}hasSomethingToRedo(){return O(this,d)<O(this,I).length-1}destroy(){ge(this,I,null)}}I=new WeakMap,v=new WeakMap,y=new WeakMap,d=new WeakMap,t.CommandManager=w;class E{constructor(te){re(this,T);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Ae}=n.FeatureTest.platform;for(const[Ee,Oe]of te)for(const ue of Ee){const $=ue.startsWith("mac+");Ae&&$?(this.callbacks.set(ue.slice(4),Oe),this.allKeys.add(ue.split("+").at(-1))):!Ae&&!$&&(this.callbacks.set(ue,Oe),this.allKeys.add(ue.split("+").at(-1)))}}exec(te,Ae){if(!this.allKeys.has(Ae.key))return;const Ee=this.callbacks.get(ce(this,T,Lt).call(this,Ae));Ee&&(Ee.bind(te)(),Ae.stopPropagation(),Ae.preventDefault())}}T=new WeakSet,Lt=function(te){te.altKey&&this.buffer.push("alt"),te.ctrlKey&&this.buffer.push("ctrl"),te.metaKey&&this.buffer.push("meta"),te.shiftKey&&this.buffer.push("shift"),this.buffer.push(te.key);const Ae=this.buffer.join("+");return this.buffer.length=0,Ae},t.KeyboardManager=E;const L=class{get _colors(){const te=new Map([["CanvasText",null],["Canvas",null]]);return(0,i.getColorValues)(te),(0,n.shadow)(this,"_colors",te)}convert(te){const Ae=(0,i.getRGB)(te);if(!window.matchMedia("(forced-colors: active)").matches)return Ae;for(const[Ee,Oe]of this._colors)if(Oe.every((ue,$)=>ue===Ae[$]))return L._colorsMapping.get(Ee);return Ae}getHexCode(te){const Ae=this._colors.get(te);return Ae?n.Util.makeHexColor(...Ae):te}};let f=L;De(f,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]])),t.ColorManager=f;const me=class{constructor(te,Ae,Ee){re(this,B);re(this,q);re(this,z);re(this,A);re(this,o);re(this,F);re(this,U);re(this,W);re(this,ee);re(this,ne);re(this,he);re(this,k,null);re(this,l,new Map);re(this,b,new Map);re(this,_,null);re(this,c,new w);re(this,S,0);re(this,j,null);re(this,m,new Set);re(this,V,null);re(this,Y,new x);re(this,se,!1);re(this,ie,n.AnnotationEditorType.NONE);re(this,oe,new Set);re(this,de,this.copy.bind(this));re(this,ae,this.cut.bind(this));re(this,pe,this.paste.bind(this));re(this,ye,this.keydown.bind(this));re(this,ve,this.onEditingAction.bind(this));re(this,Ce,this.onPageChanging.bind(this));re(this,Se,this.onScaleChanging.bind(this));re(this,K,this.onRotationChanging.bind(this));re(this,P,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});re(this,R,null);ge(this,R,te),ge(this,V,Ae),O(this,V)._on("editingaction",O(this,ve)),O(this,V)._on("pagechanging",O(this,Ce)),O(this,V)._on("scalechanging",O(this,Se)),O(this,V)._on("rotationchanging",O(this,K)),ge(this,_,Ee),this.viewParameters={realScale:i.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){ce(this,q,gt).call(this),O(this,V)._off("editingaction",O(this,ve)),O(this,V)._off("pagechanging",O(this,Ce)),O(this,V)._off("scalechanging",O(this,Se)),O(this,V)._off("rotationchanging",O(this,K));for(const te of O(this,b).values())te.destroy();O(this,b).clear(),O(this,l).clear(),O(this,m).clear(),ge(this,k,null),O(this,oe).clear(),O(this,c).destroy()}onPageChanging({pageNumber:te}){ge(this,S,te-1)}focusMainContainer(){O(this,R).focus()}addShouldRescale(te){O(this,m).add(te)}removeShouldRescale(te){O(this,m).delete(te)}onScaleChanging({scale:te}){this.commitOrRemove(),this.viewParameters.realScale=te*i.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Ae of O(this,m))Ae.onScaleChanging()}onRotationChanging({pagesRotation:te}){this.commitOrRemove(),this.viewParameters.rotation=te}addToAnnotationStorage(te){!te.isEmpty()&&O(this,_)&&!O(this,_).has(te.id)&&O(this,_).setValue(te.id,te)}copy(te){if(te.preventDefault(),O(this,k)&&O(this,k).commitOrRemove(),!this.hasSelection)return;const Ae=[];for(const Ee of O(this,oe))Ee.isEmpty()||Ae.push(Ee.serialize());Ae.length!==0&&te.clipboardData.setData("application/pdfjs",JSON.stringify(Ae))}cut(te){this.copy(te),this.delete()}paste(te){te.preventDefault();let Ae=te.clipboardData.getData("application/pdfjs");if(!Ae)return;try{Ae=JSON.parse(Ae)}catch(Oe){(0,n.warn)(`paste: "${Oe.message}".`);return}if(!Array.isArray(Ae))return;this.unselectAll();const Ee=O(this,b).get(O(this,S));try{const Oe=[];for(const H of Ae){const fe=Ee.deserialize(H);if(!fe)return;Oe.push(fe)}const ue=()=>{for(const H of Oe)ce(this,ee,mt).call(this,H);ce(this,he,_t).call(this,Oe)},$=()=>{for(const H of Oe)H.remove()};this.addCommands({cmd:ue,undo:$,mustExec:!0})}catch(Oe){(0,n.warn)(`paste: "${Oe.message}".`)}}keydown(te){var Ae;(Ae=this.getActive())!=null&&Ae.shouldGetKeyboardEvents()||me._keyboardManager.exec(this,te)}onEditingAction(te){["undo","redo","delete","selectAll"].includes(te.name)&&this[te.name]()}setEditingState(te){te?(ce(this,B,Nt).call(this),ce(this,z,Bt).call(this),ce(this,o,We).call(this,{isEditing:O(this,ie)!==n.AnnotationEditorType.NONE,isEmpty:ce(this,ne,nt).call(this),hasSomethingToUndo:O(this,c).hasSomethingToUndo(),hasSomethingToRedo:O(this,c).hasSomethingToRedo(),hasSelectedEditor:!1})):(ce(this,q,gt).call(this),ce(this,A,jt).call(this),ce(this,o,We).call(this,{isEditing:!1}))}registerEditorTypes(te){if(!O(this,j)){ge(this,j,te);for(const Ae of O(this,j))ce(this,F,tt).call(this,Ae.defaultPropertiesToUpdate)}}getId(){return O(this,Y).getId()}get currentLayer(){return O(this,b).get(O(this,S))}get currentPageIndex(){return O(this,S)}addLayer(te){O(this,b).set(te.pageIndex,te),O(this,se)?te.enable():te.disable()}removeLayer(te){O(this,b).delete(te.pageIndex)}updateMode(te){if(ge(this,ie,te),te===n.AnnotationEditorType.NONE)this.setEditingState(!1),ce(this,W,Ut).call(this);else{this.setEditingState(!0),ce(this,U,$t).call(this);for(const Ae of O(this,b).values())Ae.updateMode(te)}}updateToolbar(te){te!==O(this,ie)&&O(this,V).dispatch("switchannotationeditormode",{source:this,mode:te})}updateParams(te,Ae){if(O(this,j)){for(const Ee of O(this,oe))Ee.updateParams(te,Ae);for(const Ee of O(this,j))Ee.updateDefaultParams(te,Ae)}}getEditors(te){const Ae=[];for(const Ee of O(this,l).values())Ee.pageIndex===te&&Ae.push(Ee);return Ae}getEditor(te){return O(this,l).get(te)}addEditor(te){O(this,l).set(te.id,te)}removeEditor(te){var Ae;O(this,l).delete(te.id),this.unselect(te),(Ae=O(this,_))==null||Ae.remove(te.id)}setActiveEditor(te){O(this,k)!==te&&(ge(this,k,te),te&&ce(this,F,tt).call(this,te.propertiesToUpdate))}toggleSelected(te){if(O(this,oe).has(te)){O(this,oe).delete(te),te.unselect(),ce(this,o,We).call(this,{hasSelectedEditor:this.hasSelection});return}O(this,oe).add(te),te.select(),ce(this,F,tt).call(this,te.propertiesToUpdate),ce(this,o,We).call(this,{hasSelectedEditor:!0})}setSelected(te){for(const Ae of O(this,oe))Ae!==te&&Ae.unselect();O(this,oe).clear(),O(this,oe).add(te),te.select(),ce(this,F,tt).call(this,te.propertiesToUpdate),ce(this,o,We).call(this,{hasSelectedEditor:!0})}isSelected(te){return O(this,oe).has(te)}unselect(te){te.unselect(),O(this,oe).delete(te),ce(this,o,We).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return O(this,oe).size!==0}undo(){O(this,c).undo(),ce(this,o,We).call(this,{hasSomethingToUndo:O(this,c).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ce(this,ne,nt).call(this)})}redo(){O(this,c).redo(),ce(this,o,We).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:O(this,c).hasSomethingToRedo(),isEmpty:ce(this,ne,nt).call(this)})}addCommands(te){O(this,c).add(te),ce(this,o,We).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ce(this,ne,nt).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const te=[...O(this,oe)],Ae=()=>{for(const Oe of te)Oe.remove()},Ee=()=>{for(const Oe of te)ce(this,ee,mt).call(this,Oe)};this.addCommands({cmd:Ae,undo:Ee,mustExec:!0})}commitOrRemove(){var te;(te=O(this,k))==null||te.commitOrRemove()}selectAll(){for(const te of O(this,oe))te.commit();ce(this,he,_t).call(this,O(this,l).values())}unselectAll(){if(O(this,k)){O(this,k).commitOrRemove();return}if(O(this,oe).size!==0){for(const te of O(this,oe))te.unselect();O(this,oe).clear(),ce(this,o,We).call(this,{hasSelectedEditor:!1})}}isActive(te){return O(this,k)===te}getActive(){return O(this,k)}getMode(){return O(this,ie)}};let N=me;k=new WeakMap,l=new WeakMap,b=new WeakMap,_=new WeakMap,c=new WeakMap,S=new WeakMap,j=new WeakMap,m=new WeakMap,V=new WeakMap,Y=new WeakMap,se=new WeakMap,ie=new WeakMap,oe=new WeakMap,de=new WeakMap,ae=new WeakMap,pe=new WeakMap,ye=new WeakMap,ve=new WeakMap,Ce=new WeakMap,Se=new WeakMap,K=new WeakMap,P=new WeakMap,R=new WeakMap,B=new WeakSet,Nt=function(){O(this,R).addEventListener("keydown",O(this,ye))},q=new WeakSet,gt=function(){O(this,R).removeEventListener("keydown",O(this,ye))},z=new WeakSet,Bt=function(){document.addEventListener("copy",O(this,de)),document.addEventListener("cut",O(this,ae)),document.addEventListener("paste",O(this,pe))},A=new WeakSet,jt=function(){document.removeEventListener("copy",O(this,de)),document.removeEventListener("cut",O(this,ae)),document.removeEventListener("paste",O(this,pe))},o=new WeakSet,We=function(te){Object.entries(te).some(([Ee,Oe])=>O(this,P)[Ee]!==Oe)&&O(this,V).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(O(this,P),te)})},F=new WeakSet,tt=function(te){O(this,V).dispatch("annotationeditorparamschanged",{source:this,details:te})},U=new WeakSet,$t=function(){if(!O(this,se)){ge(this,se,!0);for(const te of O(this,b).values())te.enable()}},W=new WeakSet,Ut=function(){if(this.unselectAll(),O(this,se)){ge(this,se,!1);for(const te of O(this,b).values())te.disable()}},ee=new WeakSet,mt=function(te){const Ae=O(this,b).get(te.pageIndex);Ae?Ae.addOrRebuild(te):this.addEditor(te)},ne=new WeakSet,nt=function(){if(O(this,l).size===0)return!0;if(O(this,l).size===1)for(const te of O(this,l).values())return te.isEmpty();return!1},he=new WeakSet,_t=function(te){O(this,oe).clear();for(const Ae of te)Ae.isEmpty()||(O(this,oe).add(Ae),Ae.select());ce(this,o,We).call(this,{hasSelectedEditor:!0})},De(N,"_keyboardManager",new E([[["ctrl+a","mac+meta+a"],me.prototype.selectAll],[["ctrl+z","mac+meta+z"],me.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],me.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],me.prototype.delete],[["Escape","mac+Escape"],me.prototype.unselectAll]])),t.AnnotationEditorUIManager=N},(e,t,s)=>{var de,ae,pe,ye,ve,Ce,Se,K,P,Qe,B,Ke,q,ze;Object.defineProperty(t,"__esModule",{value:!0}),t.StatTimer=t.RenderingCancelledException=t.PixelsPerInch=t.PageViewport=t.PDFDateString=t.DOMStandardFontDataFactory=t.DOMSVGFactory=t.DOMFilterFactory=t.DOMCanvasFactory=t.DOMCMapReaderFactory=t.AnnotationPrefix=void 0,t.deprecated=_,t.getColorValues=V,t.getCurrentTransform=Y,t.getCurrentTransformInverse=se,t.getFilenameFromUrl=D,t.getPdfFilenameFromUrl=L,t.getRGB=m,t.getXfaPageViewport=j,t.isDataScheme=d,t.isPdfFile=T,t.isValidFetchUrl=l,t.loadScript=b,t.setLayerDimensions=ie;var n=s(7),i=s(1);const a="http://www.w3.org/2000/svg",u="pdfjs_internal_id_";t.AnnotationPrefix=u;const oe=class{};let x=oe;De(x,"CSS",96),De(x,"PDF",72),De(x,"PDF_TO_CSS_UNITS",oe.CSS/oe.PDF),t.PixelsPerInch=x;class w extends n.BaseFilterFactory{constructor({docId:A,ownerDocument:r=globalThis.document}={}){super();re(this,P);re(this,B);re(this,q);re(this,de,void 0);re(this,ae,void 0);re(this,pe,void 0);re(this,ye,void 0);re(this,ve,void 0);re(this,Ce,void 0);re(this,Se,void 0);re(this,K,0);ge(this,pe,A),ge(this,ye,r)}addFilter(A){if(!A)return"none";let r=O(this,P,Qe).get(A);if(r)return r;let o,h,F,M;if(A.length===1){const ee=A[0],Q=new Array(256);for(let ne=0;ne<256;ne++)Q[ne]=ee[ne]/255;M=o=h=F=Q.join(",")}else{const[ee,Q,ne]=A,le=new Array(256),he=new Array(256),be=new Array(256);for(let me=0;me<256;me++)le[me]=ee[me]/255,he[me]=Q[me]/255,be[me]=ne[me]/255;o=le.join(","),h=he.join(","),F=be.join(","),M=`${o}${h}${F}`}if(r=O(this,P,Qe).get(M),r)return O(this,P,Qe).set(A,r),r;const U=`g_${O(this,pe)}_transfer_map_${rt(this,K)._++}`,X=`url(#${U})`;O(this,P,Qe).set(A,X),O(this,P,Qe).set(M,X);const W=O(this,ye).createElementNS(a,"filter",a);W.setAttribute("id",U),W.setAttribute("color-interpolation-filters","sRGB");const Z=O(this,ye).createElementNS(a,"feComponentTransfer");return W.append(Z),ce(this,q,ze).call(this,Z,"feFuncR",o),ce(this,q,ze).call(this,Z,"feFuncG",h),ce(this,q,ze).call(this,Z,"feFuncB",F),O(this,B,Ke).append(W),X}addHCMFilter(A,r){var ne;const o=`${A}-${r}`;if(O(this,Ce)===o)return O(this,Se);if(ge(this,Ce,o),ge(this,Se,"none"),(ne=O(this,ve))==null||ne.remove(),!A||!r)return O(this,Se);O(this,B,Ke).style.color=A,A=getComputedStyle(O(this,B,Ke)).getPropertyValue("color");const h=m(A);A=i.Util.makeHexColor(...h),O(this,B,Ke).style.color=r,r=getComputedStyle(O(this,B,Ke)).getPropertyValue("color");const F=m(r);if(r=i.Util.makeHexColor(...F),O(this,B,Ke).style.color="",A==="#000000"&&r==="#ffffff"||A===r)return O(this,Se);const M=new Array(256);for(let le=0;le<=255;le++){const he=le/255;M[le]=he<=.03928?he/12.92:((he+.055)/1.055)**2.4}const U=M.join(","),X=`g_${O(this,pe)}_hcm_filter`,W=ge(this,ve,O(this,ye).createElementNS(a,"filter",a));W.setAttribute("id",X),W.setAttribute("color-interpolation-filters","sRGB");let Z=O(this,ye).createElementNS(a,"feComponentTransfer");W.append(Z),ce(this,q,ze).call(this,Z,"feFuncR",U),ce(this,q,ze).call(this,Z,"feFuncG",U),ce(this,q,ze).call(this,Z,"feFuncB",U);const ee=O(this,ye).createElementNS(a,"feColorMatrix");ee.setAttribute("type","matrix"),ee.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),W.append(ee),Z=O(this,ye).createElementNS(a,"feComponentTransfer"),W.append(Z);const Q=(le,he)=>{const be=h[le]/255,me=F[le]/255,we=new Array(he+1);for(let te=0;te<=he;te++)we[te]=be+te/he*(me-be);return we.join(",")};return ce(this,q,ze).call(this,Z,"feFuncR",Q(0,5)),ce(this,q,ze).call(this,Z,"feFuncG",Q(1,5)),ce(this,q,ze).call(this,Z,"feFuncB",Q(2,5)),O(this,B,Ke).append(W),ge(this,Se,`url(#${X})`),O(this,Se)}destroy(A=!1){A&&O(this,Se)||(O(this,ae)&&(O(this,ae).parentNode.parentNode.remove(),ge(this,ae,null)),O(this,de)&&(O(this,de).clear(),ge(this,de,null)),ge(this,K,0))}}de=new WeakMap,ae=new WeakMap,pe=new WeakMap,ye=new WeakMap,ve=new WeakMap,Ce=new WeakMap,Se=new WeakMap,K=new WeakMap,P=new WeakSet,Qe=function(){return O(this,de)||ge(this,de,new Map)},B=new WeakSet,Ke=function(){if(!O(this,ae)){const A=O(this,ye).createElement("div"),{style:r}=A;r.visibility="hidden",r.contain="strict",r.width=r.height=0,r.position="absolute",r.top=r.left=0,r.zIndex=-1;const o=O(this,ye).createElementNS(a,"svg");o.setAttribute("width",0),o.setAttribute("height",0),ge(this,ae,O(this,ye).createElementNS(a,"defs")),A.append(o),o.append(O(this,ae)),O(this,ye).body.append(A)}return O(this,ae)},q=new WeakSet,ze=function(A,r,o){const h=O(this,ye).createElementNS(a,r);h.setAttribute("type","discrete"),h.setAttribute("tableValues",o),A.append(h)},t.DOMFilterFactory=w;class E extends n.BaseCanvasFactory{constructor({ownerDocument:g=globalThis.document}={}){super(),this._document=g}_createCanvas(g,A){const r=this._document.createElement("canvas");return r.width=g,r.height=A,r}}t.DOMCanvasFactory=E;async function f(z,g=!1){if(l(z,document.baseURI)){const A=await fetch(z);if(!A.ok)throw new Error(A.statusText);return g?new Uint8Array(await A.arrayBuffer()):(0,i.stringToBytes)(await A.text())}return new Promise((A,r)=>{const o=new XMLHttpRequest;o.open("GET",z,!0),g&&(o.responseType="arraybuffer"),o.onreadystatechange=()=>{if(o.readyState===XMLHttpRequest.DONE){if(o.status===200||o.status===0){let h;if(g&&o.response?h=new Uint8Array(o.response):!g&&o.responseText&&(h=(0,i.stringToBytes)(o.responseText)),h){A(h);return}}r(new Error(o.statusText))}},o.send(null)})}class N extends n.BaseCMapReaderFactory{_fetchData(g,A){return f(g,this.isCompressed).then(r=>({cMapData:r,compressionType:A}))}}t.DOMCMapReaderFactory=N;class C extends n.BaseStandardFontDataFactory{_fetchData(g){return f(g,!0)}}t.DOMStandardFontDataFactory=C;class I extends n.BaseSVGFactory{_createSVG(g){return document.createElementNS(a,g)}}t.DOMSVGFactory=I;class v{constructor({viewBox:g,scale:A,rotation:r,offsetX:o=0,offsetY:h=0,dontFlip:F=!1}){this.viewBox=g,this.scale=A,this.rotation=r,this.offsetX=o,this.offsetY=h;const M=(g[2]+g[0])/2,U=(g[3]+g[1])/2;let X,W,Z,ee;switch(r%=360,r<0&&(r+=360),r){case 180:X=-1,W=0,Z=0,ee=1;break;case 90:X=0,W=1,Z=1,ee=0;break;case 270:X=0,W=-1,Z=-1,ee=0;break;case 0:X=1,W=0,Z=0,ee=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}F&&(Z=-Z,ee=-ee);let Q,ne,le,he;X===0?(Q=Math.abs(U-g[1])*A+o,ne=Math.abs(M-g[0])*A+h,le=(g[3]-g[1])*A,he=(g[2]-g[0])*A):(Q=Math.abs(M-g[0])*A+o,ne=Math.abs(U-g[1])*A+h,le=(g[2]-g[0])*A,he=(g[3]-g[1])*A),this.transform=[X*A,W*A,Z*A,ee*A,Q-X*A*M-Z*A*U,ne-W*A*M-ee*A*U],this.width=le,this.height=he}get rawDims(){const{viewBox:g}=this;return(0,i.shadow)(this,"rawDims",{pageWidth:g[2]-g[0],pageHeight:g[3]-g[1],pageX:g[0],pageY:g[1]})}clone({scale:g=this.scale,rotation:A=this.rotation,offsetX:r=this.offsetX,offsetY:o=this.offsetY,dontFlip:h=!1}={}){return new v({viewBox:this.viewBox.slice(),scale:g,rotation:A,offsetX:r,offsetY:o,dontFlip:h})}convertToViewportPoint(g,A){return i.Util.applyTransform([g,A],this.transform)}convertToViewportRectangle(g){const A=i.Util.applyTransform([g[0],g[1]],this.transform),r=i.Util.applyTransform([g[2],g[3]],this.transform);return[A[0],A[1],r[0],r[1]]}convertToPdfPoint(g,A){return i.Util.applyInverseTransform([g,A],this.transform)}}t.PageViewport=v;class y extends i.BaseException{constructor(g,A,r=0){super(g,"RenderingCancelledException"),this.type=A,this.extraDelay=r}}t.RenderingCancelledException=y;function d(z){const g=z.length;let A=0;for(;A<g&&z[A].trim()==="";)A++;return z.substring(A,A+5).toLowerCase()==="data:"}function T(z){return typeof z=="string"&&/\.pdf$/i.test(z)}function D(z,g=!1){return g||([z]=z.split(/[#?]/,1)),z.substring(z.lastIndexOf("/")+1)}function L(z,g="document.pdf"){if(typeof z!="string")return g;if(d(z))return(0,i.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),g;const A=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,r=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,o=A.exec(z);let h=r.exec(o[1])||r.exec(o[2])||r.exec(o[3]);if(h&&(h=h[0],h.includes("%")))try{h=r.exec(decodeURIComponent(h))[0]}catch{}return h||g}class k{constructor(){De(this,"started",Object.create(null));De(this,"times",[])}time(g){g in this.started&&(0,i.warn)(`Timer is already running for ${g}`),this.started[g]=Date.now()}timeEnd(g){g in this.started||(0,i.warn)(`Timer has not been started for ${g}`),this.times.push({name:g,start:this.started[g],end:Date.now()}),delete this.started[g]}toString(){const g=[];let A=0;for(const{name:r}of this.times)A=Math.max(r.length,A);for(const{name:r,start:o,end:h}of this.times)g.push(`${r.padEnd(A)} ${h-o}ms
`);return g.join("")}}t.StatTimer=k;function l(z,g){try{const{protocol:A}=g?new URL(z,g):new URL(z);return A==="http:"||A==="https:"}catch{return!1}}function b(z,g=!1){return new Promise((A,r)=>{const o=document.createElement("script");o.src=z,o.onload=function(h){g&&o.remove(),A(h)},o.onerror=function(){r(new Error(`Cannot load script at: ${o.src}`))},(document.head||document.documentElement).append(o)})}function _(z){console.log("Deprecated API usage: "+z)}let c;class S{static toDateObject(g){if(!g||typeof g!="string")return null;c||(c=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const A=c.exec(g);if(!A)return null;const r=parseInt(A[1],10);let o=parseInt(A[2],10);o=o>=1&&o<=12?o-1:0;let h=parseInt(A[3],10);h=h>=1&&h<=31?h:1;let F=parseInt(A[4],10);F=F>=0&&F<=23?F:0;let M=parseInt(A[5],10);M=M>=0&&M<=59?M:0;let U=parseInt(A[6],10);U=U>=0&&U<=59?U:0;const X=A[7]||"Z";let W=parseInt(A[8],10);W=W>=0&&W<=23?W:0;let Z=parseInt(A[9],10)||0;return Z=Z>=0&&Z<=59?Z:0,X==="-"?(F+=W,M+=Z):X==="+"&&(F-=W,M-=Z),new Date(Date.UTC(r,o,h,F,M,U))}}t.PDFDateString=S;function j(z,{scale:g=1,rotation:A=0}){const{width:r,height:o}=z.attributes.style,h=[0,0,parseInt(r),parseInt(o)];return new v({viewBox:h,scale:g,rotation:A})}function m(z){if(z.startsWith("#")){const g=parseInt(z.slice(1),16);return[(g&16711680)>>16,(g&65280)>>8,g&255]}return z.startsWith("rgb(")?z.slice(4,-1).split(",").map(g=>parseInt(g)):z.startsWith("rgba(")?z.slice(5,-1).split(",").map(g=>parseInt(g)).slice(0,3):((0,i.warn)(`Not a valid color format: "${z}"`),[0,0,0])}function V(z){const g=document.createElement("span");g.style.visibility="hidden",document.body.append(g);for(const A of z.keys()){g.style.color=A;const r=window.getComputedStyle(g).color;z.set(A,m(r))}g.remove()}function Y(z){const{a:g,b:A,c:r,d:o,e:h,f:F}=z.getTransform();return[g,A,r,o,h,F]}function se(z){const{a:g,b:A,c:r,d:o,e:h,f:F}=z.getTransform().invertSelf();return[g,A,r,o,h,F]}function ie(z,g,A=!1,r=!0){if(g instanceof v){const{pageWidth:o,pageHeight:h}=g.rawDims,{style:F}=z,M=`calc(var(--scale-factor) * ${o}px)`,U=`calc(var(--scale-factor) * ${h}px)`;!A||g.rotation%180===0?(F.width=M,F.height=U):(F.width=U,F.height=M)}r&&z.setAttribute("data-main-rotation",g.rotation)}},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.BaseStandardFontDataFactory=t.BaseSVGFactory=t.BaseFilterFactory=t.BaseCanvasFactory=t.BaseCMapReaderFactory=void 0;var n=s(1);class i{constructor(){this.constructor===i&&(0,n.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(f){return"none"}addHCMFilter(f,N){return"none"}destroy(f=!1){}}t.BaseFilterFactory=i;class a{constructor(){this.constructor===a&&(0,n.unreachable)("Cannot initialize BaseCanvasFactory.")}create(f,N){if(f<=0||N<=0)throw new Error("Invalid canvas size");const C=this._createCanvas(f,N);return{canvas:C,context:C.getContext("2d")}}reset(f,N,C){if(!f.canvas)throw new Error("Canvas is not specified");if(N<=0||C<=0)throw new Error("Invalid canvas size");f.canvas.width=N,f.canvas.height=C}destroy(f){if(!f.canvas)throw new Error("Canvas is not specified");f.canvas.width=0,f.canvas.height=0,f.canvas=null,f.context=null}_createCanvas(f,N){(0,n.unreachable)("Abstract method `_createCanvas` called.")}}t.BaseCanvasFactory=a;class u{constructor({baseUrl:f=null,isCompressed:N=!0}){this.constructor===u&&(0,n.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=f,this.isCompressed=N}async fetch({name:f}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!f)throw new Error("CMap name must be specified.");const N=this.baseUrl+f+(this.isCompressed?".bcmap":""),C=this.isCompressed?n.CMapCompressionType.BINARY:n.CMapCompressionType.NONE;return this._fetchData(N,C).catch(I=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${N}`)})}_fetchData(f,N){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseCMapReaderFactory=u;class x{constructor({baseUrl:f=null}){this.constructor===x&&(0,n.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=f}async fetch({filename:f}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!f)throw new Error("Font filename must be specified.");const N=`${this.baseUrl}${f}`;return this._fetchData(N).catch(C=>{throw new Error(`Unable to load font data at: ${N}`)})}_fetchData(f){(0,n.unreachable)("Abstract method `_fetchData` called.")}}t.BaseStandardFontDataFactory=x;class w{constructor(){this.constructor===w&&(0,n.unreachable)("Cannot initialize BaseSVGFactory.")}create(f,N,C=!1){if(f<=0||N<=0)throw new Error("Invalid SVG dimensions");const I=this._createSVG("svg:svg");return I.setAttribute("version","1.1"),C||(I.setAttribute("width",`${f}px`),I.setAttribute("height",`${N}px`)),I.setAttribute("preserveAspectRatio","none"),I.setAttribute("viewBox",`0 0 ${f} ${N}`),I}createElement(f){if(typeof f!="string")throw new Error("Invalid SVG element type");return this._createSVG(f)}_createSVG(f){(0,n.unreachable)("Abstract method `_createSVG` called.")}}t.BaseSVGFactory=w},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.MurmurHash3_64=void 0;var n=s(1);const i=3285377520,a=4294901760,u=65535;class x{constructor(E){this.h1=E?E&4294967295:i,this.h2=E?E&4294967295:i}update(E){let f,N;if(typeof E=="string"){f=new Uint8Array(E.length*2),N=0;for(let _=0,c=E.length;_<c;_++){const S=E.charCodeAt(_);S<=255?f[N++]=S:(f[N++]=S>>>8,f[N++]=S&255)}}else if((0,n.isArrayBuffer)(E))f=E.slice(),N=f.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const C=N>>2,I=N-C*4,v=new Uint32Array(f.buffer,0,C);let y=0,d=0,T=this.h1,D=this.h2;const L=3432918353,k=461845907,l=L&u,b=k&u;for(let _=0;_<C;_++)_&1?(y=v[_],y=y*L&a|y*l&u,y=y<<15|y>>>17,y=y*k&a|y*b&u,T^=y,T=T<<13|T>>>19,T=T*5+3864292196):(d=v[_],d=d*L&a|d*l&u,d=d<<15|d>>>17,d=d*k&a|d*b&u,D^=d,D=D<<13|D>>>19,D=D*5+3864292196);switch(y=0,I){case 3:y^=f[C*4+2]<<16;case 2:y^=f[C*4+1]<<8;case 1:y^=f[C*4],y=y*L&a|y*l&u,y=y<<15|y>>>17,y=y*k&a|y*b&u,C&1?T^=y:D^=y}this.h1=T,this.h2=D}hexdigest(){let E=this.h1,f=this.h2;return E^=f>>>1,E=E*3981806797&a|E*36045&u,f=f*4283543511&a|((f<<16|E>>>16)*2950163797&a)>>>16,E^=f>>>1,E=E*444984403&a|E*60499&u,f=f*3301882366&a|((f<<16|E>>>16)*3120437893&a)>>>16,E^=f>>>1,(E>>>0).toString(16).padStart(8,"0")+(f>>>0).toString(16).padStart(8,"0")}}t.MurmurHash3_64=x},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FontLoader=t.FontFaceObject=void 0;var n=s(1),i=s(10);class a{constructor({ownerDocument:w=globalThis.document,styleElement:E=null}){this._document=w,this.nativeFontFaces=[],this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(w){this.nativeFontFaces.push(w),this._document.fonts.add(w)}insertRule(w){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const E=this.styleElement.sheet;E.insertRule(w,E.cssRules.length)}clear(){for(const w of this.nativeFontFaces)this._document.fonts.delete(w);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(w){if(w.attached||w.missingFile)return;if(w.attached=!0,this.isFontLoadingAPISupported){const f=w.createNativeFontFace();if(f){this.addNativeFontFace(f);try{await f.loaded}catch(N){throw(0,n.warn)(`Failed to load font '${f.family}': '${N}'.`),w.disableFontFace=!0,N}}return}const E=w.createFontFaceRule();if(E){if(this.insertRule(E),this.isSyncFontLoadingSupported)return;await new Promise(f=>{const N=this._queueLoadingCallback(f);this._prepareFontLoadEvent(w,N)})}}get isFontLoadingAPISupported(){var E;const w=!!((E=this._document)!=null&&E.fonts);return(0,n.shadow)(this,"isFontLoadingAPISupported",w)}get isSyncFontLoadingSupported(){let w=!1;return(i.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(w=!0),(0,n.shadow)(this,"isSyncFontLoadingSupported",w)}_queueLoadingCallback(w){function E(){for((0,n.assert)(!N.done,"completeRequest() cannot be called twice."),N.done=!0;f.length>0&&f[0].done;){const C=f.shift();setTimeout(C.callback,0)}}const{loadingRequests:f}=this,N={done:!1,complete:E,callback:w};return f.push(N),N}get _loadTestFont(){const w=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,n.shadow)(this,"_loadTestFont",w)}_prepareFontLoadEvent(w,E){function f(m,V){return m.charCodeAt(V)<<24|m.charCodeAt(V+1)<<16|m.charCodeAt(V+2)<<8|m.charCodeAt(V+3)&255}function N(m,V,Y,se){const ie=m.substring(0,V),oe=m.substring(V+Y);return ie+se+oe}let C,I;const v=this._document.createElement("canvas");v.width=1,v.height=1;const y=v.getContext("2d");let d=0;function T(m,V){if(++d>30){(0,n.warn)("Load test font never loaded."),V();return}if(y.font="30px "+m,y.fillText(".",0,20),y.getImageData(0,0,1,1).data[3]>0){V();return}setTimeout(T.bind(null,m,V))}const D=`lt${Date.now()}${this.loadTestFontId++}`;let L=this._loadTestFont;L=N(L,976,D.length,D);const l=16,b=1482184792;let _=f(L,l);for(C=0,I=D.length-3;C<I;C+=4)_=_-b+f(D,C)|0;C<D.length&&(_=_-b+f(D+"XXX",C)|0),L=N(L,l,4,(0,n.string32)(_));const c=`url(data:font/opentype;base64,${btoa(L)});`,S=`@font-face {font-family:"${D}";src:${c}}`;this.insertRule(S);const j=this._document.createElement("div");j.style.visibility="hidden",j.style.width=j.style.height="10px",j.style.position="absolute",j.style.top=j.style.left="0px";for(const m of[w.loadedName,D]){const V=this._document.createElement("span");V.textContent="Hi",V.style.fontFamily=m,j.append(V)}this._document.body.append(j),T(D,()=>{j.remove(),E.complete()})}}t.FontLoader=a;class u{constructor(w,{isEvalSupported:E=!0,disableFontFace:f=!1,ignoreErrors:N=!1,inspectFont:C=null}){this.compiledGlyphs=Object.create(null);for(const I in w)this[I]=w[I];this.isEvalSupported=E!==!1,this.disableFontFace=f===!0,this.ignoreErrors=N===!0,this._inspectFont=C}createNativeFontFace(){var E;if(!this.data||this.disableFontFace)return null;let w;if(!this.cssFontInfo)w=new FontFace(this.loadedName,this.data,{});else{const f={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(f.style=`oblique ${this.cssFontInfo.italicAngle}deg`),w=new FontFace(this.cssFontInfo.fontFamily,this.data,f)}return(E=this._inspectFont)==null||E.call(this,this),w}createFontFaceRule(){var N;if(!this.data||this.disableFontFace)return null;const w=(0,n.bytesToString)(this.data),E=`url(data:${this.mimetype};base64,${btoa(w)});`;let f;if(!this.cssFontInfo)f=`@font-face {font-family:"${this.loadedName}";src:${E}}`;else{let C=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(C+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),f=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${C}src:${E}}`}return(N=this._inspectFont)==null||N.call(this,this,E),f}getPathGenerator(w,E){if(this.compiledGlyphs[E]!==void 0)return this.compiledGlyphs[E];let f;try{f=w.get(this.loadedName+"_path_"+E)}catch(N){if(!this.ignoreErrors)throw N;return(0,n.warn)(`getPathGenerator - ignoring character: "${N}".`),this.compiledGlyphs[E]=function(C,I){}}if(this.isEvalSupported&&n.FeatureTest.isEvalSupported){const N=[];for(const C of f){const I=C.args!==void 0?C.args.join(","):"";N.push("c.",C.cmd,"(",I,`);
`)}return this.compiledGlyphs[E]=new Function("c","size",N.join(""))}return this.compiledGlyphs[E]=function(N,C){for(const I of f)I.cmd==="scale"&&(I.args=[C,-C]),N[I.cmd].apply(N,I.args)}}}t.FontFaceObject=u},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.isNodeJS=void 0;const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");t.isNodeJS=s},(e,t,s)=>{var pe,bt,ve,yt;Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasGraphics=void 0;var n=s(1),i=s(6),a=s(12),u=s(13),x=s(10);const w=16,E=100,f=4096,N=15,C=10,I=1e3,v=16;function y(K,P){if(K._removeMirroring)throw new Error("Context is already forwarding operations.");K.__originalSave=K.save,K.__originalRestore=K.restore,K.__originalRotate=K.rotate,K.__originalScale=K.scale,K.__originalTranslate=K.translate,K.__originalTransform=K.transform,K.__originalSetTransform=K.setTransform,K.__originalResetTransform=K.resetTransform,K.__originalClip=K.clip,K.__originalMoveTo=K.moveTo,K.__originalLineTo=K.lineTo,K.__originalBezierCurveTo=K.bezierCurveTo,K.__originalRect=K.rect,K.__originalClosePath=K.closePath,K.__originalBeginPath=K.beginPath,K._removeMirroring=()=>{K.save=K.__originalSave,K.restore=K.__originalRestore,K.rotate=K.__originalRotate,K.scale=K.__originalScale,K.translate=K.__originalTranslate,K.transform=K.__originalTransform,K.setTransform=K.__originalSetTransform,K.resetTransform=K.__originalResetTransform,K.clip=K.__originalClip,K.moveTo=K.__originalMoveTo,K.lineTo=K.__originalLineTo,K.bezierCurveTo=K.__originalBezierCurveTo,K.rect=K.__originalRect,K.closePath=K.__originalClosePath,K.beginPath=K.__originalBeginPath,delete K._removeMirroring},K.save=function(){P.save(),this.__originalSave()},K.restore=function(){P.restore(),this.__originalRestore()},K.translate=function(B,G){P.translate(B,G),this.__originalTranslate(B,G)},K.scale=function(B,G){P.scale(B,G),this.__originalScale(B,G)},K.transform=function(B,G,q,J,z,g){P.transform(B,G,q,J,z,g),this.__originalTransform(B,G,q,J,z,g)},K.setTransform=function(B,G,q,J,z,g){P.setTransform(B,G,q,J,z,g),this.__originalSetTransform(B,G,q,J,z,g)},K.resetTransform=function(){P.resetTransform(),this.__originalResetTransform()},K.rotate=function(B){P.rotate(B),this.__originalRotate(B)},K.clip=function(B){P.clip(B),this.__originalClip(B)},K.moveTo=function(R,B){P.moveTo(R,B),this.__originalMoveTo(R,B)},K.lineTo=function(R,B){P.lineTo(R,B),this.__originalLineTo(R,B)},K.bezierCurveTo=function(R,B,G,q,J,z){P.bezierCurveTo(R,B,G,q,J,z),this.__originalBezierCurveTo(R,B,G,q,J,z)},K.rect=function(R,B,G,q){P.rect(R,B,G,q),this.__originalRect(R,B,G,q)},K.closePath=function(){P.closePath(),this.__originalClosePath()},K.beginPath=function(){P.beginPath(),this.__originalBeginPath()}}class d{constructor(P){this.canvasFactory=P,this.cache=Object.create(null)}getCanvas(P,R,B){let G;return this.cache[P]!==void 0?(G=this.cache[P],this.canvasFactory.reset(G,R,B)):(G=this.canvasFactory.create(R,B),this.cache[P]=G),G}delete(P){delete this.cache[P]}clear(){for(const P in this.cache){const R=this.cache[P];this.canvasFactory.destroy(R),delete this.cache[P]}}}function T(K,P,R,B,G,q,J,z,g,A){const[r,o,h,F,M,U]=(0,i.getCurrentTransform)(K);if(o===0&&h===0){const Z=J*r+M,ee=Math.round(Z),Q=z*F+U,ne=Math.round(Q),le=(J+g)*r+M,he=Math.abs(Math.round(le)-ee)||1,be=(z+A)*F+U,me=Math.abs(Math.round(be)-ne)||1;return K.setTransform(Math.sign(r),0,0,Math.sign(F),ee,ne),K.drawImage(P,R,B,G,q,0,0,he,me),K.setTransform(r,o,h,F,M,U),[he,me]}if(r===0&&F===0){const Z=z*h+M,ee=Math.round(Z),Q=J*o+U,ne=Math.round(Q),le=(z+A)*h+M,he=Math.abs(Math.round(le)-ee)||1,be=(J+g)*o+U,me=Math.abs(Math.round(be)-ne)||1;return K.setTransform(0,Math.sign(o),Math.sign(h),0,ee,ne),K.drawImage(P,R,B,G,q,0,0,me,he),K.setTransform(r,o,h,F,M,U),[me,he]}K.drawImage(P,R,B,G,q,J,z,g,A);const X=Math.hypot(r,o),W=Math.hypot(h,F);return[X*g,W*A]}function D(K){const{width:P,height:R}=K;if(P>I||R>I)return null;const B=1e3,G=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),q=P+1;let J=new Uint8Array(q*(R+1)),z,g,A;const r=P+7&-8;let o=new Uint8Array(r*R),h=0;for(const W of K.data){let Z=128;for(;Z>0;)o[h++]=W&Z?0:255,Z>>=1}let F=0;for(h=0,o[h]!==0&&(J[0]=1,++F),g=1;g<P;g++)o[h]!==o[h+1]&&(J[g]=o[h]?2:1,++F),h++;for(o[h]!==0&&(J[g]=2,++F),z=1;z<R;z++){h=z*r,A=z*q,o[h-r]!==o[h]&&(J[A]=o[h]?1:8,++F);let W=(o[h]?4:0)+(o[h-r]?8:0);for(g=1;g<P;g++)W=(W>>2)+(o[h+1]?4:0)+(o[h-r+1]?8:0),G[W]&&(J[A+g]=G[W],++F),h++;if(o[h-r]!==o[h]&&(J[A+g]=o[h]?2:4,++F),F>B)return null}for(h=r*(R-1),A=z*q,o[h]!==0&&(J[A]=8,++F),g=1;g<P;g++)o[h]!==o[h+1]&&(J[A+g]=o[h]?4:8,++F),h++;if(o[h]!==0&&(J[A+g]=4,++F),F>B)return null;const M=new Int32Array([0,q,-1,0,-q,0,0,0,1]),U=new Path2D;for(z=0;F&&z<=R;z++){let W=z*q;const Z=W+P;for(;W<Z&&!J[W];)W++;if(W===Z)continue;U.moveTo(W%q,z);const ee=W;let Q=J[W];do{const ne=M[Q];do W+=ne;while(!J[W]);const le=J[W];le!==5&&le!==10?(Q=le,J[W]=0):(Q=le&51*Q>>4,J[W]&=Q>>2|Q<<2),U.lineTo(W%q,W/q|0),J[W]||--F}while(ee!==W);--z}return o=null,J=null,function(W){W.save(),W.scale(1/P,-1/R),W.translate(0,-R),W.fill(U),W.beginPath(),W.restore()}}class L{constructor(P,R){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=n.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=n.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=n.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,P,R])}clone(){const P=Object.create(this);return P.clipBox=this.clipBox.slice(),P}setCurrentPoint(P,R){this.x=P,this.y=R}updatePathMinMax(P,R,B){[R,B]=n.Util.applyTransform([R,B],P),this.minX=Math.min(this.minX,R),this.minY=Math.min(this.minY,B),this.maxX=Math.max(this.maxX,R),this.maxY=Math.max(this.maxY,B)}updateRectMinMax(P,R){const B=n.Util.applyTransform(R,P),G=n.Util.applyTransform(R.slice(2),P);this.minX=Math.min(this.minX,B[0],G[0]),this.minY=Math.min(this.minY,B[1],G[1]),this.maxX=Math.max(this.maxX,B[0],G[0]),this.maxY=Math.max(this.maxY,B[1],G[1])}updateScalingPathMinMax(P,R){n.Util.scaleMinMax(P,R),this.minX=Math.min(this.minX,R[0]),this.maxX=Math.max(this.maxX,R[1]),this.minY=Math.min(this.minY,R[2]),this.maxY=Math.max(this.maxY,R[3])}updateCurvePathMinMax(P,R,B,G,q,J,z,g,A,r){const o=n.Util.bezierBoundingBox(R,B,G,q,J,z,g,A);if(r){r[0]=Math.min(r[0],o[0],o[2]),r[1]=Math.max(r[1],o[0],o[2]),r[2]=Math.min(r[2],o[1],o[3]),r[3]=Math.max(r[3],o[1],o[3]);return}this.updateRectMinMax(P,o)}getPathBoundingBox(P=a.PathType.FILL,R=null){const B=[this.minX,this.minY,this.maxX,this.maxY];if(P===a.PathType.STROKE){R||(0,n.unreachable)("Stroke bounding box must include transform.");const G=n.Util.singularValueDecompose2dScale(R),q=G[0]*this.lineWidth/2,J=G[1]*this.lineWidth/2;B[0]-=q,B[1]-=J,B[2]+=q,B[3]+=J}return B}updateClipFromPath(){const P=n.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(P||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(P){this.clipBox=P,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(P=a.PathType.FILL,R=null){return n.Util.intersect(this.clipBox,this.getPathBoundingBox(P,R))}}function k(K,P){if(typeof ImageData<"u"&&P instanceof ImageData){K.putImageData(P,0,0);return}const R=P.height,B=P.width,G=R%v,q=(R-G)/v,J=G===0?q:q+1,z=K.createImageData(B,v);let g=0,A;const r=P.data,o=z.data;let h,F,M,U;if(P.kind===n.ImageKind.GRAYSCALE_1BPP){const X=r.byteLength,W=new Uint32Array(o.buffer,0,o.byteLength>>2),Z=W.length,ee=B+7>>3,Q=4294967295,ne=n.FeatureTest.isLittleEndian?4278190080:255;for(h=0;h<J;h++){for(M=h<q?v:G,A=0,F=0;F<M;F++){const le=X-g;let he=0;const be=le>ee?B:le*8-7,me=be&-8;let we=0,te=0;for(;he<me;he+=8)te=r[g++],W[A++]=te&128?Q:ne,W[A++]=te&64?Q:ne,W[A++]=te&32?Q:ne,W[A++]=te&16?Q:ne,W[A++]=te&8?Q:ne,W[A++]=te&4?Q:ne,W[A++]=te&2?Q:ne,W[A++]=te&1?Q:ne;for(;he<be;he++)we===0&&(te=r[g++],we=128),W[A++]=te&we?Q:ne,we>>=1}for(;A<Z;)W[A++]=0;K.putImageData(z,0,h*v)}}else if(P.kind===n.ImageKind.RGBA_32BPP){for(F=0,U=B*v*4,h=0;h<q;h++)o.set(r.subarray(g,g+U)),g+=U,K.putImageData(z,0,F),F+=v;h<J&&(U=B*G*4,o.set(r.subarray(g,g+U)),K.putImageData(z,0,F))}else if(P.kind===n.ImageKind.RGB_24BPP)for(M=v,U=B*M,h=0;h<J;h++){for(h>=q&&(M=G,U=B*M),A=0,F=U;F--;)o[A++]=r[g++],o[A++]=r[g++],o[A++]=r[g++],o[A++]=255;K.putImageData(z,0,h*v)}else throw new Error(`bad image kind: ${P.kind}`)}function l(K,P){if(P.bitmap){K.drawImage(P.bitmap,0,0);return}const R=P.height,B=P.width,G=R%v,q=(R-G)/v,J=G===0?q:q+1,z=K.createImageData(B,v);let g=0;const A=P.data,r=z.data;for(let o=0;o<J;o++){const h=o<q?v:G;({srcPos:g}=(0,u.convertBlackAndWhiteToRGBA)({src:A,srcPos:g,dest:r,width:B,height:h,nonBlackColor:0})),K.putImageData(z,0,o*v)}}function b(K,P){const R=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const B of R)K[B]!==void 0&&(P[B]=K[B]);K.setLineDash!==void 0&&(P.setLineDash(K.getLineDash()),P.lineDashOffset=K.lineDashOffset)}function _(K){K.strokeStyle=K.fillStyle="#000000",K.fillRule="nonzero",K.globalAlpha=1,K.lineWidth=1,K.lineCap="butt",K.lineJoin="miter",K.miterLimit=10,K.globalCompositeOperation="source-over",K.font="10px sans-serif",K.setLineDash!==void 0&&(K.setLineDash([]),K.lineDashOffset=0),x.isNodeJS||(K.filter="none")}function c(K,P,R,B){const G=K.length;for(let q=3;q<G;q+=4){const J=K[q];if(J===0)K[q-3]=P,K[q-2]=R,K[q-1]=B;else if(J<255){const z=255-J;K[q-3]=K[q-3]*J+P*z>>8,K[q-2]=K[q-2]*J+R*z>>8,K[q-1]=K[q-1]*J+B*z>>8}}}function S(K,P,R){const B=K.length,G=1/255;for(let q=3;q<B;q+=4){const J=R?R[K[q]]:K[q];P[q]=P[q]*J*G|0}}function j(K,P,R){const B=K.length;for(let G=3;G<B;G+=4){const q=K[G-3]*77+K[G-2]*152+K[G-1]*28;P[G]=R?P[G]*R[q>>8]>>8:P[G]*q>>16}}function m(K,P,R,B,G,q,J,z,g,A,r){const o=!!q,h=o?q[0]:0,F=o?q[1]:0,M=o?q[2]:0;let U;G==="Luminosity"?U=j:U=S;const W=Math.min(B,Math.ceil(1048576/R));for(let Z=0;Z<B;Z+=W){const ee=Math.min(W,B-Z),Q=K.getImageData(z-A,Z+(g-r),R,ee),ne=P.getImageData(z,Z+g,R,ee);o&&c(Q.data,h,F,M),U(Q.data,ne.data,J),P.putImageData(ne,z,Z+g)}}function V(K,P,R,B){const G=B[0],q=B[1],J=B[2]-G,z=B[3]-q;J===0||z===0||(m(P.context,R,J,z,P.subtype,P.backdrop,P.transferMap,G,q,P.offsetX,P.offsetY),K.save(),K.globalAlpha=1,K.globalCompositeOperation="source-over",K.setTransform(1,0,0,1,0,0),K.drawImage(R.canvas,0,0),K.restore())}function Y(K,P){const R=n.Util.singularValueDecompose2dScale(K);R[0]=Math.fround(R[0]),R[1]=Math.fround(R[1]);const B=Math.fround((globalThis.devicePixelRatio||1)*i.PixelsPerInch.PDF_TO_CSS_UNITS);return P!==void 0?P:R[0]<=B||R[1]<=B}const se=["butt","round","square"],ie=["miter","round","bevel"],oe={},de={},Se=class{constructor(P,R,B,G,q,{optionalContentConfig:J,markedContentStack:z=null},g,A){re(this,pe);re(this,ve);this.ctx=P,this.current=new L(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=R,this.objs=B,this.canvasFactory=G,this.filterFactory=q,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=z||[],this.optionalContentConfig=J,this.cachedCanvases=new d(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=g,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=A,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(P,R=null){return typeof P=="string"?P.startsWith("g_")?this.commonObjs.get(P):this.objs.get(P):R}beginDrawing({transform:P,viewport:R,transparency:B=!1,background:G=null}){const q=this.ctx.canvas.width,J=this.ctx.canvas.height,z=this.ctx.fillStyle;if(this.ctx.fillStyle=G||"#ffffff",this.ctx.fillRect(0,0,q,J),this.ctx.fillStyle=z,B){const g=this.cachedCanvases.getCanvas("transparent",q,J);this.compositeCtx=this.ctx,this.transparentCanvas=g.canvas,this.ctx=g.context,this.ctx.save(),this.ctx.transform(...(0,i.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),_(this.ctx),P&&(this.ctx.transform(...P),this.outputScaleX=P[0],this.outputScaleY=P[0]),this.ctx.transform(...R.transform),this.viewportScale=R.scale,this.baseTransform=(0,i.getCurrentTransform)(this.ctx)}executeOperatorList(P,R,B,G){const q=P.argsArray,J=P.fnArray;let z=R||0;const g=q.length;if(g===z)return z;const A=g-z>C&&typeof B=="function",r=A?Date.now()+N:0;let o=0;const h=this.commonObjs,F=this.objs;let M;for(;;){if(G!==void 0&&z===G.nextBreakPoint)return G.breakIt(z,B),z;if(M=J[z],M!==n.OPS.dependency)this[M].apply(this,q[z]);else for(const U of q[z]){const X=U.startsWith("g_")?h:F;if(!X.has(U))return X.get(U,B),z}if(z++,z===g)return z;if(A&&++o>C){if(Date.now()>r)return B(),z;o=0}}}endDrawing(){ce(this,pe,bt).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const P of this._cachedBitmapsMap.values()){for(const R of P.values())typeof HTMLCanvasElement<"u"&&R instanceof HTMLCanvasElement&&(R.width=R.height=0);P.clear()}this._cachedBitmapsMap.clear(),ce(this,ve,yt).call(this)}_scaleImage(P,R){const B=P.width,G=P.height;let q=Math.max(Math.hypot(R[0],R[1]),1),J=Math.max(Math.hypot(R[2],R[3]),1),z=B,g=G,A="prescale1",r,o;for(;q>2&&z>1||J>2&&g>1;){let h=z,F=g;q>2&&z>1&&(h=z>=16384?Math.floor(z/2)-1||1:Math.ceil(z/2),q/=z/h),J>2&&g>1&&(F=g>=16384?Math.floor(g/2)-1||1:Math.ceil(g)/2,J/=g/F),r=this.cachedCanvases.getCanvas(A,h,F),o=r.context,o.clearRect(0,0,h,F),o.drawImage(P,0,0,z,g,0,0,h,F),P=r.canvas,z=h,g=F,A=A==="prescale1"?"prescale2":"prescale1"}return{img:P,paintWidth:z,paintHeight:g}}_createMaskCanvas(P){const R=this.ctx,{width:B,height:G}=P,q=this.current.fillColor,J=this.current.patternFill,z=(0,i.getCurrentTransform)(R);let g,A,r,o;if((P.bitmap||P.data)&&P.count>1){const he=P.bitmap||P.data.buffer;A=JSON.stringify(J?z:[z.slice(0,4),q]),g=this._cachedBitmapsMap.get(he),g||(g=new Map,this._cachedBitmapsMap.set(he,g));const be=g.get(A);if(be&&!J){const me=Math.round(Math.min(z[0],z[2])+z[4]),we=Math.round(Math.min(z[1],z[3])+z[5]);return{canvas:be,offsetX:me,offsetY:we}}r=be}r||(o=this.cachedCanvases.getCanvas("maskCanvas",B,G),l(o.context,P));let h=n.Util.transform(z,[1/B,0,0,-1/G,0,0]);h=n.Util.transform(h,[1,0,0,1,0,-G]);const F=n.Util.applyTransform([0,0],h),M=n.Util.applyTransform([B,G],h),U=n.Util.normalizeRect([F[0],F[1],M[0],M[1]]),X=Math.round(U[2]-U[0])||1,W=Math.round(U[3]-U[1])||1,Z=this.cachedCanvases.getCanvas("fillCanvas",X,W),ee=Z.context,Q=Math.min(F[0],M[0]),ne=Math.min(F[1],M[1]);ee.translate(-Q,-ne),ee.transform(...h),r||(r=this._scaleImage(o.canvas,(0,i.getCurrentTransformInverse)(ee)),r=r.img,g&&J&&g.set(A,r)),ee.imageSmoothingEnabled=Y((0,i.getCurrentTransform)(ee),P.interpolate),T(ee,r,0,0,r.width,r.height,0,0,B,G),ee.globalCompositeOperation="source-in";const le=n.Util.transform((0,i.getCurrentTransformInverse)(ee),[1,0,0,1,-Q,-ne]);return ee.fillStyle=J?q.getPattern(R,this,le,a.PathType.FILL):q,ee.fillRect(0,0,B,G),g&&!J&&(this.cachedCanvases.delete("fillCanvas"),g.set(A,Z.canvas)),{canvas:Z.canvas,offsetX:Math.round(Q),offsetY:Math.round(ne)}}setLineWidth(P){P!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=P,this.ctx.lineWidth=P}setLineCap(P){this.ctx.lineCap=se[P]}setLineJoin(P){this.ctx.lineJoin=ie[P]}setMiterLimit(P){this.ctx.miterLimit=P}setDash(P,R){const B=this.ctx;B.setLineDash!==void 0&&(B.setLineDash(P),B.lineDashOffset=R)}setRenderingIntent(P){}setFlatness(P){}setGState(P){for(const[R,B]of P)switch(R){case"LW":this.setLineWidth(B);break;case"LC":this.setLineCap(B);break;case"LJ":this.setLineJoin(B);break;case"ML":this.setMiterLimit(B);break;case"D":this.setDash(B[0],B[1]);break;case"RI":this.setRenderingIntent(B);break;case"FL":this.setFlatness(B);break;case"Font":this.setFont(B[0],B[1]);break;case"CA":this.current.strokeAlpha=B;break;case"ca":this.current.fillAlpha=B,this.ctx.globalAlpha=B;break;case"BM":this.ctx.globalCompositeOperation=B;break;case"SMask":this.current.activeSMask=B?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(B);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const P=this.inSMaskMode;this.current.activeSMask&&!P?this.beginSMaskMode():!this.current.activeSMask&&P&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const P=this.ctx.canvas.width,R=this.ctx.canvas.height,B="smaskGroupAt"+this.groupLevel,G=this.cachedCanvases.getCanvas(B,P,R);this.suspendedCtx=this.ctx,this.ctx=G.context;const q=this.ctx;q.setTransform(...(0,i.getCurrentTransform)(this.suspendedCtx)),b(this.suspendedCtx,q),y(q,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),b(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(P){if(!this.current.activeSMask)return;P?(P[0]=Math.floor(P[0]),P[1]=Math.floor(P[1]),P[2]=Math.ceil(P[2]),P[3]=Math.ceil(P[3])):P=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const R=this.current.activeSMask,B=this.suspendedCtx;V(B,R,this.ctx,P),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(b(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const P=this.current;this.stateStack.push(P),this.current=P.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),b(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(P,R,B,G,q,J){this.ctx.transform(P,R,B,G,q,J),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(P,R,B){const G=this.ctx,q=this.current;let J=q.x,z=q.y,g,A;const r=(0,i.getCurrentTransform)(G),o=r[0]===0&&r[3]===0||r[1]===0&&r[2]===0,h=o?B.slice(0):null;for(let F=0,M=0,U=P.length;F<U;F++)switch(P[F]|0){case n.OPS.rectangle:J=R[M++],z=R[M++];const X=R[M++],W=R[M++],Z=J+X,ee=z+W;G.moveTo(J,z),X===0||W===0?G.lineTo(Z,ee):(G.lineTo(Z,z),G.lineTo(Z,ee),G.lineTo(J,ee)),o||q.updateRectMinMax(r,[J,z,Z,ee]),G.closePath();break;case n.OPS.moveTo:J=R[M++],z=R[M++],G.moveTo(J,z),o||q.updatePathMinMax(r,J,z);break;case n.OPS.lineTo:J=R[M++],z=R[M++],G.lineTo(J,z),o||q.updatePathMinMax(r,J,z);break;case n.OPS.curveTo:g=J,A=z,J=R[M+4],z=R[M+5],G.bezierCurveTo(R[M],R[M+1],R[M+2],R[M+3],J,z),q.updateCurvePathMinMax(r,g,A,R[M],R[M+1],R[M+2],R[M+3],J,z,h),M+=6;break;case n.OPS.curveTo2:g=J,A=z,G.bezierCurveTo(J,z,R[M],R[M+1],R[M+2],R[M+3]),q.updateCurvePathMinMax(r,g,A,J,z,R[M],R[M+1],R[M+2],R[M+3],h),J=R[M+2],z=R[M+3],M+=4;break;case n.OPS.curveTo3:g=J,A=z,J=R[M+2],z=R[M+3],G.bezierCurveTo(R[M],R[M+1],J,z,J,z),q.updateCurvePathMinMax(r,g,A,R[M],R[M+1],J,z,J,z,h),M+=4;break;case n.OPS.closePath:G.closePath();break}o&&q.updateScalingPathMinMax(r,h),q.setCurrentPoint(J,z)}closePath(){this.ctx.closePath()}stroke(P=!0){const R=this.ctx,B=this.current.strokeColor;R.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof B=="object"&&(B!=null&&B.getPattern)?(R.save(),R.strokeStyle=B.getPattern(R,this,(0,i.getCurrentTransformInverse)(R),a.PathType.STROKE),this.rescaleAndStroke(!1),R.restore()):this.rescaleAndStroke(!0)),P&&this.consumePath(this.current.getClippedPathBoundingBox()),R.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(P=!0){const R=this.ctx,B=this.current.fillColor,G=this.current.patternFill;let q=!1;G&&(R.save(),R.fillStyle=B.getPattern(R,this,(0,i.getCurrentTransformInverse)(R),a.PathType.FILL),q=!0);const J=this.current.getClippedPathBoundingBox();this.contentVisible&&J!==null&&(this.pendingEOFill?(R.fill("evenodd"),this.pendingEOFill=!1):R.fill()),q&&R.restore(),P&&this.consumePath(J)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=oe}eoClip(){this.pendingClip=de}beginText(){this.current.textMatrix=n.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const P=this.pendingTextPaths,R=this.ctx;if(P===void 0){R.beginPath();return}R.save(),R.beginPath();for(const B of P)R.setTransform(...B.transform),R.translate(B.x,B.y),B.addToPath(R,B.fontSize);R.restore(),R.clip(),R.beginPath(),delete this.pendingTextPaths}setCharSpacing(P){this.current.charSpacing=P}setWordSpacing(P){this.current.wordSpacing=P}setHScale(P){this.current.textHScale=P/100}setLeading(P){this.current.leading=-P}setFont(P,R){const B=this.commonObjs.get(P),G=this.current;if(!B)throw new Error(`Can't find font for ${P}`);if(G.fontMatrix=B.fontMatrix||n.FONT_IDENTITY_MATRIX,(G.fontMatrix[0]===0||G.fontMatrix[3]===0)&&(0,n.warn)("Invalid font matrix for font "+P),R<0?(R=-R,G.fontDirection=-1):G.fontDirection=1,this.current.font=B,this.current.fontSize=R,B.isType3Font)return;const q=B.loadedName||"sans-serif";let J="normal";B.black?J="900":B.bold&&(J="bold");const z=B.italic?"italic":"normal",g=`"${q}", ${B.fallbackName}`;let A=R;R<w?A=w:R>E&&(A=E),this.current.fontSizeScale=R/A,this.ctx.font=`${z} ${J} ${A}px ${g}`}setTextRenderingMode(P){this.current.textRenderingMode=P}setTextRise(P){this.current.textRise=P}moveText(P,R){this.current.x=this.current.lineX+=P,this.current.y=this.current.lineY+=R}setLeadingMoveText(P,R){this.setLeading(-R),this.moveText(P,R)}setTextMatrix(P,R,B,G,q,J){this.current.textMatrix=[P,R,B,G,q,J],this.current.textMatrixScale=Math.hypot(P,R),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(P,R,B,G){const q=this.ctx,J=this.current,z=J.font,g=J.textRenderingMode,A=J.fontSize/J.fontSizeScale,r=g&n.TextRenderingMode.FILL_STROKE_MASK,o=!!(g&n.TextRenderingMode.ADD_TO_PATH_FLAG),h=J.patternFill&&!z.missingFile;let F;(z.disableFontFace||o||h)&&(F=z.getPathGenerator(this.commonObjs,P)),z.disableFontFace||h?(q.save(),q.translate(R,B),q.beginPath(),F(q,A),G&&q.setTransform(...G),(r===n.TextRenderingMode.FILL||r===n.TextRenderingMode.FILL_STROKE)&&q.fill(),(r===n.TextRenderingMode.STROKE||r===n.TextRenderingMode.FILL_STROKE)&&q.stroke(),q.restore()):((r===n.TextRenderingMode.FILL||r===n.TextRenderingMode.FILL_STROKE)&&q.fillText(P,R,B),(r===n.TextRenderingMode.STROKE||r===n.TextRenderingMode.FILL_STROKE)&&q.strokeText(P,R,B)),o&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,i.getCurrentTransform)(q),x:R,y:B,fontSize:A,addToPath:F})}get isFontSubpixelAAEnabled(){const{context:P}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);P.scale(1.5,1),P.fillText("I",0,10);const R=P.getImageData(0,0,10,10).data;let B=!1;for(let G=3;G<R.length;G+=4)if(R[G]>0&&R[G]<255){B=!0;break}return(0,n.shadow)(this,"isFontSubpixelAAEnabled",B)}showText(P){const R=this.current,B=R.font;if(B.isType3Font)return this.showType3Text(P);const G=R.fontSize;if(G===0)return;const q=this.ctx,J=R.fontSizeScale,z=R.charSpacing,g=R.wordSpacing,A=R.fontDirection,r=R.textHScale*A,o=P.length,h=B.vertical,F=h?1:-1,M=B.defaultVMetrics,U=G*R.fontMatrix[0],X=R.textRenderingMode===n.TextRenderingMode.FILL&&!B.disableFontFace&&!R.patternFill;q.save(),q.transform(...R.textMatrix),q.translate(R.x,R.y+R.textRise),A>0?q.scale(r,-1):q.scale(r,1);let W;if(R.patternFill){q.save();const le=R.fillColor.getPattern(q,this,(0,i.getCurrentTransformInverse)(q),a.PathType.FILL);W=(0,i.getCurrentTransform)(q),q.restore(),q.fillStyle=le}let Z=R.lineWidth;const ee=R.textMatrixScale;if(ee===0||Z===0){const le=R.textRenderingMode&n.TextRenderingMode.FILL_STROKE_MASK;(le===n.TextRenderingMode.STROKE||le===n.TextRenderingMode.FILL_STROKE)&&(Z=this.getSinglePixelWidth())}else Z/=ee;if(J!==1&&(q.scale(J,J),Z/=J),q.lineWidth=Z,B.isInvalidPDFjsFont){const le=[];let he=0;for(const be of P)le.push(be.unicode),he+=be.width;q.fillText(le.join(""),0,0),R.x+=he*U*r,q.restore(),this.compose();return}let Q=0,ne;for(ne=0;ne<o;++ne){const le=P[ne];if(typeof le=="number"){Q+=F*le*G/1e3;continue}let he=!1;const be=(le.isSpace?g:0)+z,me=le.fontChar,we=le.accent;let te,Ae,Ee=le.width;if(h){const ue=le.vmetric||M,$=-(le.vmetric?ue[1]:Ee*.5)*U,H=ue[2]*U;Ee=ue?-ue[0]:Ee,te=$/J,Ae=(Q+H)/J}else te=Q/J,Ae=0;if(B.remeasure&&Ee>0){const ue=q.measureText(me).width*1e3/G*J;if(Ee<ue&&this.isFontSubpixelAAEnabled){const $=Ee/ue;he=!0,q.save(),q.scale($,1),te/=$}else Ee!==ue&&(te+=(Ee-ue)/2e3*G/J)}if(this.contentVisible&&(le.isInFont||B.missingFile)){if(X&&!we)q.fillText(me,te,Ae);else if(this.paintChar(me,te,Ae,W),we){const ue=te+G*we.offset.x/J,$=Ae-G*we.offset.y/J;this.paintChar(we.fontChar,ue,$,W)}}let Oe;h?Oe=Ee*U-be*A:Oe=Ee*U+be*A,Q+=Oe,he&&q.restore()}h?R.y-=Q:R.x+=Q*r,q.restore(),this.compose()}showType3Text(P){const R=this.ctx,B=this.current,G=B.font,q=B.fontSize,J=B.fontDirection,z=G.vertical?1:-1,g=B.charSpacing,A=B.wordSpacing,r=B.textHScale*J,o=B.fontMatrix||n.FONT_IDENTITY_MATRIX,h=P.length,F=B.textRenderingMode===n.TextRenderingMode.INVISIBLE;let M,U,X,W;if(!(F||q===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,R.save(),R.transform(...B.textMatrix),R.translate(B.x,B.y),R.scale(r,J),M=0;M<h;++M){if(U=P[M],typeof U=="number"){W=z*U*q/1e3,this.ctx.translate(W,0),B.x+=W*r;continue}const Z=(U.isSpace?A:0)+g,ee=G.charProcOperatorList[U.operatorListId];if(!ee){(0,n.warn)(`Type3 character "${U.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=U,this.save(),R.scale(q,q),R.transform(...o),this.executeOperatorList(ee),this.restore()),X=n.Util.applyTransform([U.width,0],o)[0]*q+Z,R.translate(X,0),B.x+=X*r}R.restore(),this.processingType3=null}}setCharWidth(P,R){}setCharWidthAndBounds(P,R,B,G,q,J){this.ctx.rect(B,G,q-B,J-G),this.ctx.clip(),this.endPath()}getColorN_Pattern(P){let R;if(P[0]==="TilingPattern"){const B=P[1],G=this.baseTransform||(0,i.getCurrentTransform)(this.ctx),q={createCanvasGraphics:J=>new Se(J,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};R=new a.TilingPattern(P,B,this.ctx,q,G)}else R=this._getPattern(P[1],P[2]);return R}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(P,R,B){const G=n.Util.makeHexColor(P,R,B);this.ctx.strokeStyle=G,this.current.strokeColor=G}setFillRGBColor(P,R,B){const G=n.Util.makeHexColor(P,R,B);this.ctx.fillStyle=G,this.current.fillColor=G,this.current.patternFill=!1}_getPattern(P,R=null){let B;return this.cachedPatterns.has(P)?B=this.cachedPatterns.get(P):(B=(0,a.getShadingPattern)(this.getObject(P)),this.cachedPatterns.set(P,B)),R&&(B.matrix=R),B}shadingFill(P){if(!this.contentVisible)return;const R=this.ctx;this.save();const B=this._getPattern(P);R.fillStyle=B.getPattern(R,this,(0,i.getCurrentTransformInverse)(R),a.PathType.SHADING);const G=(0,i.getCurrentTransformInverse)(R);if(G){const q=R.canvas,J=q.width,z=q.height,g=n.Util.applyTransform([0,0],G),A=n.Util.applyTransform([0,z],G),r=n.Util.applyTransform([J,0],G),o=n.Util.applyTransform([J,z],G),h=Math.min(g[0],A[0],r[0],o[0]),F=Math.min(g[1],A[1],r[1],o[1]),M=Math.max(g[0],A[0],r[0],o[0]),U=Math.max(g[1],A[1],r[1],o[1]);this.ctx.fillRect(h,F,M-h,U-F)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,n.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,n.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(P,R){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(P)&&P.length===6&&this.transform(...P),this.baseTransform=(0,i.getCurrentTransform)(this.ctx),R)){const B=R[2]-R[0],G=R[3]-R[1];this.ctx.rect(R[0],R[1],B,G),this.current.updateRectMinMax((0,i.getCurrentTransform)(this.ctx),R),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(P){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const R=this.ctx;P.isolated||(0,n.info)("TODO: Support non-isolated groups."),P.knockout&&(0,n.warn)("Knockout groups not supported.");const B=(0,i.getCurrentTransform)(R);if(P.matrix&&R.transform(...P.matrix),!P.bbox)throw new Error("Bounding box is required.");let G=n.Util.getAxialAlignedBoundingBox(P.bbox,(0,i.getCurrentTransform)(R));const q=[0,0,R.canvas.width,R.canvas.height];G=n.Util.intersect(G,q)||[0,0,0,0];const J=Math.floor(G[0]),z=Math.floor(G[1]);let g=Math.max(Math.ceil(G[2])-J,1),A=Math.max(Math.ceil(G[3])-z,1),r=1,o=1;g>f&&(r=g/f,g=f),A>f&&(o=A/f,A=f),this.current.startNewPathAndClipBox([0,0,g,A]);let h="groupAt"+this.groupLevel;P.smask&&(h+="_smask_"+this.smaskCounter++%2);const F=this.cachedCanvases.getCanvas(h,g,A),M=F.context;M.scale(1/r,1/o),M.translate(-J,-z),M.transform(...B),P.smask?this.smaskStack.push({canvas:F.canvas,context:M,offsetX:J,offsetY:z,scaleX:r,scaleY:o,subtype:P.smask.subtype,backdrop:P.smask.backdrop,transferMap:P.smask.transferMap||null,startTransformInverse:null}):(R.setTransform(1,0,0,1,0,0),R.translate(J,z),R.scale(r,o),R.save()),b(R,M),this.ctx=M,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(R),this.groupLevel++}endGroup(P){if(!this.contentVisible)return;this.groupLevel--;const R=this.ctx,B=this.groupStack.pop();if(this.ctx=B,this.ctx.imageSmoothingEnabled=!1,P.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const G=(0,i.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...G);const q=n.Util.getAxialAlignedBoundingBox([0,0,R.canvas.width,R.canvas.height],G);this.ctx.drawImage(R.canvas,0,0),this.ctx.restore(),this.compose(q)}}beginAnnotation(P,R,B,G,q){if(ce(this,pe,bt).call(this),_(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(R)&&R.length===4){const J=R[2]-R[0],z=R[3]-R[1];if(q&&this.annotationCanvasMap){B=B.slice(),B[4]-=R[0],B[5]-=R[1],R=R.slice(),R[0]=R[1]=0,R[2]=J,R[3]=z;const[g,A]=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(this.ctx)),{viewportScale:r}=this,o=Math.ceil(J*this.outputScaleX*r),h=Math.ceil(z*this.outputScaleY*r);this.annotationCanvas=this.canvasFactory.create(o,h);const{canvas:F,context:M}=this.annotationCanvas;this.annotationCanvasMap.set(P,F),this.annotationCanvas.savedCtx=this.ctx,this.ctx=M,this.ctx.save(),this.ctx.setTransform(g,0,0,-A,0,z*A),_(this.ctx)}else _(this.ctx),this.ctx.rect(R[0],R[1],J,z),this.ctx.clip(),this.endPath()}this.current=new L(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...B),this.transform(...G)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),ce(this,ve,yt).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(P){if(!this.contentVisible)return;const R=P.count;P=this.getObject(P.data,P),P.count=R;const B=this.ctx,G=this.processingType3;if(G&&(G.compiled===void 0&&(G.compiled=D(P)),G.compiled)){G.compiled(B);return}const q=this._createMaskCanvas(P),J=q.canvas;B.save(),B.setTransform(1,0,0,1,0,0),B.drawImage(J,q.offsetX,q.offsetY),B.restore(),this.compose()}paintImageMaskXObjectRepeat(P,R,B=0,G=0,q,J){if(!this.contentVisible)return;P=this.getObject(P.data,P);const z=this.ctx;z.save();const g=(0,i.getCurrentTransform)(z);z.transform(R,B,G,q,0,0);const A=this._createMaskCanvas(P);z.setTransform(1,0,0,1,A.offsetX-g[4],A.offsetY-g[5]);for(let r=0,o=J.length;r<o;r+=2){const h=n.Util.transform(g,[R,B,G,q,J[r],J[r+1]]),[F,M]=n.Util.applyTransform([0,0],h);z.drawImage(A.canvas,F,M)}z.restore(),this.compose()}paintImageMaskXObjectGroup(P){if(!this.contentVisible)return;const R=this.ctx,B=this.current.fillColor,G=this.current.patternFill;for(const q of P){const{data:J,width:z,height:g,transform:A}=q,r=this.cachedCanvases.getCanvas("maskCanvas",z,g),o=r.context;o.save();const h=this.getObject(J,q);l(o,h),o.globalCompositeOperation="source-in",o.fillStyle=G?B.getPattern(o,this,(0,i.getCurrentTransformInverse)(R),a.PathType.FILL):B,o.fillRect(0,0,z,g),o.restore(),R.save(),R.transform(...A),R.scale(1,-1),T(R,r.canvas,0,0,z,g,0,-1,1,1),R.restore()}this.compose()}paintImageXObject(P){if(!this.contentVisible)return;const R=this.getObject(P);if(!R){(0,n.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(R)}paintImageXObjectRepeat(P,R,B,G){if(!this.contentVisible)return;const q=this.getObject(P);if(!q){(0,n.warn)("Dependent image isn't ready yet");return}const J=q.width,z=q.height,g=[];for(let A=0,r=G.length;A<r;A+=2)g.push({transform:[R,0,0,B,G[A],G[A+1]],x:0,y:0,w:J,h:z});this.paintInlineImageXObjectGroup(q,g)}applyTransferMapsToCanvas(P){return this.current.transferMaps!=="none"&&(P.filter=this.current.transferMaps,P.drawImage(P.canvas,0,0),P.filter="none"),P.canvas}applyTransferMapsToBitmap(P){if(this.current.transferMaps==="none")return P.bitmap;const{bitmap:R,width:B,height:G}=P,q=this.cachedCanvases.getCanvas("inlineImage",B,G),J=q.context;return J.filter=this.current.transferMaps,J.drawImage(R,0,0),J.filter="none",q.canvas}paintInlineImageXObject(P){if(!this.contentVisible)return;const R=P.width,B=P.height,G=this.ctx;this.save(),x.isNodeJS||(G.filter="none"),G.scale(1/R,-1/B);let q;if(P.bitmap)q=this.applyTransferMapsToBitmap(P);else if(typeof HTMLElement=="function"&&P instanceof HTMLElement||!P.data)q=P;else{const g=this.cachedCanvases.getCanvas("inlineImage",R,B).context;k(g,P),q=this.applyTransferMapsToCanvas(g)}const J=this._scaleImage(q,(0,i.getCurrentTransformInverse)(G));G.imageSmoothingEnabled=Y((0,i.getCurrentTransform)(G),P.interpolate),T(G,J.img,0,0,J.paintWidth,J.paintHeight,0,-B,R,B),this.compose(),this.restore()}paintInlineImageXObjectGroup(P,R){if(!this.contentVisible)return;const B=this.ctx;let G;if(P.bitmap)G=P.bitmap;else{const q=P.width,J=P.height,g=this.cachedCanvases.getCanvas("inlineImage",q,J).context;k(g,P),G=this.applyTransferMapsToCanvas(g)}for(const q of R)B.save(),B.transform(...q.transform),B.scale(1,-1),T(B,G,q.x,q.y,q.w,q.h,0,-1,1,1),B.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(P){}markPointProps(P,R){}beginMarkedContent(P){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(P,R){P==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(R)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(P){const R=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(P);const B=this.ctx;this.pendingClip&&(R||(this.pendingClip===de?B.clip("evenodd"):B.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),B.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const P=(0,i.getCurrentTransform)(this.ctx);if(P[1]===0&&P[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(P[0]),Math.abs(P[3]));else{const R=Math.abs(P[0]*P[3]-P[2]*P[1]),B=Math.hypot(P[0],P[2]),G=Math.hypot(P[1],P[3]);this._cachedGetSinglePixelWidth=Math.max(B,G)/R}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:P}=this.current,R=(0,i.getCurrentTransform)(this.ctx);let B,G;if(R[1]===0&&R[2]===0){const q=Math.abs(R[0]),J=Math.abs(R[3]);if(P===0)B=1/q,G=1/J;else{const z=q*P,g=J*P;B=z<1?1/z:1,G=g<1?1/g:1}}else{const q=Math.abs(R[0]*R[3]-R[2]*R[1]),J=Math.hypot(R[0],R[1]),z=Math.hypot(R[2],R[3]);if(P===0)B=z/q,G=J/q;else{const g=P*q;B=z>g?z/g:1,G=J>g?J/g:1}}this._cachedScaleForStroking=[B,G]}return this._cachedScaleForStroking}rescaleAndStroke(P){const{ctx:R}=this,{lineWidth:B}=this.current,[G,q]=this.getScaleForStroking();if(R.lineWidth=B||1,G===1&&q===1){R.stroke();return}let J,z,g;P&&(J=(0,i.getCurrentTransform)(R),z=R.getLineDash().slice(),g=R.lineDashOffset),R.scale(G,q);const A=Math.max(G,q);R.setLineDash(R.getLineDash().map(r=>r/A)),R.lineDashOffset/=A,R.stroke(),P&&(R.setTransform(...J),R.setLineDash(z),R.lineDashOffset=g)}isContentVisible(){for(let P=this.markedContentStack.length-1;P>=0;P--)if(!this.markedContentStack[P].visible)return!1;return!0}};let ae=Se;pe=new WeakSet,bt=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ve=new WeakSet,yt=function(){if(this.pageColors){const P=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(P!=="none"){const R=this.ctx.filter;this.ctx.filter=P,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=R}}},t.CanvasGraphics=ae;for(const K in n.OPS)ae.prototype[K]!==void 0&&(ae.prototype[n.OPS[K]]=ae.prototype[K])},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TilingPattern=t.PathType=void 0,t.getShadingPattern=I;var n=s(1),i=s(6);const a={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};t.PathType=a;function u(T,D){if(!D)return;const L=D[2]-D[0],k=D[3]-D[1],l=new Path2D;l.rect(D[0],D[1],L,k),T.clip(l)}class x{constructor(){this.constructor===x&&(0,n.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,n.unreachable)("Abstract method `getPattern` called.")}}class w extends x{constructor(D){super(),this._type=D[1],this._bbox=D[2],this._colorStops=D[3],this._p0=D[4],this._p1=D[5],this._r0=D[6],this._r1=D[7],this.matrix=null}_createGradient(D){let L;this._type==="axial"?L=D.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(L=D.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const k of this._colorStops)L.addColorStop(k[0],k[1]);return L}getPattern(D,L,k,l){let b;if(l===a.STROKE||l===a.FILL){const _=L.current.getClippedPathBoundingBox(l,(0,i.getCurrentTransform)(D))||[0,0,0,0],c=Math.ceil(_[2]-_[0])||1,S=Math.ceil(_[3]-_[1])||1,j=L.cachedCanvases.getCanvas("pattern",c,S,!0),m=j.context;m.clearRect(0,0,m.canvas.width,m.canvas.height),m.beginPath(),m.rect(0,0,m.canvas.width,m.canvas.height),m.translate(-_[0],-_[1]),k=n.Util.transform(k,[1,0,0,1,_[0],_[1]]),m.transform(...L.baseTransform),this.matrix&&m.transform(...this.matrix),u(m,this._bbox),m.fillStyle=this._createGradient(m),m.fill(),b=D.createPattern(j.canvas,"no-repeat");const V=new DOMMatrix(k);b.setTransform(V)}else u(D,this._bbox),b=this._createGradient(D);return b}}function E(T,D,L,k,l,b,_,c){const S=D.coords,j=D.colors,m=T.data,V=T.width*4;let Y;S[L+1]>S[k+1]&&(Y=L,L=k,k=Y,Y=b,b=_,_=Y),S[k+1]>S[l+1]&&(Y=k,k=l,l=Y,Y=_,_=c,c=Y),S[L+1]>S[k+1]&&(Y=L,L=k,k=Y,Y=b,b=_,_=Y);const se=(S[L]+D.offsetX)*D.scaleX,ie=(S[L+1]+D.offsetY)*D.scaleY,oe=(S[k]+D.offsetX)*D.scaleX,de=(S[k+1]+D.offsetY)*D.scaleY,ae=(S[l]+D.offsetX)*D.scaleX,pe=(S[l+1]+D.offsetY)*D.scaleY;if(ie>=pe)return;const ye=j[b],ve=j[b+1],Ce=j[b+2],Se=j[_],K=j[_+1],P=j[_+2],R=j[c],B=j[c+1],G=j[c+2],q=Math.round(ie),J=Math.round(pe);let z,g,A,r,o,h,F,M;for(let U=q;U<=J;U++){if(U<de){let Q;U<ie?Q=0:Q=(ie-U)/(ie-de),z=se-(se-oe)*Q,g=ye-(ye-Se)*Q,A=ve-(ve-K)*Q,r=Ce-(Ce-P)*Q}else{let Q;U>pe?Q=1:de===pe?Q=0:Q=(de-U)/(de-pe),z=oe-(oe-ae)*Q,g=Se-(Se-R)*Q,A=K-(K-B)*Q,r=P-(P-G)*Q}let X;U<ie?X=0:U>pe?X=1:X=(ie-U)/(ie-pe),o=se-(se-ae)*X,h=ye-(ye-R)*X,F=ve-(ve-B)*X,M=Ce-(Ce-G)*X;const W=Math.round(Math.min(z,o)),Z=Math.round(Math.max(z,o));let ee=V*U+W*4;for(let Q=W;Q<=Z;Q++)X=(z-Q)/(z-o),X<0?X=0:X>1&&(X=1),m[ee++]=g-(g-h)*X|0,m[ee++]=A-(A-F)*X|0,m[ee++]=r-(r-M)*X|0,m[ee++]=255}}function f(T,D,L){const k=D.coords,l=D.colors;let b,_;switch(D.type){case"lattice":const c=D.verticesPerRow,S=Math.floor(k.length/c)-1,j=c-1;for(b=0;b<S;b++){let m=b*c;for(let V=0;V<j;V++,m++)E(T,L,k[m],k[m+1],k[m+c],l[m],l[m+1],l[m+c]),E(T,L,k[m+c+1],k[m+1],k[m+c],l[m+c+1],l[m+1],l[m+c])}break;case"triangles":for(b=0,_=k.length;b<_;b+=3)E(T,L,k[b],k[b+1],k[b+2],l[b],l[b+1],l[b+2]);break;default:throw new Error("illegal figure")}}class N extends x{constructor(D){super(),this._coords=D[2],this._colors=D[3],this._figures=D[4],this._bounds=D[5],this._bbox=D[7],this._background=D[8],this.matrix=null}_createMeshCanvas(D,L,k){const c=Math.floor(this._bounds[0]),S=Math.floor(this._bounds[1]),j=Math.ceil(this._bounds[2])-c,m=Math.ceil(this._bounds[3])-S,V=Math.min(Math.ceil(Math.abs(j*D[0]*1.1)),3e3),Y=Math.min(Math.ceil(Math.abs(m*D[1]*1.1)),3e3),se=j/V,ie=m/Y,oe={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-S,scaleX:1/se,scaleY:1/ie},de=V+2*2,ae=Y+2*2,pe=k.getCanvas("mesh",de,ae,!1),ye=pe.context,ve=ye.createImageData(V,Y);if(L){const Se=ve.data;for(let K=0,P=Se.length;K<P;K+=4)Se[K]=L[0],Se[K+1]=L[1],Se[K+2]=L[2],Se[K+3]=255}for(const Se of this._figures)f(ve,Se,oe);return ye.putImageData(ve,2,2),{canvas:pe.canvas,offsetX:c-2*se,offsetY:S-2*ie,scaleX:se,scaleY:ie}}getPattern(D,L,k,l){u(D,this._bbox);let b;if(l===a.SHADING)b=n.Util.singularValueDecompose2dScale((0,i.getCurrentTransform)(D));else if(b=n.Util.singularValueDecompose2dScale(L.baseTransform),this.matrix){const c=n.Util.singularValueDecompose2dScale(this.matrix);b=[b[0]*c[0],b[1]*c[1]]}const _=this._createMeshCanvas(b,l===a.SHADING?null:this._background,L.cachedCanvases);return l!==a.SHADING&&(D.setTransform(...L.baseTransform),this.matrix&&D.transform(...this.matrix)),D.translate(_.offsetX,_.offsetY),D.scale(_.scaleX,_.scaleY),D.createPattern(_.canvas,"no-repeat")}}class C extends x{getPattern(){return"hotpink"}}function I(T){switch(T[0]){case"RadialAxial":return new w(T);case"Mesh":return new N(T);case"Dummy":return new C}throw new Error(`Unknown IR type: ${T[0]}`)}const v={COLORED:1,UNCOLORED:2},d=class{constructor(D,L,k,l,b){this.operatorList=D[2],this.matrix=D[3]||[1,0,0,1,0,0],this.bbox=D[4],this.xstep=D[5],this.ystep=D[6],this.paintType=D[7],this.tilingType=D[8],this.color=L,this.ctx=k,this.canvasGraphicsFactory=l,this.baseTransform=b}createPatternCanvas(D){const L=this.operatorList,k=this.bbox,l=this.xstep,b=this.ystep,_=this.paintType,c=this.tilingType,S=this.color,j=this.canvasGraphicsFactory;(0,n.info)("TilingType: "+c);const m=k[0],V=k[1],Y=k[2],se=k[3],ie=n.Util.singularValueDecompose2dScale(this.matrix),oe=n.Util.singularValueDecompose2dScale(this.baseTransform),de=[ie[0]*oe[0],ie[1]*oe[1]],ae=this.getSizeAndScale(l,this.ctx.canvas.width,de[0]),pe=this.getSizeAndScale(b,this.ctx.canvas.height,de[1]),ye=D.cachedCanvases.getCanvas("pattern",ae.size,pe.size,!0),ve=ye.context,Ce=j.createCanvasGraphics(ve);Ce.groupLevel=D.groupLevel,this.setFillAndStrokeStyleToContext(Ce,_,S);let Se=m,K=V,P=Y,R=se;return m<0&&(Se=0,P+=Math.abs(m)),V<0&&(K=0,R+=Math.abs(V)),ve.translate(-(ae.scale*Se),-(pe.scale*K)),Ce.transform(ae.scale,0,0,pe.scale,0,0),ve.save(),this.clipBbox(Ce,Se,K,P,R),Ce.baseTransform=(0,i.getCurrentTransform)(Ce.ctx),Ce.executeOperatorList(L),Ce.endDrawing(),{canvas:ye.canvas,scaleX:ae.scale,scaleY:pe.scale,offsetX:Se,offsetY:K}}getSizeAndScale(D,L,k){D=Math.abs(D);const l=Math.max(d.MAX_PATTERN_SIZE,L);let b=Math.ceil(D*k);return b>=l?b=l:k=b/D,{scale:k,size:b}}clipBbox(D,L,k,l,b){const _=l-L,c=b-k;D.ctx.rect(L,k,_,c),D.current.updateRectMinMax((0,i.getCurrentTransform)(D.ctx),[L,k,l,b]),D.clip(),D.endPath()}setFillAndStrokeStyleToContext(D,L,k){const l=D.ctx,b=D.current;switch(L){case v.COLORED:const _=this.ctx;l.fillStyle=_.fillStyle,l.strokeStyle=_.strokeStyle,b.fillColor=_.fillStyle,b.strokeColor=_.strokeStyle;break;case v.UNCOLORED:const c=n.Util.makeHexColor(k[0],k[1],k[2]);l.fillStyle=c,l.strokeStyle=c,b.fillColor=c,b.strokeColor=c;break;default:throw new n.FormatError(`Unsupported paint type: ${L}`)}}getPattern(D,L,k,l){let b=k;l!==a.SHADING&&(b=n.Util.transform(b,L.baseTransform),this.matrix&&(b=n.Util.transform(b,this.matrix)));const _=this.createPatternCanvas(L);let c=new DOMMatrix(b);c=c.translate(_.offsetX,_.offsetY),c=c.scale(1/_.scaleX,1/_.scaleY);const S=D.createPattern(_.canvas,"repeat");return S.setTransform(c),S}};let y=d;De(y,"MAX_PATTERN_SIZE",3e3),t.TilingPattern=y},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.convertBlackAndWhiteToRGBA=a,t.convertToRGBA=i,t.grayToRGBA=x;var n=s(1);function i(w){switch(w.kind){case n.ImageKind.GRAYSCALE_1BPP:return a(w);case n.ImageKind.RGB_24BPP:return u(w)}return null}function a({src:w,srcPos:E=0,dest:f,width:N,height:C,nonBlackColor:I=4294967295,inverseDecode:v=!1}){const y=n.FeatureTest.isLittleEndian?4278190080:255,[d,T]=v?[I,y]:[y,I],D=N>>3,L=N&7,k=w.length;f=new Uint32Array(f.buffer);let l=0;for(let b=0;b<C;b++){for(const c=E+D;E<c;E++){const S=E<k?w[E]:255;f[l++]=S&128?T:d,f[l++]=S&64?T:d,f[l++]=S&32?T:d,f[l++]=S&16?T:d,f[l++]=S&8?T:d,f[l++]=S&4?T:d,f[l++]=S&2?T:d,f[l++]=S&1?T:d}if(L===0)continue;const _=E<k?w[E++]:255;for(let c=0;c<L;c++)f[l++]=_&1<<7-c?T:d}return{srcPos:E,destPos:l}}function u({src:w,srcPos:E=0,dest:f,destPos:N=0,width:C,height:I}){let v=0;const y=w.length>>2,d=new Uint32Array(w.buffer,E,y);if(n.FeatureTest.isLittleEndian){for(;v<y-2;v+=3,N+=4){const T=d[v],D=d[v+1],L=d[v+2];f[N]=T|4278190080,f[N+1]=T>>>24|D<<8|4278190080,f[N+2]=D>>>16|L<<16|4278190080,f[N+3]=L>>>8|4278190080}for(let T=v*4,D=w.length;T<D;T+=3)f[N++]=w[T]|w[T+1]<<8|w[T+2]<<16|4278190080}else{for(;v<y-2;v+=3,N+=4){const T=d[v],D=d[v+1],L=d[v+2];f[N]=T|255,f[N+1]=T<<24|D>>>8|255,f[N+2]=D<<16|L>>>16|255,f[N+3]=L<<8|255}for(let T=v*4,D=w.length;T<D;T+=3)f[N++]=w[T]<<24|w[T+1]<<16|w[T+2]<<8|255}return{srcPos:E,destPos:N}}function x(w,E){if(n.FeatureTest.isLittleEndian)for(let f=0,N=w.length;f<N;f++)E[f]=w[f]*65793|4278190080;else for(let f=0,N=w.length;f<N;f++)E[f]=w[f]*16843008|255}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.GlobalWorkerOptions=void 0;const s=Object.create(null);t.GlobalWorkerOptions=s,s.workerPort=null,s.workerSrc=""},(e,t,s)=>{var w,Ht,f,Wt,C,ot;Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var n=s(1);const i={UNKNOWN:0,DATA:1,ERROR:2},a={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function u(v){switch(v instanceof Error||typeof v=="object"&&v!==null||(0,n.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),v.name){case"AbortException":return new n.AbortException(v.message);case"MissingPDFException":return new n.MissingPDFException(v.message);case"PasswordException":return new n.PasswordException(v.message,v.code);case"UnexpectedResponseException":return new n.UnexpectedResponseException(v.message,v.status);case"UnknownErrorException":return new n.UnknownErrorException(v.message,v.details);default:return new n.UnknownErrorException(v.message,v.toString())}}class x{constructor(y,d,T){re(this,w);re(this,f);re(this,C);this.sourceName=y,this.targetName=d,this.comObj=T,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=D=>{const L=D.data;if(L.targetName!==this.sourceName)return;if(L.stream){ce(this,f,Wt).call(this,L);return}if(L.callback){const l=L.callbackId,b=this.callbackCapabilities[l];if(!b)throw new Error(`Cannot resolve callback ${l}`);if(delete this.callbackCapabilities[l],L.callback===i.DATA)b.resolve(L.data);else if(L.callback===i.ERROR)b.reject(u(L.reason));else throw new Error("Unexpected callback case");return}const k=this.actionHandler[L.action];if(!k)throw new Error(`Unknown action from worker: ${L.action}`);if(L.callbackId){const l=this.sourceName,b=L.sourceName;new Promise(function(_){_(k(L.data))}).then(function(_){T.postMessage({sourceName:l,targetName:b,callback:i.DATA,callbackId:L.callbackId,data:_})},function(_){T.postMessage({sourceName:l,targetName:b,callback:i.ERROR,callbackId:L.callbackId,reason:u(_)})});return}if(L.streamId){ce(this,w,Ht).call(this,L);return}k(L.data)},T.addEventListener("message",this._onComObjOnMessage)}on(y,d){const T=this.actionHandler;if(T[y])throw new Error(`There is already an actionName called "${y}"`);T[y]=d}send(y,d,T){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,data:d},T)}sendWithPromise(y,d,T){const D=this.callbackId++,L=new n.PromiseCapability;this.callbackCapabilities[D]=L;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:y,callbackId:D,data:d},T)}catch(k){L.reject(k)}return L.promise}sendWithStream(y,d,T,D){const L=this.streamId++,k=this.sourceName,l=this.targetName,b=this.comObj;return new ReadableStream({start:_=>{const c=new n.PromiseCapability;return this.streamControllers[L]={controller:_,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},b.postMessage({sourceName:k,targetName:l,action:y,streamId:L,data:d,desiredSize:_.desiredSize},D),c.promise},pull:_=>{const c=new n.PromiseCapability;return this.streamControllers[L].pullCall=c,b.postMessage({sourceName:k,targetName:l,stream:a.PULL,streamId:L,desiredSize:_.desiredSize}),c.promise},cancel:_=>{(0,n.assert)(_ instanceof Error,"cancel must have a valid reason");const c=new n.PromiseCapability;return this.streamControllers[L].cancelCall=c,this.streamControllers[L].isClosed=!0,b.postMessage({sourceName:k,targetName:l,stream:a.CANCEL,streamId:L,reason:u(_)}),c.promise}},T)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}w=new WeakSet,Ht=function(y){const d=y.streamId,T=this.sourceName,D=y.sourceName,L=this.comObj,k=this,l=this.actionHandler[y.action],b={enqueue(_,c=1,S){if(this.isCancelled)return;const j=this.desiredSize;this.desiredSize-=c,j>0&&this.desiredSize<=0&&(this.sinkCapability=new n.PromiseCapability,this.ready=this.sinkCapability.promise),L.postMessage({sourceName:T,targetName:D,stream:a.ENQUEUE,streamId:d,chunk:_},S)},close(){this.isCancelled||(this.isCancelled=!0,L.postMessage({sourceName:T,targetName:D,stream:a.CLOSE,streamId:d}),delete k.streamSinks[d])},error(_){(0,n.assert)(_ instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,L.postMessage({sourceName:T,targetName:D,stream:a.ERROR,streamId:d,reason:u(_)}))},sinkCapability:new n.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:y.desiredSize,ready:null};b.sinkCapability.resolve(),b.ready=b.sinkCapability.promise,this.streamSinks[d]=b,new Promise(function(_){_(l(y.data,b))}).then(function(){L.postMessage({sourceName:T,targetName:D,stream:a.START_COMPLETE,streamId:d,success:!0})},function(_){L.postMessage({sourceName:T,targetName:D,stream:a.START_COMPLETE,streamId:d,reason:u(_)})})},f=new WeakSet,Wt=function(y){const d=y.streamId,T=this.sourceName,D=y.sourceName,L=this.comObj,k=this.streamControllers[d],l=this.streamSinks[d];switch(y.stream){case a.START_COMPLETE:y.success?k.startCall.resolve():k.startCall.reject(u(y.reason));break;case a.PULL_COMPLETE:y.success?k.pullCall.resolve():k.pullCall.reject(u(y.reason));break;case a.PULL:if(!l){L.postMessage({sourceName:T,targetName:D,stream:a.PULL_COMPLETE,streamId:d,success:!0});break}l.desiredSize<=0&&y.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=y.desiredSize,new Promise(function(b){var _;b((_=l.onPull)==null?void 0:_.call(l))}).then(function(){L.postMessage({sourceName:T,targetName:D,stream:a.PULL_COMPLETE,streamId:d,success:!0})},function(b){L.postMessage({sourceName:T,targetName:D,stream:a.PULL_COMPLETE,streamId:d,reason:u(b)})});break;case a.ENQUEUE:if((0,n.assert)(k,"enqueue should have stream controller"),k.isClosed)break;k.controller.enqueue(y.chunk);break;case a.CLOSE:if((0,n.assert)(k,"close should have stream controller"),k.isClosed)break;k.isClosed=!0,k.controller.close(),ce(this,C,ot).call(this,k,d);break;case a.ERROR:(0,n.assert)(k,"error should have stream controller"),k.controller.error(u(y.reason)),ce(this,C,ot).call(this,k,d);break;case a.CANCEL_COMPLETE:y.success?k.cancelCall.resolve():k.cancelCall.reject(u(y.reason)),ce(this,C,ot).call(this,k,d);break;case a.CANCEL:if(!l)break;new Promise(function(b){var _;b((_=l.onCancel)==null?void 0:_.call(l,u(y.reason)))}).then(function(){L.postMessage({sourceName:T,targetName:D,stream:a.CANCEL_COMPLETE,streamId:d,success:!0})},function(b){L.postMessage({sourceName:T,targetName:D,stream:a.CANCEL_COMPLETE,streamId:d,reason:u(b)})}),l.sinkCapability.reject(u(y.reason)),l.isCancelled=!0,delete this.streamSinks[d];break;default:throw new Error("Unexpected stream case")}},C=new WeakSet,ot=async function(y,d){var T,D,L;await Promise.allSettled([(T=y.startCall)==null?void 0:T.promise,(D=y.pullCall)==null?void 0:D.promise,(L=y.cancelCall)==null?void 0:L.promise]),delete this.streamControllers[d]},t.MessageHandler=x},(e,t,s)=>{var a,u;Object.defineProperty(t,"__esModule",{value:!0}),t.Metadata=void 0;var n=s(1);class i{constructor({parsedData:w,rawData:E}){re(this,a,void 0);re(this,u,void 0);ge(this,a,w),ge(this,u,E)}getRaw(){return O(this,u)}get(w){return O(this,a).get(w)??null}getAll(){return(0,n.objectFromMap)(O(this,a))}has(w){return O(this,a).has(w)}}a=new WeakMap,u=new WeakMap,t.Metadata=i},(e,t,s)=>{var w,E,f,N,C,I,At;Object.defineProperty(t,"__esModule",{value:!0}),t.OptionalContentConfig=void 0;var n=s(1),i=s(8);const a=Symbol("INTERNAL");class u{constructor(d,T){re(this,w,!0);this.name=d,this.intent=T}get visible(){return O(this,w)}_setVisible(d,T){d!==a&&(0,n.unreachable)("Internal method `_setVisible` called."),ge(this,w,T)}}w=new WeakMap;class x{constructor(d){re(this,I);re(this,E,null);re(this,f,new Map);re(this,N,null);re(this,C,null);if(this.name=null,this.creator=null,d!==null){this.name=d.name,this.creator=d.creator,ge(this,C,d.order);for(const T of d.groups)O(this,f).set(T.id,new u(T.name,T.intent));if(d.baseState==="OFF")for(const T of O(this,f).values())T._setVisible(a,!1);for(const T of d.on)O(this,f).get(T)._setVisible(a,!0);for(const T of d.off)O(this,f).get(T)._setVisible(a,!1);ge(this,N,this.getHash())}}isVisible(d){if(O(this,f).size===0)return!0;if(!d)return(0,n.warn)("Optional content group not defined."),!0;if(d.type==="OCG")return O(this,f).has(d.id)?O(this,f).get(d.id).visible:((0,n.warn)(`Optional content group not found: ${d.id}`),!0);if(d.type==="OCMD"){if(d.expression)return ce(this,I,At).call(this,d.expression);if(!d.policy||d.policy==="AnyOn"){for(const T of d.ids){if(!O(this,f).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(O(this,f).get(T).visible)return!0}return!1}else if(d.policy==="AllOn"){for(const T of d.ids){if(!O(this,f).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(!O(this,f).get(T).visible)return!1}return!0}else if(d.policy==="AnyOff"){for(const T of d.ids){if(!O(this,f).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(!O(this,f).get(T).visible)return!0}return!1}else if(d.policy==="AllOff"){for(const T of d.ids){if(!O(this,f).has(T))return(0,n.warn)(`Optional content group not found: ${T}`),!0;if(O(this,f).get(T).visible)return!1}return!0}return(0,n.warn)(`Unknown optional content policy ${d.policy}.`),!0}return(0,n.warn)(`Unknown group type ${d.type}.`),!0}setVisibility(d,T=!0){if(!O(this,f).has(d)){(0,n.warn)(`Optional content group not found: ${d}`);return}O(this,f).get(d)._setVisible(a,!!T),ge(this,E,null)}get hasInitialVisibility(){return this.getHash()===O(this,N)}getOrder(){return O(this,f).size?O(this,C)?O(this,C).slice():[...O(this,f).keys()]:null}getGroups(){return O(this,f).size>0?(0,n.objectFromMap)(O(this,f)):null}getGroup(d){return O(this,f).get(d)||null}getHash(){if(O(this,E)!==null)return O(this,E);const d=new i.MurmurHash3_64;for(const[T,D]of O(this,f))d.update(`${T}:${D.visible}`);return ge(this,E,d.hexdigest())}}E=new WeakMap,f=new WeakMap,N=new WeakMap,C=new WeakMap,I=new WeakSet,At=function(d){const T=d.length;if(T<2)return!0;const D=d[0];for(let L=1;L<T;L++){const k=d[L];let l;if(Array.isArray(k))l=ce(this,I,At).call(this,k);else if(O(this,f).has(k))l=O(this,f).get(k).visible;else return(0,n.warn)(`Optional content group not found: ${k}`),!0;switch(D){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return D==="And"},t.OptionalContentConfig=x},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFDataTransportStream=void 0;var n=s(1),i=s(6);class a{constructor({length:E,initialData:f,progressiveDone:N=!1,contentDispositionFilename:C=null,disableRange:I=!1,disableStream:v=!1},y){if((0,n.assert)(y,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=N,this._contentDispositionFilename=C,(f==null?void 0:f.length)>0){const d=f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer;this._queuedChunks.push(d)}this._pdfDataRangeTransport=y,this._isStreamingSupported=!v,this._isRangeSupported=!I,this._contentLength=E,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((d,T)=>{this._onReceiveData({begin:d,chunk:T})}),this._pdfDataRangeTransport.addProgressListener((d,T)=>{this._onProgress({loaded:d,total:T})}),this._pdfDataRangeTransport.addProgressiveReadListener(d=>{this._onReceiveData({chunk:d})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:E,chunk:f}){const N=f instanceof Uint8Array&&f.byteLength===f.buffer.byteLength?f.buffer:new Uint8Array(f).buffer;if(E===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(N):this._queuedChunks.push(N);else{const C=this._rangeReaders.some(function(I){return I._begin!==E?!1:(I._enqueue(N),!0)});(0,n.assert)(C,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var E;return((E=this._fullRequestReader)==null?void 0:E._loaded)??0}_onProgress(E){var f,N,C,I;E.total===void 0?(N=(f=this._rangeReaders[0])==null?void 0:f.onProgress)==null||N.call(f,{loaded:E.loaded}):(I=(C=this._fullRequestReader)==null?void 0:C.onProgress)==null||I.call(C,{loaded:E.loaded,total:E.total})}_onProgressiveDone(){var E;(E=this._fullRequestReader)==null||E.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(E){const f=this._rangeReaders.indexOf(E);f>=0&&this._rangeReaders.splice(f,1)}getFullReader(){(0,n.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const E=this._queuedChunks;return this._queuedChunks=null,new u(this,E,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(E,f){if(f<=this._progressiveDataLength)return null;const N=new x(this,E,f);return this._pdfDataRangeTransport.requestDataRange(E,f),this._rangeReaders.push(N),N}cancelAllRequests(E){var f;(f=this._fullRequestReader)==null||f.cancel(E);for(const N of this._rangeReaders.slice(0))N.cancel(E);this._pdfDataRangeTransport.abort()}}t.PDFDataTransportStream=a;class u{constructor(E,f,N=!1,C=null){this._stream=E,this._done=N||!1,this._filename=(0,i.isPdfFile)(C)?C:null,this._queuedChunks=f||[],this._loaded=0;for(const I of this._queuedChunks)this._loaded+=I.byteLength;this._requests=[],this._headersReady=Promise.resolve(),E._fullRequestReader=this,this.onProgress=null}_enqueue(E){this._done||(this._requests.length>0?this._requests.shift().resolve({value:E,done:!1}):this._queuedChunks.push(E),this._loaded+=E.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const E=new n.PromiseCapability;return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class x{constructor(E,f,N){this._stream=E,this._begin=f,this._end=N,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(E){if(!this._done){if(this._requests.length===0)this._queuedChunk=E;else{this._requests.shift().resolve({value:E,done:!1});for(const N of this._requests)N.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const f=this._queuedChunk;return this._queuedChunk=null,{value:f,done:!1}}if(this._done)return{value:void 0,done:!0};const E=new n.PromiseCapability;return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaText=void 0;class s{static textContent(i){const a=[],u={items:a,styles:Object.create(null)};function x(w){var N;if(!w)return;let E=null;const f=w.name;if(f==="#text")E=w.value;else if(s.shouldBuildText(f))(N=w==null?void 0:w.attributes)!=null&&N.textContent?E=w.attributes.textContent:w.value&&(E=w.value);else return;if(E!==null&&a.push({str:E}),!!w.children)for(const C of w.children)x(C)}return x(i),u}static shouldBuildText(i){return!(i==="textarea"||i==="input"||i==="option"||i==="select")}}t.XfaText=s},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NodeStandardFontDataFactory=t.NodeFilterFactory=t.NodeCanvasFactory=t.NodeCMapReaderFactory=void 0;var n=s(7);const i=function(E){return new Promise((f,N)=>{require$$5.readFile(E,(I,v)=>{if(I||!v){N(new Error(I));return}f(new Uint8Array(v))})})};class a extends n.BaseFilterFactory{}t.NodeFilterFactory=a;class u extends n.BaseCanvasFactory{_createCanvas(f,N){return require$$5.createCanvas(f,N)}}t.NodeCanvasFactory=u;class x extends n.BaseCMapReaderFactory{_fetchData(f,N){return i(f).then(C=>({cMapData:C,compressionType:N}))}}t.NodeCMapReaderFactory=x;class w extends n.BaseStandardFontDataFactory{_fetchData(f){return i(f)}}t.NodeStandardFontDataFactory=w},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNodeStream=void 0;var n=s(1),i=s(22);const a=require$$5,u=require$$5,x=require$$5,w=require$$5,E=/^file:\/\/\/[a-zA-Z]:\//;function f(L){const k=w.parse(L);return k.protocol==="file:"||k.host?k:/^[a-z]:[/\\]/i.test(L)?w.parse(`file:///${L}`):(k.host||(k.protocol="file:"),k)}class N{constructor(k){this.source=k,this.url=f(k.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&k.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var k;return((k=this._fullRequestReader)==null?void 0:k._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new T(this):new y(this),this._fullRequestReader}getRangeReader(k,l){if(l<=this._progressiveDataLength)return null;const b=this.isFsUrl?new D(this,k,l):new d(this,k,l);return this._rangeRequestReaders.push(b),b}cancelAllRequests(k){var l;(l=this._fullRequestReader)==null||l.cancel(k);for(const b of this._rangeRequestReaders.slice(0))b.cancel(k)}}t.PDFNodeStream=N;class C{constructor(k){this._url=k.url,this._done=!1,this._storedError=null,this.onProgress=null;const l=k.source;this._contentLength=l.length,this._loaded=0,this._filename=null,this._disableRange=l.disableRange||!1,this._rangeChunkSize=l.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!l.disableStream,this._isRangeSupported=!l.disableRange,this._readableStream=null,this._readCapability=new n.PromiseCapability,this._headersCapability=new n.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var b;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const k=this._readableStream.read();return k===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=k.length,(b=this.onProgress)==null||b.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(k).buffer,done:!1})}cancel(k){if(!this._readableStream){this._error(k);return}this._readableStream.destroy(k)}_error(k){this._storedError=k,this._readCapability.resolve()}_setReadableStream(k){this._readableStream=k,k.on("readable",()=>{this._readCapability.resolve()}),k.on("end",()=>{k.destroy(),this._done=!0,this._readCapability.resolve()}),k.on("error",l=>{this._error(l)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new n.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class I{constructor(k){this._url=k.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new n.PromiseCapability;const l=k.source;this._isStreamingSupported=!l.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var b;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const k=this._readableStream.read();return k===null?(this._readCapability=new n.PromiseCapability,this.read()):(this._loaded+=k.length,(b=this.onProgress)==null||b.call(this,{loaded:this._loaded}),{value:new Uint8Array(k).buffer,done:!1})}cancel(k){if(!this._readableStream){this._error(k);return}this._readableStream.destroy(k)}_error(k){this._storedError=k,this._readCapability.resolve()}_setReadableStream(k){this._readableStream=k,k.on("readable",()=>{this._readCapability.resolve()}),k.on("end",()=>{k.destroy(),this._done=!0,this._readCapability.resolve()}),k.on("error",l=>{this._error(l)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function v(L,k){return{protocol:L.protocol,auth:L.auth,host:L.hostname,port:L.port,path:L.path,method:"GET",headers:k}}class y extends C{constructor(k){super(k);const l=b=>{if(b.statusCode===404){const j=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=j,this._headersCapability.reject(j);return}this._headersCapability.resolve(),this._setReadableStream(b);const _=j=>this._readableStream.headers[j.toLowerCase()],{allowRangeRequests:c,suggestedLength:S}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:k.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=S||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(_)};this._request=null,this._url.protocol==="http:"?this._request=u.request(v(this._url,k.httpHeaders),l):this._request=x.request(v(this._url,k.httpHeaders),l),this._request.on("error",b=>{this._storedError=b,this._headersCapability.reject(b)}),this._request.end()}}class d extends I{constructor(k,l,b){super(k),this._httpHeaders={};for(const c in k.httpHeaders){const S=k.httpHeaders[c];S!==void 0&&(this._httpHeaders[c]=S)}this._httpHeaders.Range=`bytes=${l}-${b-1}`;const _=c=>{if(c.statusCode===404){const S=new n.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=S;return}this._setReadableStream(c)};this._request=null,this._url.protocol==="http:"?this._request=u.request(v(this._url,this._httpHeaders),_):this._request=x.request(v(this._url,this._httpHeaders),_),this._request.on("error",c=>{this._storedError=c}),this._request.end()}}class T extends C{constructor(k){super(k);let l=decodeURIComponent(this._url.path);E.test(this._url.href)&&(l=l.replace(/^\//,"")),a.lstat(l,(b,_)=>{if(b){b.code==="ENOENT"&&(b=new n.MissingPDFException(`Missing PDF "${l}".`)),this._storedError=b,this._headersCapability.reject(b);return}this._contentLength=_.size,this._setReadableStream(a.createReadStream(l)),this._headersCapability.resolve()})}}class D extends I{constructor(k,l,b){super(k);let _=decodeURIComponent(this._url.path);E.test(this._url.href)&&(_=_.replace(/^\//,"")),this._setReadableStream(a.createReadStream(_,{start:l,end:b-1}))}}},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.createResponseStatusError=w,t.extractFilenameFromHeader=x,t.validateRangeRequestCapabilities=u,t.validateResponseStatus=E;var n=s(1),i=s(23),a=s(6);function u({getResponseHeader:f,isHttp:N,rangeChunkSize:C,disableRange:I}){const v={allowRangeRequests:!1,suggestedLength:void 0},y=parseInt(f("Content-Length"),10);return!Number.isInteger(y)||(v.suggestedLength=y,y<=2*C)||I||!N||f("Accept-Ranges")!=="bytes"||(f("Content-Encoding")||"identity")!=="identity"||(v.allowRangeRequests=!0),v}function x(f){const N=f("Content-Disposition");if(N){let C=(0,i.getFilenameFromContentDispositionHeader)(N);if(C.includes("%"))try{C=decodeURIComponent(C)}catch{}if((0,a.isPdfFile)(C))return C}return null}function w(f,N){return f===404||f===0&&N.startsWith("file:")?new n.MissingPDFException('Missing PDF "'+N+'".'):new n.UnexpectedResponseException(`Unexpected server response (${f}) while retrieving PDF "${N}".`,f)}function E(f){return f===200||f===206}},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getFilenameFromContentDispositionHeader=i;var n=s(1);function i(a){let u=!0,x=w("filename\\*","i").exec(a);if(x){x=x[1];let y=C(x);return y=unescape(y),y=I(y),y=v(y),f(y)}if(x=N(a),x){const y=v(x);return f(y)}if(x=w("filename","i").exec(a),x){x=x[1];let y=C(x);return y=v(y),f(y)}function w(y,d){return new RegExp("(?:^|;)\\s*"+y+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',d)}function E(y,d){if(y){if(!/^[\x00-\xFF]+$/.test(d))return d;try{const T=new TextDecoder(y,{fatal:!0}),D=(0,n.stringToBytes)(d);d=T.decode(D),u=!1}catch{}}return d}function f(y){return u&&/[\x80-\xff]/.test(y)&&(y=E("utf-8",y),u&&(y=E("iso-8859-1",y))),y}function N(y){const d=[];let T;const D=w("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(T=D.exec(y))!==null;){let[,k,l,b]=T;if(k=parseInt(k,10),k in d){if(k===0)break;continue}d[k]=[l,b]}const L=[];for(let k=0;k<d.length&&k in d;++k){let[l,b]=d[k];b=C(b),l&&(b=unescape(b),k===0&&(b=I(b))),L.push(b)}return L.join("")}function C(y){if(y.startsWith('"')){const d=y.slice(1).split('\\"');for(let T=0;T<d.length;++T){const D=d[T].indexOf('"');D!==-1&&(d[T]=d[T].slice(0,D),d.length=T+1),d[T]=d[T].replaceAll(/\\(.)/g,"$1")}y=d.join('"')}return y}function I(y){const d=y.indexOf("'");if(d===-1)return y;const T=y.slice(0,d),L=y.slice(d+1).replace(/^[^']*'/,"");return E(T,L)}function v(y){return!y.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(y)?y:y.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(d,T,D,L){if(D==="q"||D==="Q")return L=L.replaceAll("_"," "),L=L.replaceAll(/=([0-9a-fA-F]{2})/g,function(k,l){return String.fromCharCode(parseInt(l,16))}),E(T,L);try{L=atob(L)}catch{}return E(T,L)})}return""}},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFNetworkStream=void 0;var n=s(1),i=s(22);const a=200,u=206;function x(C){const I=C.response;return typeof I!="string"?I:(0,n.stringToBytes)(I).buffer}class w{constructor(I,v={}){this.url=I,this.isHttp=/^https?:/i.test(I),this.httpHeaders=this.isHttp&&v.httpHeaders||Object.create(null),this.withCredentials=v.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(I,v,y){const d={begin:I,end:v};for(const T in y)d[T]=y[T];return this.request(d)}requestFull(I){return this.request(I)}request(I){const v=new XMLHttpRequest,y=this.currXhrId++,d=this.pendingRequests[y]={xhr:v};v.open("GET",this.url),v.withCredentials=this.withCredentials;for(const T in this.httpHeaders){const D=this.httpHeaders[T];D!==void 0&&v.setRequestHeader(T,D)}return this.isHttp&&"begin"in I&&"end"in I?(v.setRequestHeader("Range",`bytes=${I.begin}-${I.end-1}`),d.expectedStatus=u):d.expectedStatus=a,v.responseType="arraybuffer",I.onError&&(v.onerror=function(T){I.onError(v.status)}),v.onreadystatechange=this.onStateChange.bind(this,y),v.onprogress=this.onProgress.bind(this,y),d.onHeadersReceived=I.onHeadersReceived,d.onDone=I.onDone,d.onError=I.onError,d.onProgress=I.onProgress,v.send(null),y}onProgress(I,v){var d;const y=this.pendingRequests[I];y&&((d=y.onProgress)==null||d.call(y,v))}onStateChange(I,v){var k,l,b;const y=this.pendingRequests[I];if(!y)return;const d=y.xhr;if(d.readyState>=2&&y.onHeadersReceived&&(y.onHeadersReceived(),delete y.onHeadersReceived),d.readyState!==4||!(I in this.pendingRequests))return;if(delete this.pendingRequests[I],d.status===0&&this.isHttp){(k=y.onError)==null||k.call(y,d.status);return}const T=d.status||a;if(!(T===a&&y.expectedStatus===u)&&T!==y.expectedStatus){(l=y.onError)==null||l.call(y,d.status);return}const L=x(d);if(T===u){const _=d.getResponseHeader("Content-Range"),c=/bytes (\d+)-(\d+)\/(\d+)/.exec(_);y.onDone({begin:parseInt(c[1],10),chunk:L})}else L?y.onDone({begin:0,chunk:L}):(b=y.onError)==null||b.call(y,d.status)}getRequestXhr(I){return this.pendingRequests[I].xhr}isPendingRequest(I){return I in this.pendingRequests}abortRequest(I){const v=this.pendingRequests[I].xhr;delete this.pendingRequests[I],v.abort()}}class E{constructor(I){this._source=I,this._manager=new w(I.url,{httpHeaders:I.httpHeaders,withCredentials:I.withCredentials}),this._rangeChunkSize=I.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(I){const v=this._rangeRequestReaders.indexOf(I);v>=0&&this._rangeRequestReaders.splice(v,1)}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new f(this._manager,this._source),this._fullRequestReader}getRangeReader(I,v){const y=new N(this._manager,I,v);return y.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(y),y}cancelAllRequests(I){var v;(v=this._fullRequestReader)==null||v.cancel(I);for(const y of this._rangeRequestReaders.slice(0))y.cancel(I)}}t.PDFNetworkStream=E;class f{constructor(I,v){this._manager=I;const y={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=v.url,this._fullRequestId=I.requestFull(y),this._headersReceivedCapability=new n.PromiseCapability,this._disableRange=v.disableRange||!1,this._contentLength=v.length,this._rangeChunkSize=v.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const I=this._fullRequestId,v=this._manager.getRequestXhr(I),y=D=>v.getResponseHeader(D),{allowRangeRequests:d,suggestedLength:T}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:y,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});d&&(this._isRangeSupported=!0),this._contentLength=T||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(y),this._isRangeSupported&&this._manager.abortRequest(I),this._headersReceivedCapability.resolve()}_onDone(I){if(I&&(this._requests.length>0?this._requests.shift().resolve({value:I.chunk,done:!1}):this._cachedChunks.push(I.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(I){this._storedError=(0,i.createResponseStatusError)(I,this._url),this._headersReceivedCapability.reject(this._storedError);for(const v of this._requests)v.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(I){var v;(v=this.onProgress)==null||v.call(this,{loaded:I.loaded,total:I.lengthComputable?I.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const I=new n.PromiseCapability;return this._requests.push(I),I.promise}cancel(I){this._done=!0,this._headersReceivedCapability.reject(I);for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class N{constructor(I,v,y){this._manager=I;const d={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=I.url,this._requestId=I.requestRange(v,y,d),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var I;(I=this.onClosed)==null||I.call(this,this)}_onDone(I){const v=I.chunk;this._requests.length>0?this._requests.shift().resolve({value:v,done:!1}):this._queuedChunk=v,this._done=!0;for(const y of this._requests)y.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(I){this._storedError=(0,i.createResponseStatusError)(I,this._url);for(const v of this._requests)v.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(I){var v;this.isStreamingSupported||(v=this.onProgress)==null||v.call(this,{loaded:I.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const v=this._queuedChunk;return this._queuedChunk=null,{value:v,done:!1}}if(this._done)return{value:void 0,done:!0};const I=new n.PromiseCapability;return this._requests.push(I),I.promise}cancel(I){this._done=!0;for(const v of this._requests)v.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.PDFFetchStream=void 0;var n=s(1),i=s(22);function a(N,C,I){return{method:"GET",headers:N,signal:I.signal,mode:"cors",credentials:C?"include":"same-origin",redirect:"follow"}}function u(N){const C=new Headers;for(const I in N){const v=N[I];v!==void 0&&C.append(I,v)}return C}function x(N){return N instanceof Uint8Array?N.buffer:N instanceof ArrayBuffer?N:((0,n.warn)(`getArrayBuffer - unexpected data format: ${N}`),new Uint8Array(N).buffer)}class w{constructor(C){this.source=C,this.isHttp=/^https?:/i.test(C.url),this.httpHeaders=this.isHttp&&C.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var C;return((C=this._fullRequestReader)==null?void 0:C._loaded)??0}getFullReader(){return(0,n.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new E(this),this._fullRequestReader}getRangeReader(C,I){if(I<=this._progressiveDataLength)return null;const v=new f(this,C,I);return this._rangeRequestReaders.push(v),v}cancelAllRequests(C){var I;(I=this._fullRequestReader)==null||I.cancel(C);for(const v of this._rangeRequestReaders.slice(0))v.cancel(C)}}t.PDFFetchStream=w;class E{constructor(C){this._stream=C,this._reader=null,this._loaded=0,this._filename=null;const I=C.source;this._withCredentials=I.withCredentials||!1,this._contentLength=I.length,this._headersCapability=new n.PromiseCapability,this._disableRange=I.disableRange||!1,this._rangeChunkSize=I.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!I.disableStream,this._isRangeSupported=!I.disableRange,this._headers=u(this._stream.httpHeaders);const v=I.url;fetch(v,a(this._headers,this._withCredentials,this._abortController)).then(y=>{if(!(0,i.validateResponseStatus)(y.status))throw(0,i.createResponseStatusError)(y.status,v);this._reader=y.body.getReader(),this._headersCapability.resolve();const d=L=>y.headers.get(L),{allowRangeRequests:T,suggestedLength:D}=(0,i.validateRangeRequestCapabilities)({getResponseHeader:d,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=T,this._contentLength=D||this._contentLength,this._filename=(0,i.extractFilenameFromHeader)(d),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new n.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;await this._headersCapability.promise;const{value:C,done:I}=await this._reader.read();return I?{value:C,done:I}:(this._loaded+=C.byteLength,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded,total:this._contentLength}),{value:x(C),done:!1})}cancel(C){var I;(I=this._reader)==null||I.cancel(C),this._abortController.abort()}}class f{constructor(C,I,v){this._stream=C,this._reader=null,this._loaded=0;const y=C.source;this._withCredentials=y.withCredentials||!1,this._readCapability=new n.PromiseCapability,this._isStreamingSupported=!y.disableStream,this._abortController=new AbortController,this._headers=u(this._stream.httpHeaders),this._headers.append("Range",`bytes=${I}-${v-1}`);const d=y.url;fetch(d,a(this._headers,this._withCredentials,this._abortController)).then(T=>{if(!(0,i.validateResponseStatus)(T.status))throw(0,i.createResponseStatusError)(T.status,d);this._readCapability.resolve(),this._reader=T.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var v;await this._readCapability.promise;const{value:C,done:I}=await this._reader.read();return I?{value:C,done:I}:(this._loaded+=C.byteLength,(v=this.onProgress)==null||v.call(this,{loaded:this._loaded}),{value:x(C),done:!1})}cancel(C){var I;(I=this._reader)==null||I.cancel(C),this._abortController.abort()}}},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.TextLayerRenderTask=void 0,t.renderTextLayer=y,t.updateTextLayer=d;var n=s(1),i=s(6);const a=1e5,u=30,x=.8,w=new Map;function E(T,D){let L;if(D&&n.FeatureTest.isOffscreenCanvasSupported)L=new OffscreenCanvas(T,T).getContext("2d",{alpha:!1});else{const k=document.createElement("canvas");k.width=k.height=T,L=k.getContext("2d",{alpha:!1})}return L}function f(T,D){const L=w.get(T);if(L)return L;const k=E(u,D);k.font=`${u}px ${T}`;const l=k.measureText("");let b=l.fontBoundingBoxAscent,_=Math.abs(l.fontBoundingBoxDescent);if(b){const S=b/(b+_);return w.set(T,S),k.canvas.width=k.canvas.height=0,S}k.strokeStyle="red",k.clearRect(0,0,u,u),k.strokeText("g",0,0);let c=k.getImageData(0,0,u,u).data;_=0;for(let S=c.length-1-3;S>=0;S-=4)if(c[S]>0){_=Math.ceil(S/4/u);break}k.clearRect(0,0,u,u),k.strokeText("A",0,u),c=k.getImageData(0,0,u,u).data,b=0;for(let S=0,j=c.length;S<j;S+=4)if(c[S]>0){b=u-Math.floor(S/4/u);break}if(k.canvas.width=k.canvas.height=0,b){const S=b/(b+_);return w.set(T,S),S}return w.set(T,x),x}function N(T,D,L){const k=document.createElement("span"),l={angle:0,canvasWidth:0,hasText:D.str!=="",hasEOL:D.hasEOL,fontSize:0};T._textDivs.push(k);const b=n.Util.transform(T._transform,D.transform);let _=Math.atan2(b[1],b[0]);const c=L[D.fontName];c.vertical&&(_+=Math.PI/2);const S=Math.hypot(b[2],b[3]),j=S*f(c.fontFamily,T._isOffscreenCanvasSupported);let m,V;_===0?(m=b[4],V=b[5]-j):(m=b[4]+j*Math.sin(_),V=b[5]-j*Math.cos(_));const Y="calc(var(--scale-factor)*",se=k.style;T._container===T._rootContainer?(se.left=`${(100*m/T._pageWidth).toFixed(2)}%`,se.top=`${(100*V/T._pageHeight).toFixed(2)}%`):(se.left=`${Y}${m.toFixed(2)}px)`,se.top=`${Y}${V.toFixed(2)}px)`),se.fontSize=`${Y}${S.toFixed(2)}px)`,se.fontFamily=c.fontFamily,l.fontSize=S,k.setAttribute("role","presentation"),k.textContent=D.str,k.dir=D.dir,T._fontInspectorEnabled&&(k.dataset.fontName=D.fontName),_!==0&&(l.angle=_*(180/Math.PI));let ie=!1;if(D.str.length>1)ie=!0;else if(D.str!==" "&&D.transform[0]!==D.transform[3]){const oe=Math.abs(D.transform[0]),de=Math.abs(D.transform[3]);oe!==de&&Math.max(oe,de)/Math.min(oe,de)>1.5&&(ie=!0)}ie&&(l.canvasWidth=c.vertical?D.height:D.width),T._textDivProperties.set(k,l),T._isReadableStream&&T._layoutText(k)}function C(T){const{div:D,scale:L,properties:k,ctx:l,prevFontSize:b,prevFontFamily:_}=T,{style:c}=D;let S="";if(k.canvasWidth!==0&&k.hasText){const{fontFamily:j}=c,{canvasWidth:m,fontSize:V}=k;(b!==V||_!==j)&&(l.font=`${V*L}px ${j}`,T.prevFontSize=V,T.prevFontFamily=j);const{width:Y}=l.measureText(D.textContent);Y>0&&(S=`scaleX(${m*L/Y})`)}k.angle!==0&&(S=`rotate(${k.angle}deg) ${S}`),S.length>0&&(c.transform=S)}function I(T){if(T._canceled)return;const D=T._textDivs,L=T._capability;if(D.length>a){L.resolve();return}if(!T._isReadableStream)for(const l of D)T._layoutText(l);L.resolve()}class v{constructor({textContentSource:D,container:L,viewport:k,textDivs:l,textDivProperties:b,textContentItemsStr:_,isOffscreenCanvasSupported:c}){var Y;this._textContentSource=D,this._isReadableStream=D instanceof ReadableStream,this._container=this._rootContainer=L,this._textDivs=l||[],this._textContentItemsStr=_||[],this._isOffscreenCanvasSupported=c,this._fontInspectorEnabled=!!((Y=globalThis.FontInspector)!=null&&Y.enabled),this._reader=null,this._textDivProperties=b||new WeakMap,this._canceled=!1,this._capability=new n.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:k.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:E(0,c)};const{pageWidth:S,pageHeight:j,pageX:m,pageY:V}=k.rawDims;this._transform=[1,0,0,-1,-m,V+j],this._pageWidth=S,this._pageHeight=j,(0,i.setLayerDimensions)(L,k),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new n.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new n.AbortException("TextLayer task cancelled."))}_processItems(D,L){for(const k of D){if(k.str===void 0){if(k.type==="beginMarkedContentProps"||k.type==="beginMarkedContent"){const l=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),k.id!==null&&this._container.setAttribute("id",`${k.id}`),l.append(this._container)}else k.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(k.str),N(this,k,L)}}_layoutText(D){const L=this._layoutTextParams.properties=this._textDivProperties.get(D);if(this._layoutTextParams.div=D,C(this._layoutTextParams),L.hasText&&this._container.append(D),L.hasEOL){const k=document.createElement("br");k.setAttribute("role","presentation"),this._container.append(k)}}_render(){const D=new n.PromiseCapability;let L=Object.create(null);if(this._isReadableStream){const k=()=>{this._reader.read().then(({value:l,done:b})=>{if(b){D.resolve();return}Object.assign(L,l.styles),this._processItems(l.items,L),k()},D.reject)};this._reader=this._textContentSource.getReader(),k()}else if(this._textContentSource){const{items:k,styles:l}=this._textContentSource;this._processItems(k,l),D.resolve()}else throw new Error('No "textContentSource" parameter specified.');D.promise.then(()=>{L=null,I(this)},this._capability.reject)}}t.TextLayerRenderTask=v;function y(T){!T.textContentSource&&(T.textContent||T.textContentStream)&&((0,i.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),T.textContentSource=T.textContent||T.textContentStream);const{container:D,viewport:L}=T,k=getComputedStyle(D),l=k.getPropertyValue("visibility"),b=parseFloat(k.getPropertyValue("--scale-factor"));l==="visible"&&(!b||Math.abs(b-L.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const _=new v(T);return _._render(),_}function d({container:T,viewport:D,textDivs:L,textDivProperties:k,isOffscreenCanvasSupported:l,mustRotate:b=!0,mustRescale:_=!0}){if(b&&(0,i.setLayerDimensions)(T,{rotation:D.rotation}),_){const c=E(0,l),j={prevFontSize:null,prevFontFamily:null,div:null,scale:D.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:c};for(const m of L)j.properties=k.get(m),j.div=m,C(j)}}},(e,t,s)=>{var E,f,N,C,I,v,y,d,T,vt,L,Vt,l,St,_,Et;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationEditorLayer=void 0;var n=s(1),i=s(5),a=s(28),u=s(29),x=s(6);const S=class{constructor(m){re(this,T);re(this,L);re(this,l);re(this,_);re(this,E,void 0);re(this,f,!1);re(this,N,this.pointerup.bind(this));re(this,C,this.pointerdown.bind(this));re(this,I,new Map);re(this,v,!1);re(this,y,!1);re(this,d,void 0);S._initialized||(S._initialized=!0,a.FreeTextEditor.initialize(m.l10n),u.InkEditor.initialize(m.l10n)),m.uiManager.registerEditorTypes([a.FreeTextEditor,u.InkEditor]),ge(this,d,m.uiManager),this.pageIndex=m.pageIndex,this.div=m.div,ge(this,E,m.accessibilityManager),O(this,d).addLayer(this)}get isEmpty(){return O(this,I).size===0}updateToolbar(m){O(this,d).updateToolbar(m)}updateMode(m=O(this,d).getMode()){ce(this,_,Et).call(this),m===n.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),O(this,d).unselectAll(),m!==n.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",m===n.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",m===n.AnnotationEditorType.INK),this.div.hidden=!1)}addInkEditorIfNeeded(m){if(!m&&O(this,d).getMode()!==n.AnnotationEditorType.INK)return;if(!m){for(const Y of O(this,I).values())if(Y.isEmpty()){Y.setInBackground();return}}ce(this,l,St).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(m){O(this,d).setEditingState(m)}addCommands(m){O(this,d).addCommands(m)}enable(){this.div.style.pointerEvents="auto";for(const m of O(this,I).values())m.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const m of O(this,I).values())m.disableEditing();ce(this,_,Et).call(this),this.isEmpty&&(this.div.hidden=!0)}setActiveEditor(m){O(this,d).getActive()!==m&&O(this,d).setActiveEditor(m)}enableClick(){this.div.addEventListener("pointerdown",O(this,C)),this.div.addEventListener("pointerup",O(this,N))}disableClick(){this.div.removeEventListener("pointerdown",O(this,C)),this.div.removeEventListener("pointerup",O(this,N))}attach(m){O(this,I).set(m.id,m)}detach(m){var V;O(this,I).delete(m.id),(V=O(this,E))==null||V.removePointerInTextLayer(m.contentDiv)}remove(m){O(this,d).removeEditor(m),this.detach(m),m.div.style.display="none",setTimeout(()=>{m.div.style.display="",m.div.remove(),m.isAttachedToDOM=!1,document.activeElement===document.body&&O(this,d).focusMainContainer()},0),O(this,y)||this.addInkEditorIfNeeded(!1)}add(m){if(ce(this,T,vt).call(this,m),O(this,d).addEditor(m),this.attach(m),!m.isAttachedToDOM){const V=m.render();this.div.append(V),m.isAttachedToDOM=!0}this.moveEditorInDOM(m),m.onceAdded(),O(this,d).addToAnnotationStorage(m)}moveEditorInDOM(m){var V;(V=O(this,E))==null||V.moveElementInDOM(this.div,m.div,m.contentDiv,!0)}addOrRebuild(m){m.needsToBeRebuilt()?m.rebuild():this.add(m)}addANewEditor(m){const V=()=>{this.addOrRebuild(m)},Y=()=>{m.remove()};this.addCommands({cmd:V,undo:Y,mustExec:!0})}addUndoableEditor(m){const V=()=>{this.addOrRebuild(m)},Y=()=>{m.remove()};this.addCommands({cmd:V,undo:Y,mustExec:!1})}getNextId(){return O(this,d).getId()}deserialize(m){switch(m.annotationType){case n.AnnotationEditorType.FREETEXT:return a.FreeTextEditor.deserialize(m,this,O(this,d));case n.AnnotationEditorType.INK:return u.InkEditor.deserialize(m,this,O(this,d))}return null}setSelected(m){O(this,d).setSelected(m)}toggleSelected(m){O(this,d).toggleSelected(m)}isSelected(m){return O(this,d).isSelected(m)}unselect(m){O(this,d).unselect(m)}pointerup(m){const{isMac:V}=n.FeatureTest.platform;if(!(m.button!==0||m.ctrlKey&&V)&&m.target===this.div&&O(this,v)){if(ge(this,v,!1),!O(this,f)){ge(this,f,!0);return}ce(this,l,St).call(this,m)}}pointerdown(m){const{isMac:V}=n.FeatureTest.platform;if(m.button!==0||m.ctrlKey&&V||m.target!==this.div)return;ge(this,v,!0);const Y=O(this,d).getActive();ge(this,f,!Y||Y.isEmpty())}drop(m){const V=m.dataTransfer.getData("text/plain"),Y=O(this,d).getEditor(V);if(!Y)return;m.preventDefault(),m.dataTransfer.dropEffect="move",ce(this,T,vt).call(this,Y);const se=this.div.getBoundingClientRect(),ie=m.clientX-se.x,oe=m.clientY-se.y;Y.translate(ie-Y.startX,oe-Y.startY),this.moveEditorInDOM(Y),Y.div.focus()}dragover(m){m.preventDefault()}destroy(){var m,V;((m=O(this,d).getActive())==null?void 0:m.parent)===this&&O(this,d).setActiveEditor(null);for(const Y of O(this,I).values())(V=O(this,E))==null||V.removePointerInTextLayer(Y.contentDiv),Y.setParent(null),Y.isAttachedToDOM=!1,Y.div.remove();this.div=null,O(this,I).clear(),O(this,d).removeLayer(this)}render({viewport:m}){this.viewport=m,(0,x.setLayerDimensions)(this.div,m),(0,i.bindEvents)(this,this.div,["dragover","drop"]);for(const V of O(this,d).getEditors(this.pageIndex))this.add(V);this.updateMode()}update({viewport:m}){O(this,d).commitOrRemove(),this.viewport=m,(0,x.setLayerDimensions)(this.div,{rotation:m.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:m,pageHeight:V}=this.viewport.rawDims;return[m,V]}};let w=S;E=new WeakMap,f=new WeakMap,N=new WeakMap,C=new WeakMap,I=new WeakMap,v=new WeakMap,y=new WeakMap,d=new WeakMap,T=new WeakSet,vt=function(m){var V;m.parent!==this&&(this.attach(m),(V=m.parent)==null||V.detach(m),m.setParent(this),m.div&&m.isAttachedToDOM&&(m.div.remove(),this.div.append(m.div)))},L=new WeakSet,Vt=function(m){switch(O(this,d).getMode()){case n.AnnotationEditorType.FREETEXT:return new a.FreeTextEditor(m);case n.AnnotationEditorType.INK:return new u.InkEditor(m)}return null},l=new WeakSet,St=function(m){const V=this.getNextId(),Y=ce(this,L,Vt).call(this,{parent:this,id:V,x:m.offsetX,y:m.offsetY,uiManager:O(this,d)});return Y&&this.add(Y),Y},_=new WeakSet,Et=function(){ge(this,y,!0);for(const m of O(this,I).values())m.isEmpty()&&m.remove();ge(this,y,!1)},De(w,"_initialized",!1),t.AnnotationEditorLayer=w},(e,t,s)=>{var x,w,E,f,N,C,I,v,y,d,qt,D,zt,k,Gt,b,Ct;Object.defineProperty(t,"__esModule",{value:!0}),t.FreeTextEditor=void 0;var n=s(1),i=s(5),a=s(4);const c=class extends a.AnnotationEditor{constructor(m){super({...m,name:"freeTextEditor"});re(this,d);re(this,D);re(this,k);re(this,b);re(this,x,this.editorDivBlur.bind(this));re(this,w,this.editorDivFocus.bind(this));re(this,E,this.editorDivInput.bind(this));re(this,f,this.editorDivKeydown.bind(this));re(this,N,void 0);re(this,C,"");re(this,I,`${this.id}-editor`);re(this,v,!1);re(this,y,void 0);ge(this,N,m.color||c._defaultColor||a.AnnotationEditor._defaultLineColor),ge(this,y,m.fontSize||c._defaultFontSize)}static initialize(m){this._l10nPromise=new Map(["free_text2_default_content","editor_free_text2_aria_label"].map(Y=>[Y,m.get(Y)]));const V=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(V.getPropertyValue("--freetext-padding"))}static updateDefaultParams(m,V){switch(m){case n.AnnotationEditorParamsType.FREETEXT_SIZE:c._defaultFontSize=V;break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:c._defaultColor=V;break}}updateParams(m,V){switch(m){case n.AnnotationEditorParamsType.FREETEXT_SIZE:ce(this,d,qt).call(this,V);break;case n.AnnotationEditorParamsType.FREETEXT_COLOR:ce(this,D,zt).call(this,V);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,c._defaultFontSize],[n.AnnotationEditorParamsType.FREETEXT_COLOR,c._defaultColor||a.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.FREETEXT_SIZE,O(this,y)],[n.AnnotationEditorParamsType.FREETEXT_COLOR,O(this,N)]]}getInitialTranslation(){const m=this.parentScale;return[-c._internalPadding*m,-(c._internalPadding+O(this,y))*m]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(n.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",O(this,f)),this.editorDiv.addEventListener("focus",O(this,w)),this.editorDiv.addEventListener("blur",O(this,x)),this.editorDiv.addEventListener("input",O(this,E)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",O(this,I)),this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",O(this,f)),this.editorDiv.removeEventListener("focus",O(this,w)),this.editorDiv.removeEventListener("blur",O(this,x)),this.editorDiv.removeEventListener("input",O(this,E)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(m){super.focusin(m),m.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing"),super.remove()}commit(){this.isInEditMode()&&(super.commit(),O(this,v)||(ge(this,v,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),ge(this,C,ce(this,k,Gt).call(this).trimEnd()),ce(this,b,Ct).call(this))}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(m){this.enableEditMode(),this.editorDiv.focus()}keydown(m){m.target===this.div&&m.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(m){c._keyboardManager.exec(this,m)}editorDivFocus(m){this.isEditing=!0}editorDivBlur(m){this.isEditing=!1}editorDivInput(m){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let m,V;this.width&&(m=this.x,V=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",O(this,I)),this.enableEditing(),c._l10nPromise.get("editor_free_text2_aria_label").then(se=>{var ie;return(ie=this.editorDiv)==null?void 0:ie.setAttribute("aria-label",se)}),c._l10nPromise.get("free_text2_default_content").then(se=>{var ie;return(ie=this.editorDiv)==null?void 0:ie.setAttribute("default-content",se)}),this.editorDiv.contentEditable=!0;const{style:Y}=this.editorDiv;if(Y.fontSize=`calc(${O(this,y)}px * var(--scale-factor))`,Y.color=O(this,N),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,i.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[se,ie]=this.parentDimensions;this.setAt(m*se,V*ie,this.width*se,this.height*ie);for(const oe of O(this,C).split(`
`)){const de=document.createElement("div");de.append(oe?document.createTextNode(oe):document.createElement("br")),this.editorDiv.append(de)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(m,V,Y){const se=super.deserialize(m,V,Y);return ge(se,y,m.fontSize),ge(se,N,n.Util.makeHexColor(...m.color)),ge(se,C,m.value),se}serialize(){if(this.isEmpty())return null;const m=c._internalPadding*this.parentScale,V=this.getRect(m,m),Y=a.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:O(this,N));return{annotationType:n.AnnotationEditorType.FREETEXT,color:Y,fontSize:O(this,y),value:O(this,C),pageIndex:this.pageIndex,rect:V,rotation:this.rotation}}};let u=c;x=new WeakMap,w=new WeakMap,E=new WeakMap,f=new WeakMap,N=new WeakMap,C=new WeakMap,I=new WeakMap,v=new WeakMap,y=new WeakMap,d=new WeakSet,qt=function(m){const V=se=>{this.editorDiv.style.fontSize=`calc(${se}px * var(--scale-factor))`,this.translate(0,-(se-O(this,y))*this.parentScale),ge(this,y,se),ce(this,b,Ct).call(this)},Y=O(this,y);this.addCommands({cmd:()=>{V(m)},undo:()=>{V(Y)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},D=new WeakSet,zt=function(m){const V=O(this,N);this.addCommands({cmd:()=>{ge(this,N,this.editorDiv.style.color=m)},undo:()=>{ge(this,N,this.editorDiv.style.color=V)},mustExec:!0,type:n.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},k=new WeakSet,Gt=function(){const m=this.editorDiv.getElementsByTagName("div");if(m.length===0)return this.editorDiv.innerText;const V=[];for(const Y of m)V.push(Y.innerText.replace(/\r\n?|\n/,""));return V.join(`
`)},b=new WeakSet,Ct=function(){const[m,V]=this.parentDimensions;let Y;if(this.isAttachedToDOM)Y=this.div.getBoundingClientRect();else{const{currentLayer:se,div:ie}=this,oe=ie.style.display;ie.style.display="hidden",se.div.append(this.div),Y=ie.getBoundingClientRect(),ie.remove(),ie.style.display=oe}this.width=Y.width/m,this.height=Y.height/V},De(u,"_freeTextDefaultContent",""),De(u,"_l10nPromise"),De(u,"_internalPadding",0),De(u,"_defaultColor",null),De(u,"_defaultFontSize",10),De(u,"_keyboardManager",new i.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],c.prototype.commitOrRemove]])),De(u,"_type","freetext"),t.FreeTextEditor=u},(e,t,s)=>{var E,f,N,C,I,v,y,d,T,D,L,k,l,b,_,Xt,S,Kt,m,Yt,Y,Jt,ie,wt,de,Qt,pe,Zt,ve,en,Se,Ge,P,Tt,B,lt,q,ct,z,Ze,A,Pt,o,ut,F,xt,U,tn,W,nn,ee,sn,ne,kt,he,dt,me,et,te,Rt;Object.defineProperty(t,"__esModule",{value:!0}),t.InkEditor=void 0,Object.defineProperty(t,"fitCurve",{enumerable:!0,get:function(){return a.fitCurve}});var n=s(1),i=s(4),a=s(30),u=s(5);const x=16,Ee=class extends i.AnnotationEditor{constructor($){super({...$,name:"inkEditor"});re(this,_);re(this,S);re(this,m);re(this,Y);re(this,ie);re(this,de);re(this,pe);re(this,ve);re(this,Se);re(this,P);re(this,B);re(this,q);re(this,z);re(this,A);re(this,o);re(this,U);re(this,W);re(this,ee);re(this,ne);re(this,he);re(this,me);re(this,te);re(this,E,0);re(this,f,0);re(this,N,0);re(this,C,this.canvasPointermove.bind(this));re(this,I,this.canvasPointerleave.bind(this));re(this,v,this.canvasPointerup.bind(this));re(this,y,this.canvasPointerdown.bind(this));re(this,d,!1);re(this,T,!1);re(this,D,null);re(this,L,null);re(this,k,0);re(this,l,0);re(this,b,null);this.color=$.color||null,this.thickness=$.thickness||null,this.opacity=$.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize($){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink2_aria_label"].map(H=>[H,$.get(H)]))}static updateDefaultParams($,H){switch($){case n.AnnotationEditorParamsType.INK_THICKNESS:Ee._defaultThickness=H;break;case n.AnnotationEditorParamsType.INK_COLOR:Ee._defaultColor=H;break;case n.AnnotationEditorParamsType.INK_OPACITY:Ee._defaultOpacity=H/100;break}}updateParams($,H){switch($){case n.AnnotationEditorParamsType.INK_THICKNESS:ce(this,_,Xt).call(this,H);break;case n.AnnotationEditorParamsType.INK_COLOR:ce(this,S,Kt).call(this,H);break;case n.AnnotationEditorParamsType.INK_OPACITY:ce(this,m,Yt).call(this,H);break}}static get defaultPropertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,Ee._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,Ee._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(Ee._defaultOpacity*100)]]}get propertiesToUpdate(){return[[n.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||Ee._defaultThickness],[n.AnnotationEditorParamsType.INK_COLOR,this.color||Ee._defaultColor||i.AnnotationEditor._defaultLineColor],[n.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??Ee._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(ce(this,B,lt).call(this),ce(this,q,ct).call(this)),this.isAttachedToDOM||(this.parent.add(this),ce(this,z,Ze).call(this)),ce(this,me,et).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,O(this,L).disconnect(),ge(this,L,null),super.remove())}setParent($){!this.parent&&$?this._uiManager.removeShouldRescale(this):this.parent&&$===null&&this._uiManager.addShouldRescale(this),super.setParent($)}onScaleChanging(){const[$,H]=this.parentDimensions,fe=this.width*$,_e=this.height*H;this.setDimensions(fe,_e)}enableEditMode(){O(this,d)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",O(this,y)),this.canvas.addEventListener("pointerup",O(this,v)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",O(this,y)),this.canvas.removeEventListener("pointerup",O(this,v)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){O(this,d)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),ge(this,d,!0),this.div.classList.add("disabled"),ce(this,me,et).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus({preventScroll:!0}))}focusin($){super.focusin($),this.enableEditMode()}canvasPointerdown($){$.button!==0||!this.isInEditMode()||O(this,d)||(this.setInForeground(),$.type!=="mouse"&&this.div.focus(),$.stopPropagation(),this.canvas.addEventListener("pointerleave",O(this,I)),this.canvas.addEventListener("pointermove",O(this,C)),ce(this,de,Qt).call(this,$.offsetX,$.offsetY))}canvasPointermove($){$.stopPropagation(),ce(this,pe,Zt).call(this,$.offsetX,$.offsetY)}canvasPointerup($){$.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&($.stopPropagation(),ce(this,P,Tt).call(this,$),this.setInBackground())}canvasPointerleave($){ce(this,P,Tt).call(this,$),this.setInBackground()}render(){if(this.div)return this.div;let $,H;this.width&&($=this.x,H=this.y),super.render(),Ee._l10nPromise.get("editor_ink2_aria_label").then(Re=>{var ke;return(ke=this.div)==null?void 0:ke.setAttribute("aria-label",Re)});const[fe,_e,Te,xe]=ce(this,Y,Jt).call(this);if(this.setAt(fe,_e,0,0),this.setDims(Te,xe),ce(this,B,lt).call(this),this.width){const[Re,ke]=this.parentDimensions;this.setAt($*Re,H*ke,this.width*Re,this.height*ke),ge(this,T,!0),ce(this,z,Ze).call(this),this.setDims(this.width*Re,this.height*ke),ce(this,Se,Ge).call(this),ce(this,te,Rt).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ce(this,q,ct).call(this),this.div}setDimensions($,H){const fe=Math.round($),_e=Math.round(H);if(O(this,k)===fe&&O(this,l)===_e)return;ge(this,k,fe),ge(this,l,_e),this.canvas.style.visibility="hidden",O(this,E)&&Math.abs(O(this,E)-$/H)>.01&&(H=Math.ceil($/O(this,E)),this.setDims($,H));const[Te,xe]=this.parentDimensions;this.width=$/Te,this.height=H/xe,O(this,d)&&ce(this,A,Pt).call(this,$,H),ce(this,z,Ze).call(this),ce(this,Se,Ge).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize($,H,fe){var Ie,Le;const _e=super.deserialize($,H,fe);_e.thickness=$.thickness,_e.color=n.Util.makeHexColor(...$.color),_e.opacity=$.opacity;const[Te,xe]=_e.pageDimensions,Re=_e.width*Te,ke=_e.height*xe,Me=_e.parentScale,Pe=$.thickness/2;ge(_e,E,Re/ke),ge(_e,d,!0),ge(_e,k,Math.round(Re)),ge(_e,l,Math.round(ke));for(const{bezier:Fe}of $.paths){const $e=[];_e.paths.push($e);let Ue=Me*(Fe[0]-Pe),He=Me*(ke-Fe[1]-Pe);for(let Be=2,je=Fe.length;Be<je;Be+=6){const qe=Me*(Fe[Be]-Pe),Xe=Me*(ke-Fe[Be+1]-Pe),st=Me*(Fe[Be+2]-Pe),it=Me*(ke-Fe[Be+3]-Pe),Mt=Me*(Fe[Be+4]-Pe),It=Me*(ke-Fe[Be+5]-Pe);$e.push([[Ue,He],[qe,Xe],[st,it],[Mt,It]]),Ue=Mt,He=It}const Ve=ce(this,F,xt).call(this,$e);_e.bezierPath2D.push(Ve)}const Ne=ce(Ie=_e,ne,kt).call(Ie);return ge(_e,N,Math.max(x,Ne[2]-Ne[0])),ge(_e,f,Math.max(x,Ne[3]-Ne[1])),ce(Le=_e,A,Pt).call(Le,Re,ke),_e}serialize(){if(this.isEmpty())return null;const $=this.getRect(0,0),H=this.rotation%180===0?$[3]-$[1]:$[2]-$[0],fe=i.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:n.AnnotationEditorType.INK,color:fe,thickness:this.thickness,opacity:this.opacity,paths:ce(this,U,tn).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,H),pageIndex:this.pageIndex,rect:$,rotation:this.rotation}}};let w=Ee;E=new WeakMap,f=new WeakMap,N=new WeakMap,C=new WeakMap,I=new WeakMap,v=new WeakMap,y=new WeakMap,d=new WeakMap,T=new WeakMap,D=new WeakMap,L=new WeakMap,k=new WeakMap,l=new WeakMap,b=new WeakMap,_=new WeakSet,Xt=function($){const H=this.thickness;this.addCommands({cmd:()=>{this.thickness=$,ce(this,me,et).call(this)},undo:()=>{this.thickness=H,ce(this,me,et).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},S=new WeakSet,Kt=function($){const H=this.color;this.addCommands({cmd:()=>{this.color=$,ce(this,Se,Ge).call(this)},undo:()=>{this.color=H,ce(this,Se,Ge).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},m=new WeakSet,Yt=function($){$/=100;const H=this.opacity;this.addCommands({cmd:()=>{this.opacity=$,ce(this,Se,Ge).call(this)},undo:()=>{this.opacity=H,ce(this,Se,Ge).call(this)},mustExec:!0,type:n.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},Y=new WeakSet,Jt=function(){const{parentRotation:$,parentDimensions:[H,fe]}=this;switch($){case 90:return[0,fe,fe,H];case 180:return[H,fe,H,fe];case 270:return[H,0,fe,H];default:return[0,0,H,fe]}},ie=new WeakSet,wt=function(){const{ctx:$,color:H,opacity:fe,thickness:_e,parentScale:Te,scaleFactor:xe}=this;$.lineWidth=_e*Te/xe,$.lineCap="round",$.lineJoin="round",$.miterLimit=10,$.strokeStyle=`${H}${(0,u.opacityToHex)(fe)}`},de=new WeakSet,Qt=function($,H){this.isEditing=!0,O(this,T)||(ge(this,T,!0),ce(this,z,Ze).call(this),this.thickness||(this.thickness=Ee._defaultThickness),this.color||(this.color=Ee._defaultColor||i.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=Ee._defaultOpacity)),this.currentPath.push([$,H]),ge(this,D,null),ce(this,ie,wt).call(this),this.ctx.beginPath(),this.ctx.moveTo($,H),ge(this,b,()=>{O(this,b)&&(O(this,D)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):ce(this,Se,Ge).call(this),this.ctx.lineTo(...O(this,D)),ge(this,D,null),this.ctx.stroke()),window.requestAnimationFrame(O(this,b)))}),window.requestAnimationFrame(O(this,b))},pe=new WeakSet,Zt=function($,H){const[fe,_e]=this.currentPath.at(-1);$===fe&&H===_e||(this.currentPath.push([$,H]),ge(this,D,[$,H]))},ve=new WeakSet,en=function($,H){var Me;this.ctx.closePath(),ge(this,b,null),$=Math.min(Math.max($,0),this.canvas.width),H=Math.min(Math.max(H,0),this.canvas.height);const[fe,_e]=this.currentPath.at(-1);($!==fe||H!==_e)&&this.currentPath.push([$,H]);let Te;if(this.currentPath.length!==1)Te=(0,a.fitCurve)(this.currentPath,30,null);else{const Pe=[$,H];Te=[[Pe,Pe.slice(),Pe.slice(),Pe]]}const xe=ce(Me=Ee,F,xt).call(Me,Te);this.currentPath.length=0;const Re=()=>{this.paths.push(Te),this.bezierPath2D.push(xe),this.rebuild()},ke=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ce(this,B,lt).call(this),ce(this,q,ct).call(this)),ce(this,me,et).call(this))};this.addCommands({cmd:Re,undo:ke,mustExec:!0})},Se=new WeakSet,Ge=function(){if(this.isEmpty()){ce(this,o,ut).call(this);return}ce(this,ie,wt).call(this);const{canvas:$,ctx:H}=this;H.setTransform(1,0,0,1,0,0),H.clearRect(0,0,$.width,$.height),ce(this,o,ut).call(this);for(const fe of this.bezierPath2D)H.stroke(fe)},P=new WeakSet,Tt=function($){ce(this,ve,en).call(this,$.offsetX,$.offsetY),this.canvas.removeEventListener("pointerleave",O(this,I)),this.canvas.removeEventListener("pointermove",O(this,C)),this.addToAnnotationStorage()},B=new WeakSet,lt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",Ee._l10nPromise.get("editor_ink_canvas_aria_label").then($=>{var H;return(H=this.canvas)==null?void 0:H.setAttribute("aria-label",$)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},q=new WeakSet,ct=function(){ge(this,L,new ResizeObserver($=>{const H=$[0].contentRect;H.width&&H.height&&this.setDimensions(H.width,H.height)})),O(this,L).observe(this.div)},z=new WeakSet,Ze=function(){if(!O(this,T))return;const[$,H]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*$),this.canvas.height=Math.ceil(this.height*H),ce(this,o,ut).call(this)},A=new WeakSet,Pt=function($,H){const fe=ce(this,he,dt).call(this),_e=($-fe)/O(this,N),Te=(H-fe)/O(this,f);this.scaleFactor=Math.min(_e,Te)},o=new WeakSet,ut=function(){const $=ce(this,he,dt).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+$,this.translationY*this.scaleFactor+$)},F=new WeakSet,xt=function($){const H=new Path2D;for(let fe=0,_e=$.length;fe<_e;fe++){const[Te,xe,Re,ke]=$[fe];fe===0&&H.moveTo(...Te),H.bezierCurveTo(xe[0],xe[1],Re[0],Re[1],ke[0],ke[1])}return H},U=new WeakSet,tn=function($,H,fe,_e){const xe=[],Re=this.thickness/2;let ke,Me;for(const Pe of this.paths){ke=[],Me=[];for(let Ne=0,Ie=Pe.length;Ne<Ie;Ne++){const[Le,Fe,$e,Ue]=Pe[Ne],He=$*(Le[0]+H)+Re,Ve=_e-$*(Le[1]+fe)-Re,Be=$*(Fe[0]+H)+Re,je=_e-$*(Fe[1]+fe)-Re,qe=$*($e[0]+H)+Re,Xe=_e-$*($e[1]+fe)-Re,st=$*(Ue[0]+H)+Re,it=_e-$*(Ue[1]+fe)-Re;Ne===0&&(ke.push(He,Ve),Me.push(He,Ve)),ke.push(Be,je,qe,Xe,st,it),ce(this,W,nn).call(this,He,Ve,Be,je,qe,Xe,st,it,4,Me)}xe.push({bezier:ke,points:Me})}return xe},W=new WeakSet,nn=function($,H,fe,_e,Te,xe,Re,ke,Me,Pe){if(ce(this,ee,sn).call(this,$,H,fe,_e,Te,xe,Re,ke)){Pe.push(Re,ke);return}for(let Ne=1;Ne<Me-1;Ne++){const Ie=Ne/Me,Le=1-Ie;let Fe=Ie*$+Le*fe,$e=Ie*H+Le*_e,Ue=Ie*fe+Le*Te,He=Ie*_e+Le*xe;const Ve=Ie*Te+Le*Re,Be=Ie*xe+Le*ke;Fe=Ie*Fe+Le*Ue,$e=Ie*$e+Le*He,Ue=Ie*Ue+Le*Ve,He=Ie*He+Le*Be,Fe=Ie*Fe+Le*Ue,$e=Ie*$e+Le*He,Pe.push(Fe,$e)}Pe.push(Re,ke)},ee=new WeakSet,sn=function($,H,fe,_e,Te,xe,Re,ke){const Pe=(3*fe-2*$-Re)**2,Ne=(3*_e-2*H-ke)**2,Ie=(3*Te-$-2*Re)**2,Le=(3*xe-H-2*ke)**2;return Math.max(Pe,Ie)+Math.max(Ne,Le)<=10},ne=new WeakSet,kt=function(){let $=1/0,H=-1/0,fe=1/0,_e=-1/0;for(const Te of this.paths)for(const[xe,Re,ke,Me]of Te){const Pe=n.Util.bezierBoundingBox(...xe,...Re,...ke,...Me);$=Math.min($,Pe[0]),fe=Math.min(fe,Pe[1]),H=Math.max(H,Pe[2]),_e=Math.max(_e,Pe[3])}return[$,fe,H,_e]},he=new WeakSet,dt=function(){return O(this,d)?Math.ceil(this.thickness*this.parentScale):0},me=new WeakSet,et=function($=!1){if(this.isEmpty())return;if(!O(this,d)){ce(this,Se,Ge).call(this);return}const H=ce(this,ne,kt).call(this),fe=ce(this,he,dt).call(this);ge(this,N,Math.max(x,H[2]-H[0])),ge(this,f,Math.max(x,H[3]-H[1]));const _e=Math.ceil(fe+O(this,N)*this.scaleFactor),Te=Math.ceil(fe+O(this,f)*this.scaleFactor),[xe,Re]=this.parentDimensions;this.width=_e/xe,this.height=Te/Re,ge(this,E,_e/Te),ce(this,te,Rt).call(this);const ke=this.translationX,Me=this.translationY;this.translationX=-H[0],this.translationY=-H[1],ce(this,z,Ze).call(this),ce(this,Se,Ge).call(this),ge(this,k,_e),ge(this,l,Te),this.setDims(_e,Te);const Pe=$?fe/this.scaleFactor/2:0;this.translate(ke-this.translationX-Pe,Me-this.translationY-Pe)},te=new WeakSet,Rt=function(){const{style:$}=this.div;O(this,E)>=1?($.minHeight=`${x}px`,$.minWidth=`${Math.round(O(this,E)*x)}px`):($.minWidth=`${x}px`,$.minHeight=`${Math.round(x/O(this,E))}px`)},re(w,F),De(w,"_defaultColor",null),De(w,"_defaultOpacity",1),De(w,"_defaultThickness",1),De(w,"_l10nPromise"),De(w,"_type","ink"),t.InkEditor=w},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.fitCurve=void 0;const n=s(31);t.fitCurve=n},e=>{function t(v,y,d){if(!Array.isArray(v))throw new TypeError("First argument should be an array");if(v.forEach(k=>{if(!Array.isArray(k)||k.some(l=>typeof l!="number")||k.length!==v[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),v=v.filter((k,l)=>l===0||!k.every((b,_)=>b===v[l-1][_])),v.length<2)return[];const T=v.length,D=N(v[1],v[0]),L=N(v[T-2],v[T-1]);return s(v,D,L,y,d)}function s(v,y,d,T,D){var k,l,b,_,c,S,j,m,V,Y,se,ie,oe;if(v.length===2)return ie=C.vectorLen(C.subtract(v[0],v[1]))/3,k=[v[0],C.addArrays(v[0],C.mulItems(y,ie)),C.addArrays(v[1],C.mulItems(d,ie)),v[1]],[k];if(l=x(v),[k,_,S]=n(v,l,l,y,d,D),_===0||_<T)return[k];if(_<T*T)for(b=l,c=_,j=S,oe=0;oe<20;oe++){if(b=a(k,v,b),[k,_,S]=n(v,l,b,y,d,D),_<T)return[k];if(S===j){let de=_/c;if(de>.9999&&de<1.0001)break}c=_,j=S}return se=[],m=C.subtract(v[S-1],v[S+1]),m.every(de=>de===0)&&(m=C.subtract(v[S-1],v[S]),[m[0],m[1]]=[-m[1],m[0]]),V=C.normalize(m),Y=C.mulItems(V,-1),se=se.concat(s(v.slice(0,S+1),y,V,T,D)),se=se.concat(s(v.slice(S),Y,d,T,D)),se}function n(v,y,d,T,D,L){var k,l,b;return k=i(v,d,T,D),[l,b]=w(v,k,y),L&&L({bez:k,points:v,params:y,maxErr:l,maxPoint:b}),[k,l,b]}function i(v,y,d,T){var D,L,k,l,b,_,c,S,j,m,V,Y,se,ie,oe,de,ae,pe=v[0],ye=v[v.length-1];for(D=[pe,null,null,ye],L=C.zeros_Xx2x2(y.length),se=0,ie=y.length;se<ie;se++)de=y[se],ae=1-de,k=L[se],k[0]=C.mulItems(d,3*de*(ae*ae)),k[1]=C.mulItems(T,3*ae*(de*de));for(l=[[0,0],[0,0]],b=[0,0],se=0,ie=v.length;se<ie;se++)de=y[se],k=L[se],l[0][0]+=C.dot(k[0],k[0]),l[0][1]+=C.dot(k[0],k[1]),l[1][0]+=C.dot(k[0],k[1]),l[1][1]+=C.dot(k[1],k[1]),oe=C.subtract(v[se],I.q([pe,pe,ye,ye],de)),b[0]+=C.dot(k[0],oe),b[1]+=C.dot(k[1],oe);return _=l[0][0]*l[1][1]-l[1][0]*l[0][1],c=l[0][0]*b[1]-l[1][0]*b[0],S=b[0]*l[1][1]-b[1]*l[0][1],j=_===0?0:S/_,m=_===0?0:c/_,Y=C.vectorLen(C.subtract(pe,ye)),V=1e-6*Y,j<V||m<V?(D[1]=C.addArrays(pe,C.mulItems(d,Y/3)),D[2]=C.addArrays(ye,C.mulItems(T,Y/3))):(D[1]=C.addArrays(pe,C.mulItems(d,j)),D[2]=C.addArrays(ye,C.mulItems(T,m))),D}function a(v,y,d){return d.map((T,D)=>u(v,y[D],T))}function u(v,y,d){var T=C.subtract(I.q(v,d),y),D=I.qprime(v,d),L=C.mulMatrix(T,D),k=C.sum(C.squareItems(D))+2*C.mulMatrix(T,I.qprimeprime(v,d));return k===0?d:d-L/k}function x(v){var y=[],d,T,D;return v.forEach((L,k)=>{d=k?T+C.vectorLen(C.subtract(L,D)):0,y.push(d),T=d,D=L}),y=y.map(L=>L/T),y}function w(v,y,d){var T,D,L,k,l,b,_,c;D=0,L=Math.floor(v.length/2);const S=E(y,10);for(l=0,b=v.length;l<b;l++)_=v[l],c=f(y,d[l],S,10),k=C.subtract(I.q(y,c),_),T=k[0]*k[0]+k[1]*k[1],T>D&&(D=T,L=l);return[D,L]}var E=function(v,y){for(var d,T=[0],D=v[0],L=0,k=1;k<=y;k++)d=I.q(v,k/y),L+=C.vectorLen(C.subtract(d,D)),T.push(L),D=d;return T=T.map(l=>l/L),T};function f(v,y,d,T){if(y<0)return 0;if(y>1)return 1;for(var D,L,k,l,b,_=1;_<=T;_++)if(y<=d[_]){l=(_-1)/T,k=_/T,L=d[_-1],D=d[_],b=(y-L)/(D-L)*(k-l)+l;break}return b}function N(v,y){return C.normalize(C.subtract(v,y))}class C{static zeros_Xx2x2(y){for(var d=[];y--;)d.push([0,0]);return d}static mulItems(y,d){return y.map(T=>T*d)}static mulMatrix(y,d){return y.reduce((T,D,L)=>T+D*d[L],0)}static subtract(y,d){return y.map((T,D)=>T-d[D])}static addArrays(y,d){return y.map((T,D)=>T+d[D])}static addItems(y,d){return y.map(T=>T+d)}static sum(y){return y.reduce((d,T)=>d+T)}static dot(y,d){return C.mulMatrix(y,d)}static vectorLen(y){return Math.hypot(...y)}static divItems(y,d){return y.map(T=>T/d)}static squareItems(y){return y.map(d=>d*d)}static normalize(y){return this.divItems(y,this.vectorLen(y))}}class I{static q(y,d){var T=1-d,D=C.mulItems(y[0],T*T*T),L=C.mulItems(y[1],3*T*T*d),k=C.mulItems(y[2],3*T*d*d),l=C.mulItems(y[3],d*d*d);return C.addArrays(C.addArrays(D,L),C.addArrays(k,l))}static qprime(y,d){var T=1-d,D=C.mulItems(C.subtract(y[1],y[0]),3*T*T),L=C.mulItems(C.subtract(y[2],y[1]),6*T*d),k=C.mulItems(C.subtract(y[3],y[2]),3*d*d);return C.addArrays(C.addArrays(D,L),k)}static qprimeprime(y,d){return C.addArrays(C.mulItems(C.addArrays(C.subtract(y[2],C.mulItems(y[1],2)),y[0]),6*(1-d)),C.mulItems(C.addArrays(C.subtract(y[3],C.mulItems(y[2],2)),y[1]),6*d))}}e.exports=t,e.exports.fitCubic=s,e.exports.createTangent=N},(e,t,s)=>{var Se,Ye,P,rn,G,Ft,J,Ot;Object.defineProperty(t,"__esModule",{value:!0}),t.AnnotationLayer=void 0;var n=s(1),i=s(6),a=s(3),u=s(33),x=s(34);const w=1e3,E=9,f=new WeakSet;function N(A){return{width:A[2]-A[0],height:A[3]-A[1]}}class C{static create(r){switch(r.data.annotationType){case n.AnnotationType.LINK:return new v(r);case n.AnnotationType.TEXT:return new y(r);case n.AnnotationType.WIDGET:switch(r.data.fieldType){case"Tx":return new T(r);case"Btn":return r.data.radioButton?new L(r):r.data.checkBox?new D(r):new k(r);case"Ch":return new l(r)}return new d(r);case n.AnnotationType.POPUP:return new b(r);case n.AnnotationType.FREETEXT:return new c(r);case n.AnnotationType.LINE:return new S(r);case n.AnnotationType.SQUARE:return new j(r);case n.AnnotationType.CIRCLE:return new m(r);case n.AnnotationType.POLYLINE:return new V(r);case n.AnnotationType.CARET:return new se(r);case n.AnnotationType.INK:return new ie(r);case n.AnnotationType.POLYGON:return new Y(r);case n.AnnotationType.HIGHLIGHT:return new oe(r);case n.AnnotationType.UNDERLINE:return new de(r);case n.AnnotationType.SQUIGGLY:return new ae(r);case n.AnnotationType.STRIKEOUT:return new pe(r);case n.AnnotationType.STAMP:return new ye(r);case n.AnnotationType.FILEATTACHMENT:return new ve(r);default:return new I(r)}}}class I{constructor(r,{isRenderable:o=!1,ignoreBorder:h=!1,createQuadrilaterals:F=!1}={}){this.isRenderable=o,this.data=r.data,this.layer=r.layer,this.page=r.page,this.viewport=r.viewport,this.linkService=r.linkService,this.downloadManager=r.downloadManager,this.imageResourcesPath=r.imageResourcesPath,this.renderForms=r.renderForms,this.svgFactory=r.svgFactory,this.annotationStorage=r.annotationStorage,this.enableScripting=r.enableScripting,this.hasJSActions=r.hasJSActions,this._fieldObjects=r.fieldObjects,o&&(this.container=this._createContainer(h)),F&&(this.quadrilaterals=this._createQuadrilaterals(h))}_createContainer(r=!1){const{data:o,page:h,viewport:F}=this,M=document.createElement("section");M.setAttribute("data-annotation-id",o.id),o.noRotate&&M.classList.add("norotate");const{pageWidth:U,pageHeight:X,pageX:W,pageY:Z}=F.rawDims,{width:ee,height:Q}=N(o.rect),ne=n.Util.normalizeRect([o.rect[0],h.view[3]-o.rect[1]+h.view[1],o.rect[2],h.view[3]-o.rect[3]+h.view[1]]);if(!r&&o.borderStyle.width>0){M.style.borderWidth=`${o.borderStyle.width}px`;const he=o.borderStyle.horizontalCornerRadius,be=o.borderStyle.verticalCornerRadius;if(he>0||be>0){const we=`calc(${he}px * var(--scale-factor)) / calc(${be}px * var(--scale-factor))`;M.style.borderRadius=we}else if(this instanceof L){const we=`calc(${ee}px * var(--scale-factor)) / calc(${Q}px * var(--scale-factor))`;M.style.borderRadius=we}switch(o.borderStyle.style){case n.AnnotationBorderStyleType.SOLID:M.style.borderStyle="solid";break;case n.AnnotationBorderStyleType.DASHED:M.style.borderStyle="dashed";break;case n.AnnotationBorderStyleType.BEVELED:(0,n.warn)("Unimplemented border style: beveled");break;case n.AnnotationBorderStyleType.INSET:(0,n.warn)("Unimplemented border style: inset");break;case n.AnnotationBorderStyleType.UNDERLINE:M.style.borderBottomStyle="solid";break}const me=o.borderColor||null;me?M.style.borderColor=n.Util.makeHexColor(me[0]|0,me[1]|0,me[2]|0):M.style.borderWidth=0}M.style.left=`${100*(ne[0]-W)/U}%`,M.style.top=`${100*(ne[1]-Z)/X}%`;const{rotation:le}=o;return o.hasOwnCanvas||le===0?(M.style.width=`${100*ee/U}%`,M.style.height=`${100*Q/X}%`):this.setRotation(le,M),M}setRotation(r,o=this.container){const{pageWidth:h,pageHeight:F}=this.viewport.rawDims,{width:M,height:U}=N(this.data.rect);let X,W;r%180===0?(X=100*M/h,W=100*U/F):(X=100*U/h,W=100*M/F),o.style.width=`${X}%`,o.style.height=`${W}%`,o.setAttribute("data-main-rotation",(360-r)%360)}get _commonActions(){const r=(o,h,F)=>{const M=F.detail[o];F.target.style[h]=u.ColorConverters[`${M[0]}_HTML`](M.slice(1))};return(0,n.shadow)(this,"_commonActions",{display:o=>{const h=o.detail.display%2===1;this.container.style.visibility=h?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:h,print:o.detail.display===0||o.detail.display===3})},print:o=>{this.annotationStorage.setValue(this.data.id,{print:o.detail.print})},hidden:o=>{this.container.style.visibility=o.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:o.detail.hidden})},focus:o=>{setTimeout(()=>o.target.focus({preventScroll:!1}),0)},userName:o=>{o.target.title=o.detail.userName},readonly:o=>{o.detail.readonly?o.target.setAttribute("readonly",""):o.target.removeAttribute("readonly")},required:o=>{this._setRequired(o.target,o.detail.required)},bgColor:o=>{r("bgColor","backgroundColor",o)},fillColor:o=>{r("fillColor","backgroundColor",o)},fgColor:o=>{r("fgColor","color",o)},textColor:o=>{r("textColor","color",o)},borderColor:o=>{r("borderColor","borderColor",o)},strokeColor:o=>{r("strokeColor","borderColor",o)},rotation:o=>{const h=o.detail.rotation;this.setRotation(h),this.annotationStorage.setValue(this.data.id,{rotation:h})}})}_dispatchEventFromSandbox(r,o){const h=this._commonActions;for(const F of Object.keys(o.detail)){const M=r[F]||h[F];M==null||M(o)}}_setDefaultPropertiesFromJS(r){if(!this.enableScripting)return;const o=this.annotationStorage.getRawValue(this.data.id);if(!o)return;const h=this._commonActions;for(const[F,M]of Object.entries(o)){const U=h[F];if(U){const X={detail:{[F]:M},target:r};U(X),delete o[F]}}}_createQuadrilaterals(r=!1){if(!this.data.quadPoints)return null;const o=[],h=this.data.rect;for(const F of this.data.quadPoints)this.data.rect=[F[2].x,F[2].y,F[1].x,F[1].y],o.push(this._createContainer(r));return this.data.rect=h,o}_createPopup(r,o){let h=this.container;this.quadrilaterals&&(r||(r=this.quadrilaterals),h=this.quadrilaterals[0]),r||(r=document.createElement("div"),r.classList.add("popupTriggerArea"),h.append(r));const M=new _({container:h,trigger:r,color:o.color,titleObj:o.titleObj,modificationDate:o.modificationDate,contentsObj:o.contentsObj,richText:o.richText,hideWrapper:!0}).render();M.style.left="100%",h.append(M)}_renderQuadrilaterals(r){for(const o of this.quadrilaterals)o.classList.add(r);return this.quadrilaterals}render(){(0,n.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(r,o=null){const h=[];if(this._fieldObjects){const F=this._fieldObjects[r];if(F)for(const{page:M,id:U,exportValues:X}of F){if(M===-1||U===o)continue;const W=typeof X=="string"?X:null,Z=document.querySelector(`[data-element-id="${U}"]`);if(Z&&!f.has(Z)){(0,n.warn)(`_getElementsByName - element not allowed: ${U}`);continue}h.push({id:U,exportValue:W,domElement:Z})}return h}for(const F of document.getElementsByName(r)){const{exportValue:M}=F,U=F.getAttribute("data-element-id");U!==o&&f.has(F)&&h.push({id:U,exportValue:M,domElement:F})}return h}}class v extends I{constructor(o,h=null){super(o,{isRenderable:!0,ignoreBorder:!!(h!=null&&h.ignoreBorder),createQuadrilaterals:!0});re(this,Se);re(this,P);this.isTooltipOnly=o.data.isTooltipOnly}render(){const{data:o,linkService:h}=this,F=document.createElement("a");F.setAttribute("data-element-id",o.id);let M=!1;return o.url?(h.addLinkAttributes(F,o.url,o.newWindow),M=!0):o.action?(this._bindNamedAction(F,o.action),M=!0):o.attachment?(this._bindAttachment(F,o.attachment),M=!0):o.setOCGState?(ce(this,P,rn).call(this,F,o.setOCGState),M=!0):o.dest?(this._bindLink(F,o.dest),M=!0):(o.actions&&(o.actions.Action||o.actions["Mouse Up"]||o.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(F,o),M=!0),o.resetForm?(this._bindResetFormAction(F,o.resetForm),M=!0):this.isTooltipOnly&&!M&&(this._bindLink(F,""),M=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((U,X)=>{const W=X===0?F:F.cloneNode();return U.append(W),U}):(this.container.classList.add("linkAnnotation"),M&&this.container.append(F),this.container)}_bindLink(o,h){o.href=this.linkService.getDestinationHash(h),o.onclick=()=>(h&&this.linkService.goToDestination(h),!1),(h||h==="")&&ce(this,Se,Ye).call(this)}_bindNamedAction(o,h){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>(this.linkService.executeNamedAction(h),!1),ce(this,Se,Ye).call(this)}_bindAttachment(o,h){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>{var F;return(F=this.downloadManager)==null||F.openOrDownloadData(this.container,h.content,h.filename),!1},ce(this,Se,Ye).call(this)}_bindJSAction(o,h){o.href=this.linkService.getAnchorUrl("");const F=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const M of Object.keys(h.actions)){const U=F.get(M);U&&(o[U]=()=>{var X;return(X=this.linkService.eventBus)==null||X.dispatch("dispatcheventinsandbox",{source:this,detail:{id:h.id,name:M}}),!1})}o.onclick||(o.onclick=()=>!1),ce(this,Se,Ye).call(this)}_bindResetFormAction(o,h){const F=o.onclick;if(F||(o.href=this.linkService.getAnchorUrl("")),ce(this,Se,Ye).call(this),!this._fieldObjects){(0,n.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),F||(o.onclick=()=>!1);return}o.onclick=()=>{var Q;F==null||F();const{fields:M,refs:U,include:X}=h,W=[];if(M.length!==0||U.length!==0){const ne=new Set(U);for(const le of M){const he=this._fieldObjects[le]||[];for(const{id:be}of he)ne.add(be)}for(const le of Object.values(this._fieldObjects))for(const he of le)ne.has(he.id)===X&&W.push(he)}else for(const ne of Object.values(this._fieldObjects))W.push(...ne);const Z=this.annotationStorage,ee=[];for(const ne of W){const{id:le}=ne;switch(ee.push(le),ne.type){case"text":{const be=ne.defaultValue||"";Z.setValue(le,{value:be});break}case"checkbox":case"radiobutton":{const be=ne.defaultValue===ne.exportValues;Z.setValue(le,{value:be});break}case"combobox":case"listbox":{const be=ne.defaultValue||"";Z.setValue(le,{value:be});break}default:continue}const he=document.querySelector(`[data-element-id="${le}"]`);if(he){if(!f.has(he)){(0,n.warn)(`_bindResetFormAction - element not allowed: ${le}`);continue}}else continue;he.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Q=this.linkService.eventBus)==null||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:ee,name:"ResetForm"}})),!1}}}Se=new WeakSet,Ye=function(){this.container.setAttribute("data-internal-link","")},P=new WeakSet,rn=function(o,h){o.href=this.linkService.getAnchorUrl(""),o.onclick=()=>(this.linkService.executeSetOCGState(h),!1),ce(this,Se,Ye).call(this)};class y extends I{constructor(r){var h,F,M;const o=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(F=r.data.contentsObj)!=null&&F.str||(M=r.data.richText)!=null&&M.str);super(r,{isRenderable:o})}render(){this.container.classList.add("textAnnotation");const r=document.createElement("img");return r.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",r.alt="[{{type}} Annotation]",r.dataset.l10nId="text_annotation_type",r.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(r,this.data),this.container.append(r),this.container}}class d extends I{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(r){var o;this.data.hasOwnCanvas&&(((o=r.previousSibling)==null?void 0:o.nodeName)==="CANVAS"&&(r.previousSibling.hidden=!0),r.hidden=!1)}_getKeyModifier(r){const{isWin:o,isMac:h}=n.FeatureTest.platform;return o&&r.ctrlKey||h&&r.metaKey}_setEventListener(r,o,h,F){o.includes("mouse")?r.addEventListener(o,M=>{var U;(U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:h,value:F(M),shift:M.shiftKey,modifier:this._getKeyModifier(M)}})}):r.addEventListener(o,M=>{var U;(U=this.linkService.eventBus)==null||U.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:h,value:F(M)}})})}_setEventListeners(r,o,h){var F;for(const[M,U]of o)(U==="Action"||(F=this.data.actions)!=null&&F[U])&&this._setEventListener(r,M,U,h)}_setBackgroundColor(r){const o=this.data.backgroundColor||null;r.style.backgroundColor=o===null?"transparent":n.Util.makeHexColor(o[0],o[1],o[2])}_setTextStyle(r){const o=["left","center","right"],{fontColor:h}=this.data.defaultAppearanceData,F=this.data.defaultAppearanceData.fontSize||E,M=r.style;let U;const X=2,W=Z=>Math.round(10*Z)/10;if(this.data.multiLine){const Z=Math.abs(this.data.rect[3]-this.data.rect[1]-X),ee=Math.round(Z/(n.LINE_FACTOR*F))||1,Q=Z/ee;U=Math.min(F,W(Q/n.LINE_FACTOR))}else{const Z=Math.abs(this.data.rect[3]-this.data.rect[1]-X);U=Math.min(F,W(Z/n.LINE_FACTOR))}M.fontSize=`calc(${U}px * var(--scale-factor))`,M.color=n.Util.makeHexColor(h[0],h[1],h[2]),this.data.textAlignment!==null&&(M.textAlign=o[this.data.textAlignment])}_setRequired(r,o){o?r.setAttribute("required",!0):r.removeAttribute("required"),r.setAttribute("aria-required",o)}}class T extends d{constructor(r){const o=r.renderForms||!r.data.hasAppearance&&!!r.data.fieldValue;super(r,{isRenderable:o})}setPropertyOnSiblings(r,o,h,F){const M=this.annotationStorage;for(const U of this._getElementsByName(r.name,r.id))U.domElement&&(U.domElement[o]=h),M.setValue(U.id,{[F]:h})}render(){var F;const r=this.annotationStorage,o=this.data.id;this.container.classList.add("textWidgetAnnotation");let h=null;if(this.renderForms){const M=r.getValue(o,{value:this.data.fieldValue});let U=M.formattedValue||M.value||"";const X=r.getValue(o,{charLimit:this.data.maxLen}).charLimit;X&&U.length>X&&(U=U.slice(0,X));const W={userValue:U,formattedValue:null,lastCommittedValue:null,commitKey:1};this.data.multiLine?(h=document.createElement("textarea"),h.textContent=U,this.data.doNotScroll&&(h.style.overflowY="hidden")):(h=document.createElement("input"),h.type="text",h.setAttribute("value",U),this.data.doNotScroll&&(h.style.overflowX="hidden")),this.data.hasOwnCanvas&&(h.hidden=!0),f.add(h),h.setAttribute("data-element-id",o),h.disabled=this.data.readOnly,h.name=this.data.fieldName,h.tabIndex=w,this._setRequired(h,this.data.required),X&&(h.maxLength=X),h.addEventListener("input",ee=>{r.setValue(o,{value:ee.target.value}),this.setPropertyOnSiblings(h,"value",ee.target.value,"value")}),h.addEventListener("resetform",ee=>{const Q=this.data.defaultFieldValue??"";h.value=W.userValue=Q,W.formattedValue=null});let Z=ee=>{const{formattedValue:Q}=W;Q!=null&&(ee.target.value=Q),ee.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){h.addEventListener("focus",Q=>{const{target:ne}=Q;W.userValue&&(ne.value=W.userValue),W.lastCommittedValue=ne.value,W.commitKey=1}),h.addEventListener("updatefromsandbox",Q=>{this.showElementAndHideCanvas(Q.target);const ne={value(le){W.userValue=le.detail.value??"",r.setValue(o,{value:W.userValue.toString()}),le.target.value=W.userValue},formattedValue(le){const{formattedValue:he}=le.detail;W.formattedValue=he,he!=null&&le.target!==document.activeElement&&(le.target.value=he),r.setValue(o,{formattedValue:he})},selRange(le){le.target.setSelectionRange(...le.detail.selRange)},charLimit:le=>{var we;const{charLimit:he}=le.detail,{target:be}=le;if(he===0){be.removeAttribute("maxLength");return}be.setAttribute("maxLength",he);let me=W.userValue;!me||me.length<=he||(me=me.slice(0,he),be.value=W.userValue=me,r.setValue(o,{value:me}),(we=this.linkService.eventBus)==null||we.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:me,willCommit:!0,commitKey:1,selStart:be.selectionStart,selEnd:be.selectionEnd}}))}};this._dispatchEventFromSandbox(ne,Q)}),h.addEventListener("keydown",Q=>{var he;W.commitKey=1;let ne=-1;if(Q.key==="Escape"?ne=0:Q.key==="Enter"&&!this.data.multiLine?ne=2:Q.key==="Tab"&&(W.commitKey=3),ne===-1)return;const{value:le}=Q.target;W.lastCommittedValue!==le&&(W.lastCommittedValue=le,W.userValue=le,(he=this.linkService.eventBus)==null||he.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:le,willCommit:!0,commitKey:ne,selStart:Q.target.selectionStart,selEnd:Q.target.selectionEnd}}))});const ee=Z;Z=null,h.addEventListener("blur",Q=>{var le;if(!Q.relatedTarget)return;const{value:ne}=Q.target;W.userValue=ne,W.lastCommittedValue!==ne&&((le=this.linkService.eventBus)==null||le.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:ne,willCommit:!0,commitKey:W.commitKey,selStart:Q.target.selectionStart,selEnd:Q.target.selectionEnd}})),ee(Q)}),(F=this.data.actions)!=null&&F.Keystroke&&h.addEventListener("beforeinput",Q=>{var Ae;W.lastCommittedValue=null;const{data:ne,target:le}=Q,{value:he,selectionStart:be,selectionEnd:me}=le;let we=be,te=me;switch(Q.inputType){case"deleteWordBackward":{const Ee=he.substring(0,be).match(/\w*[^\w]*$/);Ee&&(we-=Ee[0].length);break}case"deleteWordForward":{const Ee=he.substring(be).match(/^[^\w]*\w*/);Ee&&(te+=Ee[0].length);break}case"deleteContentBackward":be===me&&(we-=1);break;case"deleteContentForward":be===me&&(te+=1);break}Q.preventDefault(),(Ae=this.linkService.eventBus)==null||Ae.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:he,change:ne||"",willCommit:!1,selStart:we,selEnd:te}})}),this._setEventListeners(h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Q=>Q.target.value)}if(Z&&h.addEventListener("blur",Z),this.data.comb){const Q=(this.data.rect[2]-this.data.rect[0])/X;h.classList.add("comb"),h.style.letterSpacing=`calc(${Q}px * var(--scale-factor) - 1ch)`}}else h=document.createElement("div"),h.textContent=this.data.fieldValue,h.style.verticalAlign="middle",h.style.display="table-cell";return this._setTextStyle(h),this._setBackgroundColor(h),this._setDefaultPropertiesFromJS(h),this.container.append(h),this.container}}class D extends d{constructor(r){super(r,{isRenderable:r.renderForms})}render(){const r=this.annotationStorage,o=this.data,h=o.id;let F=r.getValue(h,{value:o.exportValue===o.fieldValue}).value;typeof F=="string"&&(F=F!=="Off",r.setValue(h,{value:F})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const M=document.createElement("input");return f.add(M),M.setAttribute("data-element-id",h),M.disabled=o.readOnly,this._setRequired(M,this.data.required),M.type="checkbox",M.name=o.fieldName,F&&M.setAttribute("checked",!0),M.setAttribute("exportValue",o.exportValue),M.tabIndex=w,M.addEventListener("change",U=>{const{name:X,checked:W}=U.target;for(const Z of this._getElementsByName(X,h)){const ee=W&&Z.exportValue===o.exportValue;Z.domElement&&(Z.domElement.checked=ee),r.setValue(Z.id,{value:ee})}r.setValue(h,{value:W})}),M.addEventListener("resetform",U=>{const X=o.defaultFieldValue||"Off";U.target.checked=X===o.exportValue}),this.enableScripting&&this.hasJSActions&&(M.addEventListener("updatefromsandbox",U=>{const X={value(W){W.target.checked=W.detail.value!=="Off",r.setValue(h,{value:W.target.checked})}};this._dispatchEventFromSandbox(X,U)}),this._setEventListeners(M,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],U=>U.target.checked)),this._setBackgroundColor(M),this._setDefaultPropertiesFromJS(M),this.container.append(M),this.container}}class L extends d{constructor(r){super(r,{isRenderable:r.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const r=this.annotationStorage,o=this.data,h=o.id;let F=r.getValue(h,{value:o.fieldValue===o.buttonValue}).value;typeof F=="string"&&(F=F!==o.buttonValue,r.setValue(h,{value:F}));const M=document.createElement("input");if(f.add(M),M.setAttribute("data-element-id",h),M.disabled=o.readOnly,this._setRequired(M,this.data.required),M.type="radio",M.name=o.fieldName,F&&M.setAttribute("checked",!0),M.tabIndex=w,M.addEventListener("change",U=>{const{name:X,checked:W}=U.target;for(const Z of this._getElementsByName(X,h))r.setValue(Z.id,{value:!1});r.setValue(h,{value:W})}),M.addEventListener("resetform",U=>{const X=o.defaultFieldValue;U.target.checked=X!=null&&X===o.buttonValue}),this.enableScripting&&this.hasJSActions){const U=o.buttonValue;M.addEventListener("updatefromsandbox",X=>{const W={value:Z=>{const ee=U===Z.detail.value;for(const Q of this._getElementsByName(Z.target.name)){const ne=ee&&Q.id===h;Q.domElement&&(Q.domElement.checked=ne),r.setValue(Q.id,{value:ne})}}};this._dispatchEventFromSandbox(W,X)}),this._setEventListeners(M,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],X=>X.target.checked)}return this._setBackgroundColor(M),this._setDefaultPropertiesFromJS(M),this.container.append(M),this.container}}class k extends v{constructor(r){super(r,{ignoreBorder:r.data.hasAppearance})}render(){const r=super.render();r.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(r.title=this.data.alternativeText);const o=r.lastChild;return this.enableScripting&&this.hasJSActions&&o&&(this._setDefaultPropertiesFromJS(o),o.addEventListener("updatefromsandbox",h=>{this._dispatchEventFromSandbox({},h)})),r}}class l extends d{constructor(r){super(r,{isRenderable:r.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const r=this.annotationStorage,o=this.data.id,h=r.getValue(o,{value:this.data.fieldValue}),F=document.createElement("select");f.add(F),F.setAttribute("data-element-id",o),F.disabled=this.data.readOnly,this._setRequired(F,this.data.required),F.name=this.data.fieldName,F.tabIndex=w;let M=this.data.combo&&this.data.options.length>0;this.data.combo||(F.size=this.data.options.length,this.data.multiSelect&&(F.multiple=!0)),F.addEventListener("resetform",ee=>{const Q=this.data.defaultFieldValue;for(const ne of F.options)ne.selected=ne.value===Q});for(const ee of this.data.options){const Q=document.createElement("option");Q.textContent=ee.displayValue,Q.value=ee.exportValue,h.value.includes(ee.exportValue)&&(Q.setAttribute("selected",!0),M=!1),F.append(Q)}let U=null;if(M){const ee=document.createElement("option");ee.value=" ",ee.setAttribute("hidden",!0),ee.setAttribute("selected",!0),F.prepend(ee),U=()=>{ee.remove(),F.removeEventListener("input",U),U=null},F.addEventListener("input",U)}const X=ee=>{const Q=ee?"value":"textContent",{options:ne,multiple:le}=F;return le?Array.prototype.filter.call(ne,he=>he.selected).map(he=>he[Q]):ne.selectedIndex===-1?null:ne[ne.selectedIndex][Q]};let W=X(!1);const Z=ee=>{const Q=ee.target.options;return Array.prototype.map.call(Q,ne=>({displayValue:ne.textContent,exportValue:ne.value}))};return this.enableScripting&&this.hasJSActions?(F.addEventListener("updatefromsandbox",ee=>{const Q={value(ne){U==null||U();const le=ne.detail.value,he=new Set(Array.isArray(le)?le:[le]);for(const be of F.options)be.selected=he.has(be.value);r.setValue(o,{value:X(!0)}),W=X(!1)},multipleSelection(ne){F.multiple=!0},remove(ne){const le=F.options,he=ne.detail.remove;le[he].selected=!1,F.remove(he),le.length>0&&Array.prototype.findIndex.call(le,me=>me.selected)===-1&&(le[0].selected=!0),r.setValue(o,{value:X(!0),items:Z(ne)}),W=X(!1)},clear(ne){for(;F.length!==0;)F.remove(0);r.setValue(o,{value:null,items:[]}),W=X(!1)},insert(ne){const{index:le,displayValue:he,exportValue:be}=ne.detail.insert,me=F.children[le],we=document.createElement("option");we.textContent=he,we.value=be,me?me.before(we):F.append(we),r.setValue(o,{value:X(!0),items:Z(ne)}),W=X(!1)},items(ne){const{items:le}=ne.detail;for(;F.length!==0;)F.remove(0);for(const he of le){const{displayValue:be,exportValue:me}=he,we=document.createElement("option");we.textContent=be,we.value=me,F.append(we)}F.options.length>0&&(F.options[0].selected=!0),r.setValue(o,{value:X(!0),items:Z(ne)}),W=X(!1)},indices(ne){const le=new Set(ne.detail.indices);for(const he of ne.target.options)he.selected=le.has(he.index);r.setValue(o,{value:X(!0)}),W=X(!1)},editable(ne){ne.target.disabled=!ne.detail.editable}};this._dispatchEventFromSandbox(Q,ee)}),F.addEventListener("input",ee=>{var ne;const Q=X(!0);r.setValue(o,{value:Q}),ee.preventDefault(),(ne=this.linkService.eventBus)==null||ne.dispatch("dispatcheventinsandbox",{source:this,detail:{id:o,name:"Keystroke",value:W,changeEx:Q,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(F,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],ee=>ee.target.value)):F.addEventListener("input",function(ee){r.setValue(o,{value:X(!0)})}),this.data.combo&&this._setTextStyle(F),this._setBackgroundColor(F),this._setDefaultPropertiesFromJS(F),this.container.append(F),this.container}}const B=class extends I{constructor(r){var F,M,U;const{data:o}=r,h=!B.IGNORE_TYPES.has(o.parentType)&&!!((F=o.titleObj)!=null&&F.str||(M=o.contentsObj)!=null&&M.str||(U=o.richText)!=null&&U.str);super(r,{isRenderable:h})}render(){this.container.classList.add("popupAnnotation");const r=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(r.length===0)return this.container;const o=new _({container:this.container,trigger:Array.from(r),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),h=this.page,F=n.Util.normalizeRect([this.data.parentRect[0],h.view[3]-this.data.parentRect[1]+h.view[1],this.data.parentRect[2],h.view[3]-this.data.parentRect[3]+h.view[1]]),M=F[0]+this.data.parentRect[2]-this.data.parentRect[0],U=F[1],{pageWidth:X,pageHeight:W,pageX:Z,pageY:ee}=this.viewport.rawDims;return this.container.style.left=`${100*(M-Z)/X}%`,this.container.style.top=`${100*(U-ee)/W}%`,this.container.append(o.render()),this.container}};let b=B;De(b,"IGNORE_TYPES",new Set(["Line","Square","Circle","PolyLine","Polygon","Ink"]));class _{constructor(r){this.container=r.container,this.trigger=r.trigger,this.color=r.color,this.titleObj=r.titleObj,this.modificationDate=r.modificationDate,this.contentsObj=r.contentsObj,this.richText=r.richText,this.hideWrapper=r.hideWrapper||!1,this.pinned=!1}render(){var X,W;const o=document.createElement("div");o.classList.add("popupWrapper"),this.hideElement=this.hideWrapper?o:this.container,this.hideElement.hidden=!0;const h=document.createElement("div");h.classList.add("popup");const F=this.color;if(F){const Z=.7*(255-F[0])+F[0],ee=.7*(255-F[1])+F[1],Q=.7*(255-F[2])+F[2];h.style.backgroundColor=n.Util.makeHexColor(Z|0,ee|0,Q|0)}const M=document.createElement("h1");M.dir=this.titleObj.dir,M.textContent=this.titleObj.str,h.append(M);const U=i.PDFDateString.toDateObject(this.modificationDate);if(U){const Z=document.createElement("span");Z.classList.add("popupDate"),Z.textContent="{{date}}, {{time}}",Z.dataset.l10nId="annotation_date_string",Z.dataset.l10nArgs=JSON.stringify({date:U.toLocaleDateString(),time:U.toLocaleTimeString()}),h.append(Z)}if((X=this.richText)!=null&&X.str&&(!((W=this.contentsObj)!=null&&W.str)||this.contentsObj.str===this.richText.str))x.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:h}),h.lastChild.classList.add("richText","popupContent");else{const Z=this._formatContents(this.contentsObj);h.append(Z)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const Z of this.trigger)Z.addEventListener("click",this._toggle.bind(this)),Z.addEventListener("mouseover",this._show.bind(this,!1)),Z.addEventListener("mouseout",this._hide.bind(this,!1));return h.addEventListener("click",this._hide.bind(this,!0)),o.append(h),o}_formatContents({str:r,dir:o}){const h=document.createElement("p");h.classList.add("popupContent"),h.dir=o;const F=r.split(/(?:\r\n?|\n)/);for(let M=0,U=F.length;M<U;++M){const X=F[M];h.append(document.createTextNode(X)),M<U-1&&h.append(document.createElement("br"))}return h}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(r=!1){r&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(r=!0){r&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class c extends I{constructor(r){var h,F,M;const o=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(F=r.data.contentsObj)!=null&&F.str||(M=r.data.richText)!=null&&M.str);super(r,{isRenderable:o,ignoreBorder:!0}),this.textContent=r.data.textContent}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const r=document.createElement("div");r.classList.add("annotationTextContent"),r.setAttribute("role","comment");for(const o of this.textContent){const h=document.createElement("span");h.textContent=o,r.append(h)}this.container.append(r)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class S extends I{constructor(r){var h,F,M;const o=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(F=r.data.contentsObj)!=null&&F.str||(M=r.data.richText)!=null&&M.str);super(r,{isRenderable:o,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const r=this.data,{width:o,height:h}=N(r.rect),F=this.svgFactory.create(o,h,!0),M=this.svgFactory.createElement("svg:line");return M.setAttribute("x1",r.rect[2]-r.lineCoordinates[0]),M.setAttribute("y1",r.rect[3]-r.lineCoordinates[1]),M.setAttribute("x2",r.rect[2]-r.lineCoordinates[2]),M.setAttribute("y2",r.rect[3]-r.lineCoordinates[3]),M.setAttribute("stroke-width",r.borderStyle.width||1),M.setAttribute("stroke","transparent"),M.setAttribute("fill","transparent"),F.append(M),this.container.append(F),this._createPopup(M,r),this.container}}class j extends I{constructor(r){var h,F,M;const o=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(F=r.data.contentsObj)!=null&&F.str||(M=r.data.richText)!=null&&M.str);super(r,{isRenderable:o,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const r=this.data,{width:o,height:h}=N(r.rect),F=this.svgFactory.create(o,h,!0),M=r.borderStyle.width,U=this.svgFactory.createElement("svg:rect");return U.setAttribute("x",M/2),U.setAttribute("y",M/2),U.setAttribute("width",o-M),U.setAttribute("height",h-M),U.setAttribute("stroke-width",M||1),U.setAttribute("stroke","transparent"),U.setAttribute("fill","transparent"),F.append(U),this.container.append(F),this._createPopup(U,r),this.container}}class m extends I{constructor(r){var h,F,M;const o=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(F=r.data.contentsObj)!=null&&F.str||(M=r.data.richText)!=null&&M.str);super(r,{isRenderable:o,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const r=this.data,{width:o,height:h}=N(r.rect),F=this.svgFactory.create(o,h,!0),M=r.borderStyle.width,U=this.svgFactory.createElement("svg:ellipse");return U.setAttribute("cx",o/2),U.setAttribute("cy",h/2),U.setAttribute("rx",o/2-M/2),U.setAttribute("ry",h/2-M/2),U.setAttribute("stroke-width",M||1),U.setAttribute("stroke","transparent"),U.setAttribute("fill","transparent"),F.append(U),this.container.append(F),this._createPopup(U,r),this.container}}class V extends I{constructor(r){var h,F,M;const o=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(F=r.data.contentsObj)!=null&&F.str||(M=r.data.richText)!=null&&M.str);super(r,{isRenderable:o,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const r=this.data,{width:o,height:h}=N(r.rect),F=this.svgFactory.create(o,h,!0);let M=[];for(const X of r.vertices){const W=X.x-r.rect[0],Z=r.rect[3]-X.y;M.push(W+","+Z)}M=M.join(" ");const U=this.svgFactory.createElement(this.svgElementName);return U.setAttribute("points",M),U.setAttribute("stroke-width",r.borderStyle.width||1),U.setAttribute("stroke","transparent"),U.setAttribute("fill","transparent"),F.append(U),this.container.append(F),this._createPopup(U,r),this.container}}class Y extends V{constructor(r){super(r),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class se extends I{constructor(r){var h,F,M;const o=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(F=r.data.contentsObj)!=null&&F.str||(M=r.data.richText)!=null&&M.str);super(r,{isRenderable:o,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ie extends I{constructor(r){var h,F,M;const o=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(F=r.data.contentsObj)!=null&&F.str||(M=r.data.richText)!=null&&M.str);super(r,{isRenderable:o,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const r=this.data,{width:o,height:h}=N(r.rect),F=this.svgFactory.create(o,h,!0);for(const M of r.inkLists){let U=[];for(const W of M){const Z=W.x-r.rect[0],ee=r.rect[3]-W.y;U.push(`${Z},${ee}`)}U=U.join(" ");const X=this.svgFactory.createElement(this.svgElementName);X.setAttribute("points",U),X.setAttribute("stroke-width",r.borderStyle.width||1),X.setAttribute("stroke","transparent"),X.setAttribute("fill","transparent"),this._createPopup(X,r),F.append(X)}return this.container.append(F),this.container}}class oe extends I{constructor(r){var h,F,M;const o=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(F=r.data.contentsObj)!=null&&F.str||(M=r.data.richText)!=null&&M.str);super(r,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.classList.add("highlightAnnotation"),this.container)}}class de extends I{constructor(r){var h,F,M;const o=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(F=r.data.contentsObj)!=null&&F.str||(M=r.data.richText)!=null&&M.str);super(r,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.classList.add("underlineAnnotation"),this.container)}}class ae extends I{constructor(r){var h,F,M;const o=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(F=r.data.contentsObj)!=null&&F.str||(M=r.data.richText)!=null&&M.str);super(r,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.classList.add("squigglyAnnotation"),this.container)}}class pe extends I{constructor(r){var h,F,M;const o=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(F=r.data.contentsObj)!=null&&F.str||(M=r.data.richText)!=null&&M.str);super(r,{isRenderable:o,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.classList.add("strikeoutAnnotation"),this.container)}}class ye extends I{constructor(r){var h,F,M;const o=!!(r.data.hasPopup||(h=r.data.titleObj)!=null&&h.str||(F=r.data.contentsObj)!=null&&F.str||(M=r.data.richText)!=null&&M.str);super(r,{isRenderable:o,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ve extends I{constructor(r){var F;super(r,{isRenderable:!0});const{filename:o,content:h}=this.data.file;this.filename=(0,i.getFilenameFromUrl)(o,!0),this.content=h,(F=this.linkService.eventBus)==null||F.dispatch("fileattachmentannotation",{source:this,filename:o,content:h})}render(){var o,h;this.container.classList.add("fileAttachmentAnnotation");let r;return this.data.hasAppearance?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(this.data.name)?"paperclip":"pushpin"}.svg`),r.classList.add("popupTriggerArea"),r.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((o=this.data.titleObj)!=null&&o.str||(h=this.data.contentsObj)!=null&&h.str||this.data.richText)&&this._createPopup(r,this.data),this.container.append(r),this.container}_download(){var r;(r=this.downloadManager)==null||r.openOrDownloadData(this.container,this.content,this.filename)}}const g=class{static render(r){var W,Z;const{annotations:o,div:h,viewport:F,accessibilityManager:M}=r;(0,i.setLayerDimensions)(h,F);const U={data:null,layer:h,page:r.page,viewport:F,linkService:r.linkService,downloadManager:r.downloadManager,imageResourcesPath:r.imageResourcesPath||"",renderForms:r.renderForms!==!1,svgFactory:new i.DOMSVGFactory,annotationStorage:r.annotationStorage||new a.AnnotationStorage,enableScripting:r.enableScripting===!0,hasJSActions:r.hasJSActions,fieldObjects:r.fieldObjects};let X=0;for(const ee of o){if(ee.noHTML)continue;if(ee.annotationType!==n.AnnotationType.POPUP){const{width:le,height:he}=N(ee.rect);if(le<=0||he<=0)continue}U.data=ee;const Q=C.create(U);if(!Q.isRenderable)continue;const ne=Q.render();if(ee.hidden&&(ne.style.visibility="hidden"),Array.isArray(ne))for(const le of ne)le.style.zIndex=X++,ce(W=g,G,Ft).call(W,le,ee.id,h,M);else ne.style.zIndex=X++,Q instanceof b?h.prepend(ne):ce(Z=g,G,Ft).call(Z,ne,ee.id,h,M)}ce(this,J,Ot).call(this,h,r.annotationCanvasMap)}static update(r){const{annotationCanvasMap:o,div:h,viewport:F}=r;(0,i.setLayerDimensions)(h,{rotation:F.rotation}),ce(this,J,Ot).call(this,h,o),h.hidden=!1}};let Ce=g;G=new WeakSet,Ft=function(r,o,h,F){const M=r.firstChild||r;M.id=`${i.AnnotationPrefix}${o}`,h.append(r),F==null||F.moveElementInDOM(h,r,M,!1)},J=new WeakSet,Ot=function(r,o){if(o){for(const[h,F]of o){const M=r.querySelector(`[data-annotation-id="${h}"]`);if(!M)continue;const{firstChild:U}=M;U?U.nodeName==="CANVAS"?U.replaceWith(F):U.before(F):M.append(F)}o.clear()}},re(Ce,G),re(Ce,J),t.AnnotationLayer=Ce},(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ColorConverters=void 0;function s(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}class n{static CMYK_G([a,u,x,w]){return["G",1-Math.min(1,.3*a+.59*x+.11*u+w)]}static G_CMYK([a]){return["CMYK",0,0,0,1-a]}static G_RGB([a]){return["RGB",a,a,a]}static G_HTML([a]){const u=s(a);return`#${u}${u}${u}`}static RGB_G([a,u,x]){return["G",.3*a+.59*u+.11*x]}static RGB_HTML([a,u,x]){const w=s(a),E=s(u),f=s(x);return`#${w}${E}${f}`}static T_HTML(){return"#00000000"}static CMYK_RGB([a,u,x,w]){return["RGB",1-Math.min(1,a+w),1-Math.min(1,x+w),1-Math.min(1,u+w)]}static CMYK_HTML(a){const u=this.CMYK_RGB(a).slice(1);return this.RGB_HTML(u)}static RGB_CMYK([a,u,x]){const w=1-a,E=1-u,f=1-x,N=Math.min(w,E,f);return["CMYK",w,E,f,N]}}t.ColorConverters=n},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.XfaLayer=void 0;var n=s(19);class i{static setupStorage(u,x,w,E,f){const N=E.getValue(x,{value:null});switch(w.name){case"textarea":if(N.value!==null&&(u.textContent=N.value),f==="print")break;u.addEventListener("input",C=>{E.setValue(x,{value:C.target.value})});break;case"input":if(w.attributes.type==="radio"||w.attributes.type==="checkbox"){if(N.value===w.attributes.xfaOn?u.setAttribute("checked",!0):N.value===w.attributes.xfaOff&&u.removeAttribute("checked"),f==="print")break;u.addEventListener("change",C=>{E.setValue(x,{value:C.target.checked?C.target.getAttribute("xfaOn"):C.target.getAttribute("xfaOff")})})}else{if(N.value!==null&&u.setAttribute("value",N.value),f==="print")break;u.addEventListener("input",C=>{E.setValue(x,{value:C.target.value})})}break;case"select":if(N.value!==null)for(const C of w.children)C.attributes.value===N.value&&(C.attributes.selected=!0);u.addEventListener("input",C=>{const I=C.target.options,v=I.selectedIndex===-1?"":I[I.selectedIndex].value;E.setValue(x,{value:v})});break}}static setAttributes({html:u,element:x,storage:w=null,intent:E,linkService:f}){const{attributes:N}=x,C=u instanceof HTMLAnchorElement;N.type==="radio"&&(N.name=`${N.name}-${E}`);for(const[I,v]of Object.entries(N))if(v!=null)switch(I){case"class":v.length&&u.setAttribute(I,v.join(" "));break;case"dataId":break;case"id":u.setAttribute("data-element-id",v);break;case"style":Object.assign(u.style,v);break;case"textContent":u.textContent=v;break;default:(!C||I!=="href"&&I!=="newWindow")&&u.setAttribute(I,v)}C&&f.addLinkAttributes(u,N.href,N.newWindow),w&&N.dataId&&this.setupStorage(u,N.dataId,x,w)}static render(u){var y;const x=u.annotationStorage,w=u.linkService,E=u.xfaHtml,f=u.intent||"display",N=document.createElement(E.name);E.attributes&&this.setAttributes({html:N,element:E,intent:f,linkService:w});const C=[[E,-1,N]],I=u.div;if(I.append(N),u.viewport){const d=`matrix(${u.viewport.transform.join(",")})`;I.style.transform=d}f!=="richText"&&I.setAttribute("class","xfaLayer xfaFont");const v=[];for(;C.length>0;){const[d,T,D]=C.at(-1);if(T+1===d.children.length){C.pop();continue}const L=d.children[++C.at(-1)[1]];if(L===null)continue;const{name:k}=L;if(k==="#text"){const b=document.createTextNode(L.value);v.push(b),D.append(b);continue}let l;if((y=L==null?void 0:L.attributes)!=null&&y.xmlns?l=document.createElementNS(L.attributes.xmlns,k):l=document.createElement(k),D.append(l),L.attributes&&this.setAttributes({html:l,element:L,storage:x,intent:f,linkService:w}),L.children&&L.children.length>0)C.push([L,-1,l]);else if(L.value){const b=document.createTextNode(L.value);n.XfaText.shouldBuildText(k)&&v.push(b),l.append(b)}}for(const d of I.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:v}}static update(u){const x=`matrix(${u.viewport.transform.join(",")})`;u.div.style.transform=x,u.div.hidden=!1}}t.XfaLayer=i},(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SVGGraphics=void 0;var n=s(6),i=s(1),a=s(10);let u=class{constructor(){(0,i.unreachable)("Not implemented: SVGGraphics")}};t.SVGGraphics=u;{let y=function(l){let b=[];const _=[];for(const c of l){if(c.fn==="save"){b.push({fnId:92,fn:"group",items:[]}),_.push(b),b=b.at(-1).items;continue}c.fn==="restore"?b=_.pop():b.push(c)}return b},d=function(l){if(Number.isInteger(l))return l.toString();const b=l.toFixed(10);let _=b.length-1;if(b[_]!=="0")return b;do _--;while(b[_]==="0");return b.substring(0,b[_]==="."?_:_+1)},T=function(l){if(l[4]===0&&l[5]===0){if(l[1]===0&&l[2]===0)return l[0]===1&&l[3]===1?"":`scale(${d(l[0])} ${d(l[3])})`;if(l[0]===l[3]&&l[1]===-l[2]){const b=Math.acos(l[0])*180/Math.PI;return`rotate(${d(b)})`}}else if(l[0]===1&&l[1]===0&&l[2]===0&&l[3]===1)return`translate(${d(l[4])} ${d(l[5])})`;return`matrix(${d(l[0])} ${d(l[1])} ${d(l[2])} ${d(l[3])} ${d(l[4])} ${d(l[5])})`};const x={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},w="http://www.w3.org/XML/1998/namespace",E="http://www.w3.org/1999/xlink",f=["butt","round","square"],N=["miter","round","bevel"],C=function(l,b="",_=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!_)return URL.createObjectURL(new Blob([l],{type:b}));const c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let S=`data:${b};base64,`;for(let j=0,m=l.length;j<m;j+=3){const V=l[j]&255,Y=l[j+1]&255,se=l[j+2]&255,ie=V>>2,oe=(V&3)<<4|Y>>4,de=j+1<m?(Y&15)<<2|se>>6:64,ae=j+2<m?se&63:64;S+=c[ie]+c[oe]+c[de]+c[ae]}return S},I=function(){const l=new Uint8Array([137,80,78,71,13,10,26,10]),b=12,_=new Int32Array(256);for(let se=0;se<256;se++){let ie=se;for(let oe=0;oe<8;oe++)ie&1?ie=3988292384^ie>>1&2147483647:ie=ie>>1&2147483647;_[se]=ie}function c(se,ie,oe){let de=-1;for(let ae=ie;ae<oe;ae++){const pe=(de^se[ae])&255,ye=_[pe];de=de>>>8^ye}return de^-1}function S(se,ie,oe,de){let ae=de;const pe=ie.length;oe[ae]=pe>>24&255,oe[ae+1]=pe>>16&255,oe[ae+2]=pe>>8&255,oe[ae+3]=pe&255,ae+=4,oe[ae]=se.charCodeAt(0)&255,oe[ae+1]=se.charCodeAt(1)&255,oe[ae+2]=se.charCodeAt(2)&255,oe[ae+3]=se.charCodeAt(3)&255,ae+=4,oe.set(ie,ae),ae+=ie.length;const ye=c(oe,de+4,ae);oe[ae]=ye>>24&255,oe[ae+1]=ye>>16&255,oe[ae+2]=ye>>8&255,oe[ae+3]=ye&255}function j(se,ie,oe){let de=1,ae=0;for(let pe=ie;pe<oe;++pe)de=(de+(se[pe]&255))%65521,ae=(ae+de)%65521;return ae<<16|de}function m(se){if(!a.isNodeJS)return V(se);try{let ie;parseInt(process.versions.node)>=8?ie=se:ie=Buffer.from(se);const oe=require$$5.deflateSync(ie,{level:9});return oe instanceof Uint8Array?oe:new Uint8Array(oe)}catch(ie){(0,i.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+ie)}return V(se)}function V(se){let ie=se.length;const oe=65535,de=Math.ceil(ie/oe),ae=new Uint8Array(2+ie+de*5+4);let pe=0;ae[pe++]=120,ae[pe++]=156;let ye=0;for(;ie>oe;)ae[pe++]=0,ae[pe++]=255,ae[pe++]=255,ae[pe++]=0,ae[pe++]=0,ae.set(se.subarray(ye,ye+oe),pe),pe+=oe,ye+=oe,ie-=oe;ae[pe++]=1,ae[pe++]=ie&255,ae[pe++]=ie>>8&255,ae[pe++]=~ie&65535&255,ae[pe++]=(~ie&65535)>>8&255,ae.set(se.subarray(ye),pe),pe+=se.length-ye;const ve=j(se,0,se.length);return ae[pe++]=ve>>24&255,ae[pe++]=ve>>16&255,ae[pe++]=ve>>8&255,ae[pe++]=ve&255,ae}function Y(se,ie,oe,de){const ae=se.width,pe=se.height;let ye,ve,Ce;const Se=se.data;switch(ie){case i.ImageKind.GRAYSCALE_1BPP:ve=0,ye=1,Ce=ae+7>>3;break;case i.ImageKind.RGB_24BPP:ve=2,ye=8,Ce=ae*3;break;case i.ImageKind.RGBA_32BPP:ve=6,ye=8,Ce=ae*4;break;default:throw new Error("invalid format")}const K=new Uint8Array((1+Ce)*pe);let P=0,R=0;for(let g=0;g<pe;++g)K[P++]=0,K.set(Se.subarray(R,R+Ce),P),R+=Ce,P+=Ce;if(ie===i.ImageKind.GRAYSCALE_1BPP&&de){P=0;for(let g=0;g<pe;g++){P++;for(let A=0;A<Ce;A++)K[P++]^=255}}const B=new Uint8Array([ae>>24&255,ae>>16&255,ae>>8&255,ae&255,pe>>24&255,pe>>16&255,pe>>8&255,pe&255,ye,ve,0,0,0]),G=m(K),q=l.length+b*3+B.length+G.length,J=new Uint8Array(q);let z=0;return J.set(l,z),z+=l.length,S("IHDR",B,J,z),z+=b+B.length,S("IDATA",G,J,z),z+=b+G.length,S("IEND",new Uint8Array(0),J,z),C(J,"image/png",oe)}return function(ie,oe,de){const ae=ie.kind===void 0?i.ImageKind.GRAYSCALE_1BPP:ie.kind;return Y(ie,ae,oe,de)}}();class v{constructor(){this.fontSizeScale=1,this.fontWeight=x.fontWeight,this.fontSize=0,this.textMatrix=i.IDENTITY_MATRIX,this.fontMatrix=i.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=i.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=x.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(b,_){this.x=b,this.y=_}}let D=0,L=0,k=0;t.SVGGraphics=u=class{constructor(l,b,_=!1){(0,n.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new n.DOMSVGFactory,this.current=new v,this.transformMatrix=i.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=l,this.objs=b,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!_,this._operatorIdMapping=[];for(const c in i.OPS)this._operatorIdMapping[i.OPS[c]]=c}getObject(l,b=null){return typeof l=="string"?l.startsWith("g_")?this.commonObjs.get(l):this.objs.get(l):b}save(){this.transformStack.push(this.transformMatrix);const l=this.current;this.extraStack.push(l),this.current=l.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(l){this.save(),this.executeOpTree(l),this.restore()}loadDependencies(l){const b=l.fnArray,_=l.argsArray;for(let c=0,S=b.length;c<S;c++)if(b[c]===i.OPS.dependency)for(const j of _[c]){const m=j.startsWith("g_")?this.commonObjs:this.objs,V=new Promise(Y=>{m.get(j,Y)});this.current.dependencies.push(V)}return Promise.all(this.current.dependencies)}transform(l,b,_,c,S,j){const m=[l,b,_,c,S,j];this.transformMatrix=i.Util.transform(this.transformMatrix,m),this.tgrp=null}getSVG(l,b){this.viewport=b;const _=this._initialize(b);return this.loadDependencies(l).then(()=>(this.transformMatrix=i.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(l)),_))}convertOpList(l){const b=this._operatorIdMapping,_=l.argsArray,c=l.fnArray,S=[];for(let j=0,m=c.length;j<m;j++){const V=c[j];S.push({fnId:V,fn:b[V],args:_[j]})}return y(S)}executeOpTree(l){for(const b of l){const _=b.fn,c=b.fnId,S=b.args;switch(c|0){case i.OPS.beginText:this.beginText();break;case i.OPS.dependency:break;case i.OPS.setLeading:this.setLeading(S);break;case i.OPS.setLeadingMoveText:this.setLeadingMoveText(S[0],S[1]);break;case i.OPS.setFont:this.setFont(S);break;case i.OPS.showText:this.showText(S[0]);break;case i.OPS.showSpacedText:this.showText(S[0]);break;case i.OPS.endText:this.endText();break;case i.OPS.moveText:this.moveText(S[0],S[1]);break;case i.OPS.setCharSpacing:this.setCharSpacing(S[0]);break;case i.OPS.setWordSpacing:this.setWordSpacing(S[0]);break;case i.OPS.setHScale:this.setHScale(S[0]);break;case i.OPS.setTextMatrix:this.setTextMatrix(S[0],S[1],S[2],S[3],S[4],S[5]);break;case i.OPS.setTextRise:this.setTextRise(S[0]);break;case i.OPS.setTextRenderingMode:this.setTextRenderingMode(S[0]);break;case i.OPS.setLineWidth:this.setLineWidth(S[0]);break;case i.OPS.setLineJoin:this.setLineJoin(S[0]);break;case i.OPS.setLineCap:this.setLineCap(S[0]);break;case i.OPS.setMiterLimit:this.setMiterLimit(S[0]);break;case i.OPS.setFillRGBColor:this.setFillRGBColor(S[0],S[1],S[2]);break;case i.OPS.setStrokeRGBColor:this.setStrokeRGBColor(S[0],S[1],S[2]);break;case i.OPS.setStrokeColorN:this.setStrokeColorN(S);break;case i.OPS.setFillColorN:this.setFillColorN(S);break;case i.OPS.shadingFill:this.shadingFill(S[0]);break;case i.OPS.setDash:this.setDash(S[0],S[1]);break;case i.OPS.setRenderingIntent:this.setRenderingIntent(S[0]);break;case i.OPS.setFlatness:this.setFlatness(S[0]);break;case i.OPS.setGState:this.setGState(S[0]);break;case i.OPS.fill:this.fill();break;case i.OPS.eoFill:this.eoFill();break;case i.OPS.stroke:this.stroke();break;case i.OPS.fillStroke:this.fillStroke();break;case i.OPS.eoFillStroke:this.eoFillStroke();break;case i.OPS.clip:this.clip("nonzero");break;case i.OPS.eoClip:this.clip("evenodd");break;case i.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case i.OPS.paintImageXObject:this.paintImageXObject(S[0]);break;case i.OPS.paintInlineImageXObject:this.paintInlineImageXObject(S[0]);break;case i.OPS.paintImageMaskXObject:this.paintImageMaskXObject(S[0]);break;case i.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(S[0],S[1]);break;case i.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case i.OPS.closePath:this.closePath();break;case i.OPS.closeStroke:this.closeStroke();break;case i.OPS.closeFillStroke:this.closeFillStroke();break;case i.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case i.OPS.nextLine:this.nextLine();break;case i.OPS.transform:this.transform(S[0],S[1],S[2],S[3],S[4],S[5]);break;case i.OPS.constructPath:this.constructPath(S[0],S[1]);break;case i.OPS.endPath:this.endPath();break;case 92:this.group(b.items);break;default:(0,i.warn)(`Unimplemented operator ${_}`);break}}}setWordSpacing(l){this.current.wordSpacing=l}setCharSpacing(l){this.current.charSpacing=l}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(l,b,_,c,S,j){const m=this.current;m.textMatrix=m.lineMatrix=[l,b,_,c,S,j],m.textMatrixScale=Math.hypot(l,b),m.x=m.lineX=0,m.y=m.lineY=0,m.xcoords=[],m.ycoords=[],m.tspan=this.svgFactory.createElement("svg:tspan"),m.tspan.setAttributeNS(null,"font-family",m.fontFamily),m.tspan.setAttributeNS(null,"font-size",`${d(m.fontSize)}px`),m.tspan.setAttributeNS(null,"y",d(-m.y)),m.txtElement=this.svgFactory.createElement("svg:text"),m.txtElement.append(m.tspan)}beginText(){const l=this.current;l.x=l.lineX=0,l.y=l.lineY=0,l.textMatrix=i.IDENTITY_MATRIX,l.lineMatrix=i.IDENTITY_MATRIX,l.textMatrixScale=1,l.tspan=this.svgFactory.createElement("svg:tspan"),l.txtElement=this.svgFactory.createElement("svg:text"),l.txtgrp=this.svgFactory.createElement("svg:g"),l.xcoords=[],l.ycoords=[]}moveText(l,b){const _=this.current;_.x=_.lineX+=l,_.y=_.lineY+=b,_.xcoords=[],_.ycoords=[],_.tspan=this.svgFactory.createElement("svg:tspan"),_.tspan.setAttributeNS(null,"font-family",_.fontFamily),_.tspan.setAttributeNS(null,"font-size",`${d(_.fontSize)}px`),_.tspan.setAttributeNS(null,"y",d(-_.y))}showText(l){const b=this.current,_=b.font,c=b.fontSize;if(c===0)return;const S=b.fontSizeScale,j=b.charSpacing,m=b.wordSpacing,V=b.fontDirection,Y=b.textHScale*V,se=_.vertical,ie=se?1:-1,oe=_.defaultVMetrics,de=c*b.fontMatrix[0];let ae=0;for(const ve of l){if(ve===null){ae+=V*m;continue}else if(typeof ve=="number"){ae+=ie*ve*c/1e3;continue}const Ce=(ve.isSpace?m:0)+j,Se=ve.fontChar;let K,P,R=ve.width;if(se){let G;const q=ve.vmetric||oe;G=ve.vmetric?q[1]:R*.5,G=-G*de;const J=q[2]*de;R=q?-q[0]:R,K=G/S,P=(ae+J)/S}else K=ae/S,P=0;(ve.isInFont||_.missingFile)&&(b.xcoords.push(b.x+K),se&&b.ycoords.push(-b.y+P),b.tspan.textContent+=Se);let B;se?B=R*de-Ce*V:B=R*de+Ce*V,ae+=B}b.tspan.setAttributeNS(null,"x",b.xcoords.map(d).join(" ")),se?b.tspan.setAttributeNS(null,"y",b.ycoords.map(d).join(" ")):b.tspan.setAttributeNS(null,"y",d(-b.y)),se?b.y-=ae:b.x+=ae*Y,b.tspan.setAttributeNS(null,"font-family",b.fontFamily),b.tspan.setAttributeNS(null,"font-size",`${d(b.fontSize)}px`),b.fontStyle!==x.fontStyle&&b.tspan.setAttributeNS(null,"font-style",b.fontStyle),b.fontWeight!==x.fontWeight&&b.tspan.setAttributeNS(null,"font-weight",b.fontWeight);const pe=b.textRenderingMode&i.TextRenderingMode.FILL_STROKE_MASK;if(pe===i.TextRenderingMode.FILL||pe===i.TextRenderingMode.FILL_STROKE?(b.fillColor!==x.fillColor&&b.tspan.setAttributeNS(null,"fill",b.fillColor),b.fillAlpha<1&&b.tspan.setAttributeNS(null,"fill-opacity",b.fillAlpha)):b.textRenderingMode===i.TextRenderingMode.ADD_TO_PATH?b.tspan.setAttributeNS(null,"fill","transparent"):b.tspan.setAttributeNS(null,"fill","none"),pe===i.TextRenderingMode.STROKE||pe===i.TextRenderingMode.FILL_STROKE){const ve=1/(b.textMatrixScale||1);this._setStrokeAttributes(b.tspan,ve)}let ye=b.textMatrix;b.textRise!==0&&(ye=ye.slice(),ye[5]+=b.textRise),b.txtElement.setAttributeNS(null,"transform",`${T(ye)} scale(${d(Y)}, -1)`),b.txtElement.setAttributeNS(w,"xml:space","preserve"),b.txtElement.append(b.tspan),b.txtgrp.append(b.txtElement),this._ensureTransformGroup().append(b.txtElement)}setLeadingMoveText(l,b){this.setLeading(-b),this.moveText(l,b)}addFontStyle(l){if(!l.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const b=C(l.data,l.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${l.loadedName}"; src: url(${b}); }
`}setFont(l){const b=this.current,_=this.commonObjs.get(l[0]);let c=l[1];b.font=_,this.embedFonts&&!_.missingFile&&!this.embeddedFonts[_.loadedName]&&(this.addFontStyle(_),this.embeddedFonts[_.loadedName]=_),b.fontMatrix=_.fontMatrix||i.FONT_IDENTITY_MATRIX;let S="normal";_.black?S="900":_.bold&&(S="bold");const j=_.italic?"italic":"normal";c<0?(c=-c,b.fontDirection=-1):b.fontDirection=1,b.fontSize=c,b.fontFamily=_.loadedName,b.fontWeight=S,b.fontStyle=j,b.tspan=this.svgFactory.createElement("svg:tspan"),b.tspan.setAttributeNS(null,"y",d(-b.y)),b.xcoords=[],b.ycoords=[]}endText(){var b;const l=this.current;l.textRenderingMode&i.TextRenderingMode.ADD_TO_PATH_FLAG&&((b=l.txtElement)!=null&&b.hasChildNodes())&&(l.element=l.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(l){l>0&&(this.current.lineWidth=l)}setLineCap(l){this.current.lineCap=f[l]}setLineJoin(l){this.current.lineJoin=N[l]}setMiterLimit(l){this.current.miterLimit=l}setStrokeAlpha(l){this.current.strokeAlpha=l}setStrokeRGBColor(l,b,_){this.current.strokeColor=i.Util.makeHexColor(l,b,_)}setFillAlpha(l){this.current.fillAlpha=l}setFillRGBColor(l,b,_){this.current.fillColor=i.Util.makeHexColor(l,b,_),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(l){this.current.strokeColor=this._makeColorN_Pattern(l)}setFillColorN(l){this.current.fillColor=this._makeColorN_Pattern(l)}shadingFill(l){const b=this.viewport.width,_=this.viewport.height,c=i.Util.inverseTransform(this.transformMatrix),S=i.Util.applyTransform([0,0],c),j=i.Util.applyTransform([0,_],c),m=i.Util.applyTransform([b,0],c),V=i.Util.applyTransform([b,_],c),Y=Math.min(S[0],j[0],m[0],V[0]),se=Math.min(S[1],j[1],m[1],V[1]),ie=Math.max(S[0],j[0],m[0],V[0]),oe=Math.max(S[1],j[1],m[1],V[1]),de=this.svgFactory.createElement("svg:rect");de.setAttributeNS(null,"x",Y),de.setAttributeNS(null,"y",se),de.setAttributeNS(null,"width",ie-Y),de.setAttributeNS(null,"height",oe-se),de.setAttributeNS(null,"fill",this._makeShadingPattern(l)),this.current.fillAlpha<1&&de.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(de)}_makeColorN_Pattern(l){return l[0]==="TilingPattern"?this._makeTilingPattern(l):this._makeShadingPattern(l)}_makeTilingPattern(l){const b=l[1],_=l[2],c=l[3]||i.IDENTITY_MATRIX,[S,j,m,V]=l[4],Y=l[5],se=l[6],ie=l[7],oe=`shading${k++}`,[de,ae,pe,ye]=i.Util.normalizeRect([...i.Util.applyTransform([S,j],c),...i.Util.applyTransform([m,V],c)]),[ve,Ce]=i.Util.singularValueDecompose2dScale(c),Se=Y*ve,K=se*Ce,P=this.svgFactory.createElement("svg:pattern");P.setAttributeNS(null,"id",oe),P.setAttributeNS(null,"patternUnits","userSpaceOnUse"),P.setAttributeNS(null,"width",Se),P.setAttributeNS(null,"height",K),P.setAttributeNS(null,"x",`${de}`),P.setAttributeNS(null,"y",`${ae}`);const R=this.svg,B=this.transformMatrix,G=this.current.fillColor,q=this.current.strokeColor,J=this.svgFactory.create(pe-de,ye-ae);if(this.svg=J,this.transformMatrix=c,ie===2){const z=i.Util.makeHexColor(...b);this.current.fillColor=z,this.current.strokeColor=z}return this.executeOpTree(this.convertOpList(_)),this.svg=R,this.transformMatrix=B,this.current.fillColor=G,this.current.strokeColor=q,P.append(J.childNodes[0]),this.defs.append(P),`url(#${oe})`}_makeShadingPattern(l){switch(typeof l=="string"&&(l=this.objs.get(l)),l[0]){case"RadialAxial":const b=`shading${k++}`,_=l[3];let c;switch(l[1]){case"axial":const S=l[4],j=l[5];c=this.svgFactory.createElement("svg:linearGradient"),c.setAttributeNS(null,"id",b),c.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),c.setAttributeNS(null,"x1",S[0]),c.setAttributeNS(null,"y1",S[1]),c.setAttributeNS(null,"x2",j[0]),c.setAttributeNS(null,"y2",j[1]);break;case"radial":const m=l[4],V=l[5],Y=l[6],se=l[7];c=this.svgFactory.createElement("svg:radialGradient"),c.setAttributeNS(null,"id",b),c.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),c.setAttributeNS(null,"cx",V[0]),c.setAttributeNS(null,"cy",V[1]),c.setAttributeNS(null,"r",se),c.setAttributeNS(null,"fx",m[0]),c.setAttributeNS(null,"fy",m[1]),c.setAttributeNS(null,"fr",Y);break;default:throw new Error(`Unknown RadialAxial type: ${l[1]}`)}for(const S of _){const j=this.svgFactory.createElement("svg:stop");j.setAttributeNS(null,"offset",S[0]),j.setAttributeNS(null,"stop-color",S[1]),c.append(j)}return this.defs.append(c),`url(#${b})`;case"Mesh":return(0,i.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${l[0]}`)}}setDash(l,b){this.current.dashArray=l,this.current.dashPhase=b}constructPath(l,b){const _=this.current;let c=_.x,S=_.y,j=[],m=0;for(const V of l)switch(V|0){case i.OPS.rectangle:c=b[m++],S=b[m++];const Y=b[m++],se=b[m++],ie=c+Y,oe=S+se;j.push("M",d(c),d(S),"L",d(ie),d(S),"L",d(ie),d(oe),"L",d(c),d(oe),"Z");break;case i.OPS.moveTo:c=b[m++],S=b[m++],j.push("M",d(c),d(S));break;case i.OPS.lineTo:c=b[m++],S=b[m++],j.push("L",d(c),d(S));break;case i.OPS.curveTo:c=b[m+4],S=b[m+5],j.push("C",d(b[m]),d(b[m+1]),d(b[m+2]),d(b[m+3]),d(c),d(S)),m+=6;break;case i.OPS.curveTo2:j.push("C",d(c),d(S),d(b[m]),d(b[m+1]),d(b[m+2]),d(b[m+3])),c=b[m+2],S=b[m+3],m+=4;break;case i.OPS.curveTo3:c=b[m+2],S=b[m+3],j.push("C",d(b[m]),d(b[m+1]),d(c),d(S),d(c),d(S)),m+=4;break;case i.OPS.closePath:j.push("Z");break}j=j.join(" "),_.path&&l.length>0&&l[0]!==i.OPS.rectangle&&l[0]!==i.OPS.moveTo?j=_.path.getAttributeNS(null,"d")+j:(_.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(_.path)),_.path.setAttributeNS(null,"d",j),_.path.setAttributeNS(null,"fill","none"),_.element=_.path,_.setCurrentPoint(c,S)}endPath(){const l=this.current;if(l.path=null,!this.pendingClip)return;if(!l.element){this.pendingClip=null;return}const b=`clippath${D++}`,_=this.svgFactory.createElement("svg:clipPath");_.setAttributeNS(null,"id",b),_.setAttributeNS(null,"transform",T(this.transformMatrix));const c=l.element.cloneNode(!0);if(this.pendingClip==="evenodd"?c.setAttributeNS(null,"clip-rule","evenodd"):c.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,_.append(c),this.defs.append(_),l.activeClipUrl){l.clipGroup=null;for(const S of this.extraStack)S.clipGroup=null;_.setAttributeNS(null,"clip-path",l.activeClipUrl)}l.activeClipUrl=`url(#${b})`,this.tgrp=null}clip(l){this.pendingClip=l}closePath(){const l=this.current;if(l.path){const b=`${l.path.getAttributeNS(null,"d")}Z`;l.path.setAttributeNS(null,"d",b)}}setLeading(l){this.current.leading=-l}setTextRise(l){this.current.textRise=l}setTextRenderingMode(l){this.current.textRenderingMode=l}setHScale(l){this.current.textHScale=l/100}setRenderingIntent(l){}setFlatness(l){}setGState(l){for(const[b,_]of l)switch(b){case"LW":this.setLineWidth(_);break;case"LC":this.setLineCap(_);break;case"LJ":this.setLineJoin(_);break;case"ML":this.setMiterLimit(_);break;case"D":this.setDash(_[0],_[1]);break;case"RI":this.setRenderingIntent(_);break;case"FL":this.setFlatness(_);break;case"Font":this.setFont(_);break;case"CA":this.setStrokeAlpha(_);break;case"ca":this.setFillAlpha(_);break;default:(0,i.warn)(`Unimplemented graphic state operator ${b}`);break}}fill(){const l=this.current;l.element&&(l.element.setAttributeNS(null,"fill",l.fillColor),l.element.setAttributeNS(null,"fill-opacity",l.fillAlpha),this.endPath())}stroke(){const l=this.current;l.element&&(this._setStrokeAttributes(l.element),l.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(l,b=1){const _=this.current;let c=_.dashArray;b!==1&&c.length>0&&(c=c.map(function(S){return b*S})),l.setAttributeNS(null,"stroke",_.strokeColor),l.setAttributeNS(null,"stroke-opacity",_.strokeAlpha),l.setAttributeNS(null,"stroke-miterlimit",d(_.miterLimit)),l.setAttributeNS(null,"stroke-linecap",_.lineCap),l.setAttributeNS(null,"stroke-linejoin",_.lineJoin),l.setAttributeNS(null,"stroke-width",d(b*_.lineWidth)+"px"),l.setAttributeNS(null,"stroke-dasharray",c.map(d).join(" ")),l.setAttributeNS(null,"stroke-dashoffset",d(b*_.dashPhase)+"px")}eoFill(){var l;(l=this.current.element)==null||l.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var l;(l=this.current.element)==null||l.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x","0"),l.setAttributeNS(null,"y","0"),l.setAttributeNS(null,"width","1px"),l.setAttributeNS(null,"height","1px"),l.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(l)}paintImageXObject(l){const b=this.getObject(l);if(!b){(0,i.warn)(`Dependent image with object ID ${l} is not ready yet`);return}this.paintInlineImageXObject(b)}paintInlineImageXObject(l,b){const _=l.width,c=l.height,S=I(l,this.forceDataSchema,!!b),j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x","0"),j.setAttributeNS(null,"y","0"),j.setAttributeNS(null,"width",d(_)),j.setAttributeNS(null,"height",d(c)),this.current.element=j,this.clip("nonzero");const m=this.svgFactory.createElement("svg:image");m.setAttributeNS(E,"xlink:href",S),m.setAttributeNS(null,"x","0"),m.setAttributeNS(null,"y",d(-c)),m.setAttributeNS(null,"width",d(_)+"px"),m.setAttributeNS(null,"height",d(c)+"px"),m.setAttributeNS(null,"transform",`scale(${d(1/_)} ${d(-1/c)})`),b?b.append(m):this._ensureTransformGroup().append(m)}paintImageMaskXObject(l){const b=this.getObject(l.data,l);if(b.bitmap){(0,i.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const _=this.current,c=b.width,S=b.height,j=_.fillColor;_.maskId=`mask${L++}`;const m=this.svgFactory.createElement("svg:mask");m.setAttributeNS(null,"id",_.maskId);const V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x","0"),V.setAttributeNS(null,"y","0"),V.setAttributeNS(null,"width",d(c)),V.setAttributeNS(null,"height",d(S)),V.setAttributeNS(null,"fill",j),V.setAttributeNS(null,"mask",`url(#${_.maskId})`),this.defs.append(m),this._ensureTransformGroup().append(V),this.paintInlineImageXObject(b,m)}paintFormXObjectBegin(l,b){if(Array.isArray(l)&&l.length===6&&this.transform(l[0],l[1],l[2],l[3],l[4],l[5]),b){const _=b[2]-b[0],c=b[3]-b[1],S=this.svgFactory.createElement("svg:rect");S.setAttributeNS(null,"x",b[0]),S.setAttributeNS(null,"y",b[1]),S.setAttributeNS(null,"width",d(_)),S.setAttributeNS(null,"height",d(c)),this.current.element=S,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(l){const b=this.svgFactory.create(l.width,l.height),_=this.svgFactory.createElement("svg:defs");b.append(_),this.defs=_;const c=this.svgFactory.createElement("svg:g");return c.setAttributeNS(null,"transform",T(l.transform)),b.append(c),this.svg=c,b}_ensureClipGroup(){if(!this.current.clipGroup){const l=this.svgFactory.createElement("svg:g");l.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(l),this.current.clipGroup=l}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",T(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}}],__webpack_module_cache__={};function __w_pdfjs_require__(e){var t=__webpack_module_cache__[e];if(t!==void 0)return t.exports;var s=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var e=__webpack_exports__;Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"AbortException",{enumerable:!0,get:function(){return t.AbortException}}),Object.defineProperty(e,"AnnotationEditorLayer",{enumerable:!0,get:function(){return a.AnnotationEditorLayer}}),Object.defineProperty(e,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return t.AnnotationEditorParamsType}}),Object.defineProperty(e,"AnnotationEditorType",{enumerable:!0,get:function(){return t.AnnotationEditorType}}),Object.defineProperty(e,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return u.AnnotationEditorUIManager}}),Object.defineProperty(e,"AnnotationLayer",{enumerable:!0,get:function(){return x.AnnotationLayer}}),Object.defineProperty(e,"AnnotationMode",{enumerable:!0,get:function(){return t.AnnotationMode}}),Object.defineProperty(e,"CMapCompressionType",{enumerable:!0,get:function(){return t.CMapCompressionType}}),Object.defineProperty(e,"FeatureTest",{enumerable:!0,get:function(){return t.FeatureTest}}),Object.defineProperty(e,"GlobalWorkerOptions",{enumerable:!0,get:function(){return w.GlobalWorkerOptions}}),Object.defineProperty(e,"InvalidPDFException",{enumerable:!0,get:function(){return t.InvalidPDFException}}),Object.defineProperty(e,"MissingPDFException",{enumerable:!0,get:function(){return t.MissingPDFException}}),Object.defineProperty(e,"OPS",{enumerable:!0,get:function(){return t.OPS}}),Object.defineProperty(e,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(e,"PDFDateString",{enumerable:!0,get:function(){return n.PDFDateString}}),Object.defineProperty(e,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(e,"PasswordResponses",{enumerable:!0,get:function(){return t.PasswordResponses}}),Object.defineProperty(e,"PermissionFlag",{enumerable:!0,get:function(){return t.PermissionFlag}}),Object.defineProperty(e,"PixelsPerInch",{enumerable:!0,get:function(){return n.PixelsPerInch}}),Object.defineProperty(e,"PromiseCapability",{enumerable:!0,get:function(){return t.PromiseCapability}}),Object.defineProperty(e,"RenderingCancelledException",{enumerable:!0,get:function(){return n.RenderingCancelledException}}),Object.defineProperty(e,"SVGGraphics",{enumerable:!0,get:function(){return E.SVGGraphics}}),Object.defineProperty(e,"UnexpectedResponseException",{enumerable:!0,get:function(){return t.UnexpectedResponseException}}),Object.defineProperty(e,"Util",{enumerable:!0,get:function(){return t.Util}}),Object.defineProperty(e,"VerbosityLevel",{enumerable:!0,get:function(){return t.VerbosityLevel}}),Object.defineProperty(e,"XfaLayer",{enumerable:!0,get:function(){return f.XfaLayer}}),Object.defineProperty(e,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(e,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return t.createValidAbsoluteUrl}}),Object.defineProperty(e,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(e,"getFilenameFromUrl",{enumerable:!0,get:function(){return n.getFilenameFromUrl}}),Object.defineProperty(e,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return n.getPdfFilenameFromUrl}}),Object.defineProperty(e,"getXfaPageViewport",{enumerable:!0,get:function(){return n.getXfaPageViewport}}),Object.defineProperty(e,"isDataScheme",{enumerable:!0,get:function(){return n.isDataScheme}}),Object.defineProperty(e,"isPdfFile",{enumerable:!0,get:function(){return n.isPdfFile}}),Object.defineProperty(e,"loadScript",{enumerable:!0,get:function(){return n.loadScript}}),Object.defineProperty(e,"normalizeUnicode",{enumerable:!0,get:function(){return t.normalizeUnicode}}),Object.defineProperty(e,"renderTextLayer",{enumerable:!0,get:function(){return i.renderTextLayer}}),Object.defineProperty(e,"setLayerDimensions",{enumerable:!0,get:function(){return n.setLayerDimensions}}),Object.defineProperty(e,"shadow",{enumerable:!0,get:function(){return t.shadow}}),Object.defineProperty(e,"updateTextLayer",{enumerable:!0,get:function(){return i.updateTextLayer}}),Object.defineProperty(e,"version",{enumerable:!0,get:function(){return s.version}});var t=__w_pdfjs_require__(1),s=__w_pdfjs_require__(2),n=__w_pdfjs_require__(6),i=__w_pdfjs_require__(26),a=__w_pdfjs_require__(27),u=__w_pdfjs_require__(5),x=__w_pdfjs_require__(32),w=__w_pdfjs_require__(14),E=__w_pdfjs_require__(35),f=__w_pdfjs_require__(34)})(),__webpack_exports__})())})(pdf);var pdfExports=pdf.exports;const pdfWorker=""+new URL("pdf.worker-0be00963.js",import.meta.url).href;var FileSaver_min={exports:{}};(function(e,t){(function(s,n){n()})(commonjsGlobal,function(){function s(E,f){return typeof f>"u"?f={autoBom:!1}:typeof f!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),f={autoBom:!f}),f.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(E.type)?new Blob(["\uFEFF",E],{type:E.type}):E}function n(E,f,N){var C=new XMLHttpRequest;C.open("GET",E),C.responseType="blob",C.onload=function(){w(C.response,f,N)},C.onerror=function(){console.error("could not download file")},C.send()}function i(E){var f=new XMLHttpRequest;f.open("HEAD",E,!1);try{f.send()}catch{}return 200<=f.status&&299>=f.status}function a(E){try{E.dispatchEvent(new MouseEvent("click"))}catch{var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),E.dispatchEvent(f)}}var u=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,x=u.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),w=u.saveAs||(typeof window!="object"||window!==u?function(){}:"download"in HTMLAnchorElement.prototype&&!x?function(E,f,N){var C=u.URL||u.webkitURL,I=document.createElement("a");f=f||E.name||"download",I.download=f,I.rel="noopener",typeof E=="string"?(I.href=E,I.origin===location.origin?a(I):i(I.href)?n(E,f,N):a(I,I.target="_blank")):(I.href=C.createObjectURL(E),setTimeout(function(){C.revokeObjectURL(I.href)},4e4),setTimeout(function(){a(I)},0))}:"msSaveOrOpenBlob"in navigator?function(E,f,N){if(f=f||E.name||"download",typeof E!="string")navigator.msSaveOrOpenBlob(s(E,N),f);else if(i(E))n(E,f,N);else{var C=document.createElement("a");C.href=E,C.target="_blank",setTimeout(function(){a(C)})}}:function(E,f,N,C){if(C=C||open("","_blank"),C&&(C.document.title=C.document.body.innerText="downloading..."),typeof E=="string")return n(E,f,N);var I=E.type==="application/octet-stream",v=/constructor/i.test(u.HTMLElement)||u.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||I&&v||x)&&typeof FileReader<"u"){var d=new FileReader;d.onloadend=function(){var L=d.result;L=y?L:L.replace(/^data:[^;]*;/,"data:attachment/file;"),C?C.location.href=L:location=L,C=null},d.readAsDataURL(E)}else{var T=u.URL||u.webkitURL,D=T.createObjectURL(E);C?C.location=D:location.href=D,C=null,setTimeout(function(){T.revokeObjectURL(D)},4e4)}});u.saveAs=w.saveAs=w,e.exports=w})})(FileSaver_min);var FileSaver_minExports=FileSaver_min.exports;function generateCanvas(e,t,s){const{width:n,height:i,words:a,compression:u}=e,x=document.createElement("canvas"),w=x.getContext("2d");return x.width=s?t.width:n,x.height=s?t.height:i,w.drawImage(t,0,0,x.width,x.height),a.trim().length>0&&addWaterMark(e,w),{src:x.toDataURL("image/jpeg",u),newCanvas:x}}function addWaterMark(e,t){const{width:s,height:n,words:i,fontSize:a,color:u,rotate:x,row:w,col:E,startX:f,startY:N,offsetX:C,offsetY:I}=e;t.fillStyle="rgba(255, 255, 255, 0.2)",t.fillRect(0,0,s,n),t.rotate(parseInt(x)*Math.PI/180),t.fillStyle=u,t.font=`normal ${a}px Arial`,Array.from({length:w}).forEach((v,y)=>{Array.from({length:E}).forEach((d,T)=>{if(i.includes(`
`))multipleWords(t,y,T,i,a,f,N,C,I);else{const D=+f+T*(i.length*a+C),L=+N+y*(I+a);t.fillText(i,D,L)}})})}function multipleWords(e,t,s,n,i,a,u,x,w){const E=n.split(`
`),f=E.length,N=Math.max(...E.map(C=>C.length));for(let C=0;C<f;C++){const I=+a+s*(N*i+x)+(N-E[C].length)/2*i,v=+u+t*w+i*1.3*(C+f*t);e.fillText(E[C],I,v)}}function downloadImage(e,t,s){const n=new Image;n.src=e,n.onload=()=>{const i=document.createElement("canvas");i.width=+t.width,i.height=+t.height;const a=i.getContext("2d");a==null||a.drawImage(n,0,0);const u=i.toDataURL("image/png"),x=dataURLToBlob(u),w=document.createElement("a");w.href=URL.createObjectURL(x),w.download=s,w.style.display="none",document.body.appendChild(w),w.click(),document.body.removeChild(w)}}function dataURLToBlob(e){const t=e.split(";base64,"),s=t[0].split(":")[1],n=window.atob(t[1]),i=n.length,a=new Uint8Array(i);for(let u=0;u<i;++u)a[u]=n.charCodeAt(u);return new Blob([a],{type:s})}pdfExports.GlobalWorkerOptions.workerSrc=pdfWorker;const imgData=[];async function loadPdf(e,t,s,n,i){const a=pdfExports.getDocument({url:e,disableRange:!0});imgData.length=0,a.promise.then(u=>{s.value&&(s.value.innerHTML="");const x=u.numPages;for(let w=1;w<=x;w++)u.getPage(w).then(E=>{const f=document.createElement("canvas"),N=f.getContext("2d"),C=E.getViewport({scale:1});f.width=C.width,f.height=C.height,t.width=f.width,t.height=f.height;const I={canvasContext:N,viewport:C};E.render(I).promise.then(function(){const{newCanvas:y,src:d}=generateCanvas(t,f,i);s.value.appendChild(y),imgData.push({src:d,width:f.width,height:f.height}),imgData.length===x&&(n.value=!1)})})})}function img2Pdf(e,t){const s={autoFirstPage:!1,compress:!1},n=new PDFDocument(s),i=n.pipe(blobStream());for(let a=0;a<imgData.length;a++){const{src:u,width:x,height:w}=imgData[a];n.addPage({size:[x,w]}),n.image(u,0,0)}n.end(),i.on("finish",function(){var a=i.toBlob("application/pdf");FileSaver_minExports.saveAs(a,e),t.value=!1})}const _hoisted_1$4={"pl-100":""},_hoisted_2$3={relative:"","h-10":""},_hoisted_3$3=createBaseVNode("label",{absolute:"","left-0":"",for:"load"},[createBaseVNode("span",{class:"m-3 text-sm btn"}," Load ")],-1),_hoisted_4$3=["disabled"],_hoisted_5$2={"m-3":"","w-fit":"","border-1":"","border-rd":"","p-3":"","mr-5":""},_hoisted_6$2={key:0},_hoisted_7$2=["src"],_hoisted_8$2={key:1},_hoisted_9$2={key:2,"w-200":"","h-168":"",flex:"","justify-center":"","flex-items-center":""},_hoisted_10$2=createBaseVNode("label",{for:"load","border-1":"","border-dashed":""},[createBaseVNode("span",{"icon-btn":"","text-10":"","display-block":"","i-carbon:task-add":""})],-1),_hoisted_11=[_hoisted_10$2],_hoisted_12={position:"fixed","left-0":"","top-0":"","right-0":"","bottom-0":"",flex:"","items-center":"","justify-center":"","bg-teal-100":""},_hoisted_13=createBaseVNode("span",{class:"loading btn","i-carbon-3rd-party-connected":"","text-4xl":""},null,-1),_hoisted_14=[_hoisted_13],_sfc_main$6=defineComponent({__name:"TheMain",props:{config:null},setup(e){watch(e.config,t);function t(){s=!1,x&&(E.value.src=generateCanvas(e.config,x,s).src),C.value&&loadPdf(C.value,e.config,v,I,s)}let s=!1,n="",i="";function a(T){s=!0,u();const D=T.target.files;if(D&&D.length>0){const L=D[0];n=L.type,i=L.name,n.startsWith("image/")&&N(L),n==="application/pdf"&&(I.value=!0,y(L))}}function u(){x&&(x=null),f.value&&(f.value=""),C.value&&(C.value=""),v.value&&(v.value.innerHTML="")}let x;const w=ref(),E=ref(),f=ref();function N(T){const D=new FileReader;D.readAsDataURL(T),D.onload=()=>{const L=new Image;L.src=D.result,x=L,L.onload=()=>{e.config.width=L.width,e.config.height=L.height,E.value.src=generateCanvas(e.config,L,s).src}},D.onloadend=()=>{f.value=D.result}}const C=ref(),I=ref(!1),v=ref();function y(T){const D=new FileReader;D.readAsDataURL(T),D.onloadend=()=>{C.value=D.result,loadPdf(C.value,e.config,v,I,s)}}function d(){if(!(f.value===""&&C.value==="")){if(n.startsWith("image/")&&x){const T=generateCanvas(e.config,x,s).src;downloadImage(T,e.config,i)}n==="application/pdf"&&img2Pdf(i,I)}}return(T,D)=>(openBlock(),createElementBlock("div",_hoisted_1$4,[createBaseVNode("div",_hoisted_2$3,[createBaseVNode("input",{id:"load",absolute:"","left-0":"","m-3":"","w-16":"","opacity-0":"",type:"file",accept:"image/*, application/pdf",onChange:a},null,32),_hoisted_3$3,createBaseVNode("button",{absolute:"","left-25":"",class:"m-3 text-sm btn",disabled:unref(f)===""&&unref(C)==="",onClick:d}," Download ",8,_hoisted_4$3)]),createBaseVNode("div",_hoisted_5$2,[unref(f)?(openBlock(),createElementBlock("div",_hoisted_6$2,[createBaseVNode("img",{ref_key:"preview",ref:E,src:unref(f),style:normalizeStyle(`width: ${e.config.width}px;height: ${e.config.height}px;max-width: unset;`)},null,12,_hoisted_7$2),createBaseVNode("canvas",{ref_key:"canvas",ref:w,"display-none":""},null,512)])):unref(C)?(openBlock(),createElementBlock("div",_hoisted_8$2,[createBaseVNode("div",{ref_key:"wrap",ref:v},null,512)])):(openBlock(),createElementBlock("div",_hoisted_9$2,_hoisted_11))]),withDirectives(createBaseVNode("div",_hoisted_12,_hoisted_14,512),[[vShow,unref(I)]])]))}});var _a;const isClient=typeof window<"u",isDef=e=>typeof e<"u",isFunction=e=>typeof e=="function",isString=e=>typeof e=="string",noop=()=>{};isClient&&((_a=window==null?void 0:window.navigator)!=null&&_a.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function resolveUnref(e){return typeof e=="function"?e():unref(e)}function createFilterWrapper(e,t){function s(...n){return new Promise((i,a)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(i).catch(a)})}return s}const bypassFilter=e=>e();function pausableFilter(e=bypassFilter){const t=ref(!0);function s(){t.value=!1}function n(){t.value=!0}const i=(...a)=>{t.value&&e(...a)};return{isActive:readonly(t),pause:s,resume:n,eventFilter:i}}function identity(e){return e}function tryOnScopeDispose(e){return getCurrentScope()?(onScopeDispose(e),!0):!1}function resolveRef(e){return typeof e=="function"?computed(e):ref(e)}function tryOnMounted(e,t=!0){getCurrentInstance()?onMounted(e):t?e():nextTick(e)}function useToggle(e=!1,t={}){const{truthyValue:s=!0,falsyValue:n=!1}=t,i=isRef(e),a=ref(e);function u(x){if(arguments.length)return a.value=x,a.value;{const w=resolveUnref(s);return a.value=a.value===w?resolveUnref(n):w,a.value}}return i?u:[a,u]}var __getOwnPropSymbols$6=Object.getOwnPropertySymbols,__hasOwnProp$6=Object.prototype.hasOwnProperty,__propIsEnum$6=Object.prototype.propertyIsEnumerable,__objRest$5=(e,t)=>{var s={};for(var n in e)__hasOwnProp$6.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&__getOwnPropSymbols$6)for(var n of __getOwnPropSymbols$6(e))t.indexOf(n)<0&&__propIsEnum$6.call(e,n)&&(s[n]=e[n]);return s};function watchWithFilter(e,t,s={}){const n=s,{eventFilter:i=bypassFilter}=n,a=__objRest$5(n,["eventFilter"]);return watch(e,createFilterWrapper(i,t),a)}var __defProp$2=Object.defineProperty,__defProps$2=Object.defineProperties,__getOwnPropDescs$2=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$2=Object.getOwnPropertySymbols,__hasOwnProp$2=Object.prototype.hasOwnProperty,__propIsEnum$2=Object.prototype.propertyIsEnumerable,__defNormalProp$2=(e,t,s)=>t in e?__defProp$2(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,__spreadValues$2=(e,t)=>{for(var s in t||(t={}))__hasOwnProp$2.call(t,s)&&__defNormalProp$2(e,s,t[s]);if(__getOwnPropSymbols$2)for(var s of __getOwnPropSymbols$2(t))__propIsEnum$2.call(t,s)&&__defNormalProp$2(e,s,t[s]);return e},__spreadProps$2=(e,t)=>__defProps$2(e,__getOwnPropDescs$2(t)),__objRest$1=(e,t)=>{var s={};for(var n in e)__hasOwnProp$2.call(e,n)&&t.indexOf(n)<0&&(s[n]=e[n]);if(e!=null&&__getOwnPropSymbols$2)for(var n of __getOwnPropSymbols$2(e))t.indexOf(n)<0&&__propIsEnum$2.call(e,n)&&(s[n]=e[n]);return s};function watchPausable(e,t,s={}){const n=s,{eventFilter:i}=n,a=__objRest$1(n,["eventFilter"]),{eventFilter:u,pause:x,resume:w,isActive:E}=pausableFilter(i);return{stop:watchWithFilter(e,t,__spreadProps$2(__spreadValues$2({},a),{eventFilter:u})),pause:x,resume:w,isActive:E}}function unrefElement(e){var t;const s=resolveUnref(e);return(t=s==null?void 0:s.$el)!=null?t:s}const defaultWindow=isClient?window:void 0;function useEventListener(...e){let t,s,n,i;if(isString(e[0])||Array.isArray(e[0])?([s,n,i]=e,t=defaultWindow):[t,s,n,i]=e,!t)return noop;Array.isArray(s)||(s=[s]),Array.isArray(n)||(n=[n]);const a=[],u=()=>{a.forEach(f=>f()),a.length=0},x=(f,N,C,I)=>(f.addEventListener(N,C,I),()=>f.removeEventListener(N,C,I)),w=watch(()=>[unrefElement(t),resolveUnref(i)],([f,N])=>{u(),f&&a.push(...s.flatMap(C=>n.map(I=>x(f,C,I,N))))},{immediate:!0,flush:"post"}),E=()=>{w(),u()};return tryOnScopeDispose(E),E}function useSupported(e,t=!1){const s=ref(),n=()=>s.value=!!e();return n(),tryOnMounted(n,t),s}function useMediaQuery(e,t={}){const{window:s=defaultWindow}=t,n=useSupported(()=>s&&"matchMedia"in s&&typeof s.matchMedia=="function");let i;const a=ref(!1),u=()=>{i&&("removeEventListener"in i?i.removeEventListener("change",x):i.removeListener(x))},x=()=>{n.value&&(u(),i=s.matchMedia(resolveRef(e).value),a.value=i.matches,"addEventListener"in i?i.addEventListener("change",x):i.addListener(x))};return watchEffect(x),tryOnScopeDispose(()=>u()),a}function cloneFnJSON(e){return JSON.parse(JSON.stringify(e))}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__";_global[globalKey]=_global[globalKey]||{};const handlers=_global[globalKey];function getSSRHandler(e,t){return handlers[e]||t}function guessSerializerType(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}var __defProp$k=Object.defineProperty,__getOwnPropSymbols$m=Object.getOwnPropertySymbols,__hasOwnProp$m=Object.prototype.hasOwnProperty,__propIsEnum$m=Object.prototype.propertyIsEnumerable,__defNormalProp$k=(e,t,s)=>t in e?__defProp$k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,__spreadValues$k=(e,t)=>{for(var s in t||(t={}))__hasOwnProp$m.call(t,s)&&__defNormalProp$k(e,s,t[s]);if(__getOwnPropSymbols$m)for(var s of __getOwnPropSymbols$m(t))__propIsEnum$m.call(t,s)&&__defNormalProp$k(e,s,t[s]);return e};const StorageSerializers={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},customStorageEventName="vueuse-storage";function useStorage(e,t,s,n={}){var i;const{flush:a="pre",deep:u=!0,listenToStorageChanges:x=!0,writeDefaults:w=!0,mergeDefaults:E=!1,shallow:f,window:N=defaultWindow,eventFilter:C,onError:I=c=>{console.error(c)}}=n,v=(f?shallowRef:ref)(t);if(!s)try{s=getSSRHandler("getDefaultStorage",()=>{var c;return(c=defaultWindow)==null?void 0:c.localStorage})()}catch(c){I(c)}if(!s)return v;const y=resolveUnref(t),d=guessSerializerType(y),T=(i=n.serializer)!=null?i:StorageSerializers[d],{pause:D,resume:L}=watchPausable(v,()=>k(v.value),{flush:a,deep:u,eventFilter:C});return N&&x&&(useEventListener(N,"storage",_),useEventListener(N,customStorageEventName,b)),_(),v;function k(c){try{if(c==null)s.removeItem(e);else{const S=T.write(c),j=s.getItem(e);j!==S&&(s.setItem(e,S),N&&N.dispatchEvent(new CustomEvent(customStorageEventName,{detail:{key:e,oldValue:j,newValue:S,storageArea:s}})))}}catch(S){I(S)}}function l(c){const S=c?c.newValue:s.getItem(e);if(S==null)return w&&y!==null&&s.setItem(e,T.write(y)),y;if(!c&&E){const j=T.read(S);return isFunction(E)?E(j,y):d==="object"&&!Array.isArray(j)?__spreadValues$k(__spreadValues$k({},y),j):j}else return typeof S!="string"?S:T.read(S)}function b(c){_(c.detail)}function _(c){if(!(c&&c.storageArea!==s)){if(c&&c.key==null){v.value=y;return}if(!(c&&c.key!==e)){D();try{v.value=l(c)}catch(S){I(S)}finally{c?nextTick(L):L()}}}}}function usePreferredDark(e){return useMediaQuery("(prefers-color-scheme: dark)",e)}var __defProp$j=Object.defineProperty,__getOwnPropSymbols$l=Object.getOwnPropertySymbols,__hasOwnProp$l=Object.prototype.hasOwnProperty,__propIsEnum$l=Object.prototype.propertyIsEnumerable,__defNormalProp$j=(e,t,s)=>t in e?__defProp$j(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,__spreadValues$j=(e,t)=>{for(var s in t||(t={}))__hasOwnProp$l.call(t,s)&&__defNormalProp$j(e,s,t[s]);if(__getOwnPropSymbols$l)for(var s of __getOwnPropSymbols$l(t))__propIsEnum$l.call(t,s)&&__defNormalProp$j(e,s,t[s]);return e};function useColorMode(e={}){const{selector:t="html",attribute:s="class",initialValue:n="auto",window:i=defaultWindow,storage:a,storageKey:u="vueuse-color-scheme",listenToStorageChanges:x=!0,storageRef:w,emitAuto:E}=e,f=__spreadValues$j({auto:"",light:"light",dark:"dark"},e.modes||{}),N=usePreferredDark({window:i}),C=computed(()=>N.value?"dark":"light"),I=w||(u==null?ref(n):useStorage(u,n,a,{window:i,listenToStorageChanges:x})),v=computed({get(){return I.value==="auto"&&!E?C.value:I.value},set(D){I.value=D}}),y=getSSRHandler("updateHTMLAttrs",(D,L,k)=>{const l=i==null?void 0:i.document.querySelector(D);if(l)if(L==="class"){const b=k.split(/\s/g);Object.values(f).flatMap(_=>(_||"").split(/\s/g)).filter(Boolean).forEach(_=>{b.includes(_)?l.classList.add(_):l.classList.remove(_)})}else l.setAttribute(L,k)});function d(D){var L;const k=D==="auto"?C.value:D;y(t,s,(L=f[k])!=null?L:k)}function T(D){e.onChanged?e.onChanged(D,d):d(D)}return watch(v,T,{flush:"post",immediate:!0}),E&&watch(C,()=>T(v.value),{flush:"post"}),tryOnMounted(()=>T(v.value)),v}var __defProp$i=Object.defineProperty,__defProps$7=Object.defineProperties,__getOwnPropDescs$7=Object.getOwnPropertyDescriptors,__getOwnPropSymbols$k=Object.getOwnPropertySymbols,__hasOwnProp$k=Object.prototype.hasOwnProperty,__propIsEnum$k=Object.prototype.propertyIsEnumerable,__defNormalProp$i=(e,t,s)=>t in e?__defProp$i(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,__spreadValues$i=(e,t)=>{for(var s in t||(t={}))__hasOwnProp$k.call(t,s)&&__defNormalProp$i(e,s,t[s]);if(__getOwnPropSymbols$k)for(var s of __getOwnPropSymbols$k(t))__propIsEnum$k.call(t,s)&&__defNormalProp$i(e,s,t[s]);return e},__spreadProps$7=(e,t)=>__defProps$7(e,__getOwnPropDescs$7(t));function useDark(e={}){const{valueDark:t="dark",valueLight:s="",window:n=defaultWindow}=e,i=useColorMode(__spreadProps$7(__spreadValues$i({},e),{onChanged:(x,w)=>{var E;e.onChanged?(E=e.onChanged)==null||E.call(e,x==="dark"):w(x)},modes:{dark:t,light:s}})),a=usePreferredDark({window:n});return computed({get(){return i.value==="dark"},set(x){x===a.value?i.value="auto":i.value=x?"dark":"light"}})}var SwipeDirection;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(SwipeDirection||(SwipeDirection={}));var __defProp=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,s)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,__spreadValues=(e,t)=>{for(var s in t||(t={}))__hasOwnProp.call(t,s)&&__defNormalProp(e,s,t[s]);if(__getOwnPropSymbols)for(var s of __getOwnPropSymbols(t))__propIsEnum.call(t,s)&&__defNormalProp(e,s,t[s]);return e};const _TransitionPresets={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};__spreadValues({linear:identity},_TransitionPresets);function useVModel(e,t,s,n={}){var i,a,u;const{clone:x=!1,passive:w=!1,eventName:E,deep:f=!1,defaultValue:N}=n,C=getCurrentInstance(),I=s||(C==null?void 0:C.emit)||((i=C==null?void 0:C.$emit)==null?void 0:i.bind(C))||((u=(a=C==null?void 0:C.proxy)==null?void 0:a.$emit)==null?void 0:u.bind(C==null?void 0:C.proxy));let v=E;t||(t="modelValue"),v=E||v||`update:${t.toString()}`;const y=T=>x?isFunction(x)?x(T):cloneFnJSON(T):T,d=()=>isDef(e[t])?y(e[t]):N;if(w){const T=d(),D=ref(T);return watch(()=>e[t],L=>D.value=y(L)),watch(D,L=>{(L!==e[t]||f)&&I(v,L)},{deep:f}),D}else return computed({get(){return d()},set(T){I(v,T)}})}const isDark=useDark(),toggleDark=useToggle(isDark),_export_sfc=(e,t)=>{const s=e.__vccOpts||e;for(const[n,i]of t)s[n]=i;return s},_sfc_main$5={},_hoisted_1$3={"mt-6":"","inline-flex":"","gap-2":"","text-xl":""},_hoisted_2$2=createBaseVNode("div",{"i-carbon-sun":"","dark:i-carbon-moon":""},null,-1),_hoisted_3$2=[_hoisted_2$2],_hoisted_4$2=createBaseVNode("a",{"i-carbon-logo-github":"","icon-btn":"",rel:"noreferrer",href:"https://github.com/Efrice/watermark.git",target:"_blank",title:"GitHub"},null,-1);function _sfc_render(e,t){return openBlock(),createElementBlock("nav",_hoisted_1$3,[createBaseVNode("button",{"icon-btn":"",onClick:t[0]||(t[0]=s=>("toggleDark"in e?e.toggleDark:unref(toggleDark))())},_hoisted_3$2),_hoisted_4$2])}const __unplugin_components_1=_export_sfc(_sfc_main$5,[["render",_sfc_render]]),_sfc_main$4=defineComponent({__name:"TheSwitch",props:{value:{type:Boolean}},emits:["update:value"],setup(e,{emit:t}){function s(){t("update:value",!e.value)}return(n,i)=>(openBlock(),createElementBlock("button",{class:normalizeClass(["switch",`${e.value?"light":""}`]),type:"button",role:"switch"},[createBaseVNode("span",{class:normalizeClass(["check",`${e.value?"light":""}`]),onClick:s},null,2)],2))}}),TheSwitch_vue_vue_type_style_index_0_scoped_a5ee2d55_lang="",__unplugin_components_0=_export_sfc(_sfc_main$4,[["__scopeId","data-v-a5ee2d55"]]),__MACROS_useVModel=(...e)=>{const t=getCurrentInstance().proxy.$props,s={};for(const n of e)if(typeof n=="string")s[n]=useVModel(t,n,void 0,{eventName:`update:${n}`,passive:!0});else{const[i,a=i,u=`update:${i}`,x={}]=n;s[i]=useVModel(t,a,void 0,{eventName:u,passive:!0,...x})}return s},WATERMWRK_KEY="watermark-config",defaultConfig={words:"",width:0,height:0,fontSize:16,color:"rgba(0, 0, 0, 0.2)",rotate:"-15",row:7,col:7,startX:"-100",startY:"0",offsetX:48,offsetY:48,compression:1,saveConfig:!1},tooltips={words:"the words of watermark, use enter key to wrap lines",width:"the width of image, pdf is not useful",height:"the height of image, pdf is not useful",fontSize:"the font size of the watermark",color:"the color of the watermark, rgba is three-primary color, last parameter is opacity",rotate:"the rotation angle of watermark",row:"the rows of watermarks",col:"the columns of watermarks",startX:"the position along the X axis of first watermark",startY:"the position along the Y axis of first watermark",offsetX:"the offset along the X axis between two watermarks",offsetY:"the offset along the Y axis between two watermarks",compression:"the level for compression",saveConfig:"save the config for next use"},_hoisted_1$2={"pb-1":"",flex:"","justify-between":"","flex-items-center":""},_hoisted_2$1=["for"],_hoisted_3$1=["title"],_hoisted_4$1={key:0},_hoisted_5$1={key:1},_hoisted_6$1=["id"],_hoisted_7$1={key:2,pt3:""},_hoisted_8$1={"py-2":""},_hoisted_9$1={key:3},_hoisted_10$1=["id"],_sfc_main$3=defineComponent({__name:"TheInput",props:{value:{type:[String,Boolean]},property:null},emits:["update:value"],setup(e){const{value:t}=__MACROS_useVModel("value");return(s,n)=>{const i=__unplugin_components_0;return openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("label",{for:e.property},[createTextVNode(toDisplayString(e.property)+" ",1),createBaseVNode("span",{"i-carbon-help":"","inline-block":"","text-sm":"","float-right":"",mt1:"",ml1:"",title:unref(tooltips)[e.property]},null,8,_hoisted_3$1)],8,_hoisted_2$1),e.property==="saveConfig"?(openBlock(),createElementBlock("div",_hoisted_4$1,[createVNode(i,{value:unref(t),"onUpdate:value":n[0]||(n[0]=a=>s.$emit("update:value",a))},null,8,["value"])])):e.property==="words"&&typeof unref(t)=="string"?(openBlock(),createElementBlock("div",_hoisted_5$1,[withDirectives(createBaseVNode("textarea",{id:e.property,"onUpdate:modelValue":n[1]||(n[1]=a=>isRef(t)?t.value=a:null),"px-1.5":"",cols:"25",rows:"2",bg:"transparent",border:"~ rounded gray-200 dark:gray-700",outline:"none active:none"},`
      `,8,_hoisted_6$1),[[vModelText,unref(t)]])])):e.property==="compression"?(openBlock(),createElementBlock("div",_hoisted_7$1,[withDirectives(createBaseVNode("input",{"w-58":"",class:"range",title:"Lower the Value, Better the Compression",type:"range",min:"0",max:"1","onUpdate:modelValue":n[2]||(n[2]=a=>isRef(t)?t.value=a:null),step:"0.1"},null,512),[[vModelText,unref(t)]]),createBaseVNode("p",_hoisted_8$1,toDisplayString(unref(t)),1)])):(openBlock(),createElementBlock("div",_hoisted_9$1,[withDirectives(createBaseVNode("input",{id:e.property,"onUpdate:modelValue":n[3]||(n[3]=a=>isRef(t)?t.value=a:null),type:"text",p:"x-0 y-1","w-58":"",text:"center",bg:"transparent",border:"~ rounded gray-200 dark:gray-700",outline:"none active:none"},null,8,_hoisted_10$1),[[vModelText,unref(t)]])]))])}}}),_hoisted_1$1={"float-left":"","w-100":"",mt:"52px","pt-2":"","border-1":"","border-rd":""},_hoisted_2=createBaseVNode("div",{"i-material-symbols-add-photo-alternate-rounded":"","inline-block":"","text-3xl":""},null,-1),_hoisted_3=createBaseVNode("div",{"i-carbon-add":"","inline-block":"","text-3xl":""},null,-1),_hoisted_4=createBaseVNode("div",{"i-material-symbols:picture-as-pdf":"","inline-block":"","text-3xl":""},null,-1),_hoisted_5=createBaseVNode("p",null," Watermark ",-1),_hoisted_6=createBaseVNode("p",null,[createBaseVNode("em",{"text-sm":"",op75:""},"Add watermark to image/pdf. ")],-1),_hoisted_7=createBaseVNode("div",{"py-2":""},null,-1),_hoisted_8={"px-5":""},_hoisted_9=createBaseVNode("div",{"py-4":""},null,-1),_hoisted_10=createBaseVNode("p",null,[createBaseVNode("em",{"text-sm":"",op75:""},"No sever, so safe")],-1),_sfc_main$2=defineComponent({__name:"TheControl",props:{config:null},setup(e){return(t,s)=>{const n=_sfc_main$3,i=__unplugin_components_1;return openBlock(),createElementBlock("div",_hoisted_1$1,[_hoisted_2,_hoisted_3,_hoisted_4,_hoisted_5,_hoisted_6,_hoisted_7,createBaseVNode("div",_hoisted_8,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.config,(a,u)=>(openBlock(),createBlock(n,{property:u,value:a,"onUpdate:value":x=>t.$emit("update",u,x)},null,8,["property","value","onUpdate:value"]))),256))]),_hoisted_9,_hoisted_10,createVNode(i)])}}}),_sfc_main$1=defineComponent({__name:"index",setup(e){const t=localStorage.getItem(WATERMWRK_KEY),s=t&&JSON.parse(t),n=reactive(s||defaultConfig),i=["words","color","rotate","startX","startY"];function a(u,x){u==="saveConfig"?n[u]=!!x:i.includes(u)?n[u]=x:n[u]=+x,u==="saveConfig"&&x===!1?localStorage.setItem(WATERMWRK_KEY,""):n.saveConfig&&localStorage.setItem(WATERMWRK_KEY,JSON.stringify(n))}return(u,x)=>{const w=_sfc_main$2,E=_sfc_main$6;return openBlock(),createElementBlock("div",null,[createVNode(w,{config:unref(n),onUpdate:a},null,8,["config"]),createVNode(E,{config:unref(n)},null,8,["config"])])}}}),_hoisted_1={"font-sans":"",p:"x-4 y-4",text:"center gray-700 dark:gray-200"},_sfc_main=defineComponent({__name:"App",setup(e){return(t,s)=>(openBlock(),createElementBlock("main",_hoisted_1,[createVNode(_sfc_main$1)]))}}),tailwind="",main="",__uno="",app=createApp(_sfc_main);app.mount("#app");
